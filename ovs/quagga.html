<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4281"/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div style="outline:0px;box-sizing:border-box;"><div style="box-sizing:inherit;outline:0px;font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:14px;line-height:1.57143;background-color:rgb(245, 246, 247);color:rgb(51, 51, 51);-webkit-font-smoothing:antialiased;"><div style="outline:0px;box-sizing:border-box;"><span style="box-sizing:inherit;outline:0px;"><div style="box-sizing:inherit;outline:0px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;">
	<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;border-bottom:1px solid rgb(224, 224, 224);padding-top:16px;z-index:9;background-color:rgb(255, 255, 255);">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;">
			<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;margin-bottom:8px;">
				<span style="border-radius:50%;display:inline-block;width:26px;height:26px;line-height:26px;text-align:center;font-size:12px;outline:0px;box-sizing:inherit;border:1px solid rgb(244, 206, 208);color:rgb(202, 12, 22);margin-right:8px;margin-top:4px;float:left;">原</span>				<h1 style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:24px;word-break:break-all;">Linux下使用Quagga搭建软路由-OSPFv2学习</h1>
			</div>
			<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;padding-bottom:14px;position:relative;">
				<div style="color:rgb(133, 133, 133);width:88%;height:24px;box-sizing:inherit;outline:0px;padding:0px;margin:0px;overflow:hidden;">
																				<span style="box-sizing:inherit;outline:0px;margin-right:14px;">2017年01月03日 22:03:51</span>
					<a href="https://me.csdn.net/stayneckwind2" style="box-sizing:inherit;outline:0px;text-decoration:none;cursor:pointer;color:rgb(120, 165, 241);margin-right:14px;" target="_blank">staticnetwind</a>
						<span style="box-sizing:inherit;outline:0px;margin-right:14px;">阅读数：3790</span>
												
														<span style="box-sizing:inherit;outline:0px;margin-right:14px;margin-bottom:8px;font-size:12px;">
								<span style="box-sizing:inherit;outline:0px;margin-right:14px;color:rgb(77, 77, 77);">标签：</span>
																<a href="http://so.csdn.net/so/search/s.do?q=linux&amp;t=blog" style="text-align:center;cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;border:1px solid rgb(204, 204, 204);color:rgb(77, 77, 77);padding:0px 8px;margin-bottom:4px;border-radius:100px;word-break:break-all;line-height:21px;min-width:24px;height:21px;margin-right:8px;" target="_blank">linux																</a><a href="http://so.csdn.net/so/search/s.do?q=quagga&amp;t=blog" style="text-align:center;cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;border:1px solid rgb(204, 204, 204);color:rgb(77, 77, 77);padding:0px 8px;margin-bottom:4px;border-radius:100px;word-break:break-all;line-height:21px;min-width:24px;height:21px;margin-right:8px;" target="_blank">quagga																</a><a href="http://so.csdn.net/so/search/s.do?q=OSPF&amp;t=blog" style="text-align:center;cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;border:1px solid rgb(204, 204, 204);color:rgb(77, 77, 77);padding:0px 8px;margin-bottom:4px;border-radius:100px;word-break:break-all;line-height:21px;min-width:24px;height:21px;margin-right:8px;" target="_blank">OSPF																</a><a href="http://so.csdn.net/so/search/s.do?q=%E4%BA%A4%E6%8D%A2%E6%9C%BA&amp;t=blog" style="text-align:center;cursor:pointer;text-decoration:none;outline:0px;box-sizing:inherit;display:inline-block;border:1px solid rgb(204, 204, 204);color:rgb(77, 77, 77);padding:0px 8px;margin-bottom:4px;border-radius:100px;word-break:break-all;line-height:21px;min-width:24px;height:21px;margin-right:8px;" target="_blank">交换机																</a>
							<span style="background-color:rgb(255, 255, 255);outline:0px;box-sizing:inherit;letter-spacing:0px;line-height:20px;cursor:pointer;font-size:12px;top:0px;right:101px;width:45px;display:inline-block;color:rgb(51, 153, 234);margin-right:0px;">更多</span></span>
																					<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-size:12px;margin-top:6px;margin-bottom:0px;">
								<span style="box-sizing:inherit;outline:0px;margin-right:14px;color:rgb(77, 77, 77);">个人分类：</span>
																<a href="https://blog.csdn.net/stayneckwind2/article/category/3120833" style="box-sizing:inherit;outline:0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">linux																</a>
							</div>
																								</div>
				<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;position:absolute;top:0px;right:0px;">
														</div>
			</div>
		</div>
	</div>
	<div style="box-sizing:inherit;outline:0px;display:block;position:relative;padding-top:16px;">
		<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-break:break-all;">
								<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;word-break:break-all;font-size:12px;color:rgb(153, 153, 153);margin-bottom:8px;">
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/stayneckwind2/article/details/53998728				</div>
								            
						<div style="box-sizing:inherit;outline:0px;padding:0px;margin:0px;font-family:-apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun;word-break:break-all;">
                
<h2 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t0" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>一、背景</h2>
<h2 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t1" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:12px;font-weight:normal;">在学习路由协议如OSPF协议时，需要进行一个实操的练习，若手里又没有核心交换机，怎么破？</span></h2>
<h2 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t2" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-size:12px;font-weight:normal;">本文讲述了如何在Linux系统上搭建软路由环境，并使用OSPF路由协议完成路由表的学习。</span></h2>
<h2 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t3" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>二、相关知识</h2>
<h3 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t4" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>2.1 <span style="outline:0px;box-sizing:border-box;word-break:break-all;font-family:'微软雅黑';font-size:14px;line-height:21px;">Quagga</span></h3>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:0px;box-sizing:border-box;word-break:break-all;line-height:21px;">Quagga是一款开源路由软件套件，它可以用来将你的Linux设备变成一个功能完备的路由器，支持</span>RIP，RIPNG，OSPFv2，OSPFv3，BGP等路由协议[1]。<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></div>
<h3 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t5" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-family:'微软雅黑';font-size:14px;line-height:21px;">2.2 OSPF</span></h3>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;line-height:21px;">OSPF(Open Shortest Path First开放式最短路径优先）是一个内部网关协议(Interior Gateway Protocol，简称IGP），用于在单一自治系统（autonomous system,AS）内决策路由。</span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;line-height:21px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;">OSPF相关概念比较多，以下挑几个重要知识点进行说明。</span></span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;text-indent:28px;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>LSA（</span>Link-State Advertisement<span style="outline:0px;box-sizing:border-box;word-break:break-all;text-indent:28px;">）</span><span style="outline:0px;box-sizing:border-box;word-break:break-all;text-indent:28px;">是链接状态协议使用的一个分组，它包括有关邻居和通道成本的信息。 LSAs被路由器接收用于维护它们的路由选择表。</span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>OSPF从报文的结构上划分，可以分为以下几种[2]：</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">
<ol style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;">Hello报文（Hello Packet）：周期性地发送，用于维护邻居关系以及DR/BDR选举；</li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;">DD报文（Database Description Packet）：用于两台路由器进行数据库同步，包含自己的LSDB（LSA集合）信息；</li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;">LSR报文（Link State Request Packet）：在交换DD报文后续，使用该报文向对方请求所需的LSA信息；</li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;">LSU报文（Link State Update Packet）：向对方发送所需的LSA信息集合。</li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;">LSAck报文（Link State Acknowledgment Packet）：用于对LSU报文进行确认。</li></ol></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>另一个重要的知识点就是邻居建立过程，如下图所示：</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img src="quagga_files/20170103224801799" type="image/png" data-filename="20170103224801799" height="370" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="389"/>、</span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>对于图上的7种状态进行说明：</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>
<ol style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;">Down：在Down状态下，OSPF进程还没有与任何邻居交换信息。OSPF在等待进入Init状态；</span></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;">Init：OSPF路由器以固定的时间间隔（缺省10s）发送Hello分组，以便与邻居路由器建立特殊的关系；</span></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;">T<span style="outline:0px;box-sizing:border-box;word-break:break-all;">wo-Way：每台OSPF路由器都使用分组试图与同一个IP网络中的所有邻居路由器建立双向状态或双向通信。Hello分组中含有发送者已知的OSPF邻居列表。当路由器看到它自己出现在一个邻居路由器的Hello分组中时，它就进入了双向状态；</span></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;">ExStart：当路由器与它的邻居进入到ExStart状态后，他们之间的会话就表征为一种毗邻关系，但这时路由器还没有变成全毗邻状态。ExStart状态是使用DD（数据库描述）分组建立的，两个路由器用Hello分组协商出“主从关系”；</span></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;">Exchange：在交换状态下，邻居路由器使用类型2的DD分组来互相发送它们的链路状态信息，也就是说路由器相互描述它们的链路状态数据库。路由器将它们所学到的信息与其现存的链路状态数据库进行比较，并且单独确认每个DD分组，如果任何一台路由器接收到不在其数据库中的链路信息，该路由器就向其邻居请求有关该链路的完整更新信息。完整的路由信息在“Loading”状态下被交换；</span></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;">Loading：在相互描述过各自的链路状态数据库之后，路由器可以用LSR（链路状态请求）分组来请求更完整的信息。当路由器接收到一个LSR的时候，它会用一个LSU（链路状态更新）分组进行回应。这些LSU分组含有确切的LSA，而LSA是链路状态型路由选择协议的核心，LSU分组由LSAck分组所确认；</span></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;list-style-type:decimal;margin-left:40px;margin-top:8px;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;">Full Adjacency：加载状态结束之后，路由器就进入全毗邻状态。每台路由器都保存着一张毗邻路由器列表，它就是称为毗邻数据库。</span></li></ol></div>
<h2 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t6" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>三、配置过程</h2>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>配置的拓扑如下，使用两个CentOS 分别模拟 Rt170、Rt171：</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><img height="287" src="https://img-blog.csdn.net/20170103231816296" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="837"></img><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span></div>
<h3 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t7" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>3.1 Quagga安装</h3>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>CentOS下可以直接使用yum install quagga进行安装，也可以源码安装，但是要注意第三方库的依赖。</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>安装完成后，需要在 /etc/quagga 把 zebra.conf、vtysh.conf、ospfd.conf 拷贝出来。</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>启动命令使用 service zebra start、service ospfd start进行启动，若对端收不到报文，可能还需要关闭防火墙 iptables。</div>
<h3 style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t8" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>3.2 OSPF配置</h3>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>进入vtysh进行初始配置，设置日志文件 /var/log/quagga/quagga.log</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img src="quagga_files/20170103231529917" type="image/png" data-filename="20170103231529917" height="288" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="417"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img height="247" src="https://img-blog.csdn.net/20170103231556043" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="415"></img></span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span></span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>配置接口 分别对应拓扑</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img height="248" src="https://img-blog.csdn.net/20170103232023923" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="530"></img></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span><img src="quagga_files/20170103232029376" type="image/png" data-filename="20170103232029376" height="250" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="499"/><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>设置</span>OSPF ，router ospf、route-id、network 192.168.50.0/24 area 0</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img src="quagga_files/20170103232201586" type="image/png" data-filename="20170103232201586" height="276" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="461"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img src="quagga_files/20170103232206472" type="image/png" data-filename="20170103232206472" height="252" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="471"/></span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>配置</span>成功</span>后，查看邻居信息，可以看见状态分别从 init -&gt; two-way -&gt;... full 进行切换，最终可以看出主从关系</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img src="quagga_files/20170103232715713" type="image/png" data-filename="20170103232715713" height="61" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="721"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img src="quagga_files/20170103232720932" type="image/png" data-filename="20170103232720932" height="64" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="716"/></span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>查看</span>路由表</span>，发现可以学习到各自对端的路由表信息</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img height="183" src="https://img-blog.csdn.net/20170103232950589" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="526"></img></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><img src="quagga_files/20170103232955827" type="image/png" data-filename="20170103232955827" height="182" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="503"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span>同时，使用 Wireshark 抓包，可以验证报文交换的过程</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"></span><img height="318" src="https://img-blog.csdn.net/20170103233707545?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3RheW5lY2t3aW5kMg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" style="outline:0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="718"></img><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">参考文章：</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">[1] Quagga安装 http://os.51cto.com/art/201410/453623.html</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">[2] OSPF报文格式 鸿鹄论坛</div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">[3] OSPF邻居关系建立过程详解 http://blog.sina.com.cn/s/blog_77f868250101jbcb.html</div>
            </div>
                <span style="display:block;height:0px;visibility:hidden;clear:both;"> </span></div>
				
        	</div>
	
</div></span></div></div></div></div>
</div>
</span>
</div></body></html> 