<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4271"/>

<div><span>
  <div>
<div style="font-size: 16px; display: inline-block; min-width: 100%;position: relative;"><div style="outline:0px;box-sizing:border-box;"><div style="box-sizing:inherit;outline:0px;font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:14px;line-height:1.57143;background-color:rgb(245, 246, 247);color:rgb(51, 51, 51);-webkit-font-smoothing:antialiased;"><div style="outline:0px;box-sizing:border-box;"><span style="box-sizing:inherit;outline:0px;"><div style="box-sizing:inherit;outline:0px;background:rgb(255, 255, 255);box-shadow:rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;"><div style="box-sizing:inherit;outline:0px;"><div style="box-sizing:inherit;outline:0px;word-break:break-all;"><div style="box-sizing:inherit;outline:0px;font-family:-apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun;word-break:break-all;">
                
<h2 style="color:rgb(102,102,102);word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;font-size:24px;box-sizing:border-box;font-weight:normal;line-height:26px;border:0px;font-family:Cutive, serif;vertical-align:baseline;clear:both;">
</h2><h1 style="font-size:28px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:36px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t1" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
<span style="outline:0px;box-sizing:border-box;word-break:break-all;font-weight:normal;font-size:13px;line-height:22px;">本文主要参考 </span><a href="https://github.com/openvswitch/ovs/blob/master/README.md" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;font-weight:normal;font-size:13px;line-height:22px;border:0px;" target="_blank">Overview
 of functionality and components</a><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-weight:normal;font-size:13px;line-height:22px;"> 以及 </span><a href="https://github.com/openvswitch/ovs/blob/master/FAQ.md" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;font-weight:normal;font-size:13px;line-height:22px;border:0px;" target="_blank">Frequently
 Asked Questions</a><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-weight:normal;font-size:13px;line-height:22px;"> 以及结合自己的理解。</span></h1>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-weight:normal;font-size:13px;line-height:22px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-weight:normal;font-size:13px;line-height:22px;">http://sdnhub.cn/index.php/openv-switch-full-guide/<br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></div>
<div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;word-break:break-all;font-weight:normal;font-size:13px;line-height:22px;"><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/></span></div>
<h2 style="font-size:16px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:26px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t2" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
1 什么是OpenvSwitch</h2>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
OpenvSwitch，简称OVS是一个虚拟交换软件，主要用于虚拟机VM环境，作为一个虚拟交换机，支持Xen/XenServer, KVM, and VirtualBox多种虚拟化技术。OpenvSwitch还支持多个物理机的分布式环境。</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
在这种某一台物理机器的虚拟化环境中，一个虚拟交换机（vswitch）主要有如下两个作用：</p>
<ul style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;border:0px;color:rgb(51,51,51);font-family:'Microsoft YaHei', Verdana, sans-serif;font-size:13px;"><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
传递虚拟机VM之间的流量</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
以及实现VM和外界网络的通信。</li></ul><p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
如下图所示：</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<a href="http://sdnhub.cn/wp-content/uploads/2015/05/openvswitch-intro.png" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank"><img src="openvswitch_files/openvswitch-intro.png" type="image/png" data-filename="openvswitch-intro.png" height="265" style="box-sizing:border-box;outline:rgb(7, 130, 193) solid 1px;padding:1px;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;border:0px;clear:both;display:block;" width="504"/></a></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
整个OVS代码用C写的。目前有以下功能：</p>
<ul style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;border:0px;color:rgb(51,51,51);font-family:'Microsoft YaHei', Verdana, sans-serif;font-size:13px;"><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
Standard 802.1Q VLAN model with trunk and access ports</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
NIC bonding with or without LACP on upstream switch</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
NetFlow, sFlow(R), and mirroring for increased visibility</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
QoS (Quality of Service) configuration, plus policing</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
GRE, GRE over IPSEC, VXLAN, and LISP tunneling</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
802.1ag connectivity fault management</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
OpenFlow 1.0 plus numerous extensions</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
Transactional configuration database with C and Python bindings</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
High-performance forwarding using a Linux kernel module</li></ul><h2 style="font-size:16px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:26px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t3" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
2 OpenvSwitch的组成</h2>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
OVS的核心组件包括 ovsdb-server，ovs-vswitchd，ovs kernel module。如下图所示：</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<a href="http://sdnhub.cn/wp-content/uploads/2015/05/openvswitch-main-components.png" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank"><img src="openvswitch_files/openvswitch-main-components-600x352.png" type="image/png" data-filename="openvswitch-main-components-600x352.png" height="351" style="box-sizing:border-box;outline:rgb(7, 130, 193) solid 1px;padding:1px;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;border:0px;clear:both;display:block;" width="600"/></a></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<span style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;">运行原理：</span></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
内核模块实现了多个“数据路径（DataPath）”（类似于网桥），每个都可以有多个“vports”（类似于桥内的端口）。每个数据路径也通过关联流表（flow table）来设置操作，而这些流表中的流都是用户空间在报文头和元数据的基础上映射的关键信息，一般的操作都是将数据包转发到另一个vport。当一个数据包到达一个vport，内核模块所做的处理是提取其流的关键信息并在流表中查找这些关键信息。当有一个匹配的流时它执行对应的操作。如果没有匹配，它会将数据包送到用户空间的处理队列中（作为处理的一部分，用户空间可能会设置一个流用于以后遇到相同类型的数据包可以在内核中执行操作）。细节如下图所示：</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<a href="http://sdnhub.cn/wp-content/uploads/2015/05/openvswitch-details.png" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank"><img src="openvswitch_files/openvswitch-details-600x380.png" type="image/png" data-filename="openvswitch-details-600x380.png" height="379" style="box-sizing:border-box;outline:rgb(7, 130, 193) solid 1px;padding:1px;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;border:0px;clear:both;display:block;" width="600"/></a></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
除了核心组件，还包括一些管理工具，详细介绍如下：</p>
<ul style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;border:0px;color:rgb(51,51,51);font-family:'Microsoft YaHei', Verdana, sans-serif;font-size:13px;"><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-vswitchd：OVS守护进程是OVS的核心部件，实现交换功能，和Linux内核兼容模块一起，实现基于流的交换（flow-based switching）。它和上层 controller 通信遵从 OPENFLOW 协议，它与 ovsdb-server 通信使用 OVSDB 协议，它和内核模块通过netlink通信，它支持多个独立的 datapath（网桥），它通过更改flow table 实现了绑定和VLAN等功能。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovsdb-server：OVS轻量级的数据库服务器，用于整个OVS的配置信息，包括接口，交换内容，VLAN 等等。ovs-vswitchd 根据数据库中的配置信息工作。它于 manager 和 ovs-vswitchd 交换信息使用了OVSDB(JSON-RPC)的方式。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-dpctl：一个工具，用来配置交换机内核模块，可以控制转发规则。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-vsctl：主要是获取或者更改ovs-vswitchd的配置信息，此工具操作的时候会更新ovsdb-server中的数据库。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-appctl：主要是向OVS守护进程发送命令的，一般用不上。 a utility that sends commands to running Open vSwitch daemons (ovs-vswitchd)</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovsdbmonitor：GUI工具来显示ovsdb-server中数据信息。（Ubuntu下是可以使用apt-get安装，可以远程获取OVS数据库和OpenFlow的流表）</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-controller：一个简单的OpenFlow控制器</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-ofctl：用来控制OVS作为OpenFlow交换机工作时候的流表内容。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-pki：OpenFlow交换机创建和管理公钥框架；</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
ovs-tcpundump：tcpdump的补丁，解析OpenFlow的消息；</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
brocompat.ko : Linux bridge compatibility module</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
openvswitch.ko : Open vSwitch switching datapath</li></ul><p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<span style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;">一些用用的OVS命令示例：</span></p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;width:1166px;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-vsctl show</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-vsctl add-br mybridge</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">3</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-vsctl del-br mybridge</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">4</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-vsctl add-port mybridge port-name</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">5</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-vsctl del-port mybridge port-name</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">6</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-vsctl list Bridge/Port/Interface/...</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">7</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-appctl fdb/show mybridge</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">8</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-ofctl show mybridge</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">9</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-ofctl dump-flows mybridge</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">10</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-ofctl add-flow mybridge dl_src=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">02</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span>,dl_dst=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">02</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span>,in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span>,dl_type=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0x0800</span>,nw_src=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">10.0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span>,nw_dst=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">10.0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span>,actions=<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">output:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">6</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">11</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-ofctl del-flows mybridge dl_src=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">02</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:a2</span>,dl_dst=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">02</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:b2</span>,in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span>,dl_type=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0x0800</span>,nw_src=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">10.0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span>,nw_dst=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">10.0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span>.<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">12</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-ofctl add-flow dp<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span>,actions=<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">output:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">6</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">13</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># This will delete all the flow entries in the flow table</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">14</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">sudo ovs-ofctl del-flows mybridge</div></div></li></ol></code></pre>
<h2 style="font-size:16px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:26px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t4" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
3 OpenvSwitch和其他vswitch</h2>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
这里其他的vswitch,包括VMware vNetwork distributed switch以及思科的Cisco Nexus 1000V。</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
VMware vNetwork distributed switch以及思科的Cisco Nexus 1000V这种虚拟交换机提供的是一个集中式的控制方式，。而OVS则是一个独立的vswitch，他运行在每个实现虚拟化的物理机器上，并提供远程管理。</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
OVS提供了两种在虚拟化环境中远程管理的协议：</p>
<ul style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;border:0px;color:rgb(51,51,51);font-family:'Microsoft YaHei', Verdana, sans-serif;font-size:13px;"><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
一个是OpenFlow,通过流表来管理交换机的行为，</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
一个是OVSDB management protocol，用来暴露sietch的port状态。</li></ul><h2 style="font-size:16px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:26px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t5" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
4 概念及工作流程</h2>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t6" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
4.1 vswitch、Bridge、Datapath</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
在网络中，交换机和桥都是同一个概念，OVS实现了一个虚拟机的以太交换机，换句话说，OVS也就是实现了一个以太桥。那么，在OVS中，给一个交换机，或者说一个桥，用了一个专业的名词，叫做DataPath！</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
要了解OVS如何工作，首先需要知道桥的概念:</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
网桥也叫做桥接器，连接两个局域网的设备，网桥工作在数据链路层，将两个LAN连接，根据MAC地址来转发帧，可以看成一个“低层的路由器”（路由器工作在网络层，根据IP地质进行转发）。</p>
<h4 style="font-size:13px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:28px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
网桥的工作原理</h4>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
网桥处理包遵循以下几条规则：</p>
<ul style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;border:0px;color:rgb(51,51,51);font-family:'Microsoft YaHei', Verdana, sans-serif;font-size:13px;"><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
在一个接口上接收到的包不会再往那个接口上发送此包。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
每个接收到的包都要学习其源MAC地址。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
如果数据包是多播或者广播包（通过2层MAC地址确定）则要向接收端口以外的所有端口转发，如果上层协议感兴趣，则还会递交上层处理。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
如果数据包的地址不能再CAM表中找到，则向接收端口以外的其他端口转发。</li><li style="outline:0px;padding:0px;box-sizing:border-box;margin:8px 0px 0px 32px;list-style-type:disc;word-break:break-all;border:0px;list-style:disc;line-height:22px;">
如果CAM表中能找到，则转发给相应端口，如果发送和接收都是统一端口，则不发送。</li></ul><p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<span style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;">注意</span>，网桥是以混杂模式工作的。关于网桥更多，请查阅相关资料。</p>
<h4 style="font-size:13px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:28px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
OVS中的bridge</h4>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
上面，说到，一个桥就是一个交换机。例如，在OVS中:</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ovs-vsctl add-br br0</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ifconfig br0</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">3</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">      br<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span>    Link <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">encap:</span>Ethernet  HWaddr <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">a:</span>09<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">56</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:ea</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:</span>0<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">b:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">49</span>  </div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">4</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">      inet6 <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">addr:</span> fe80::<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1809</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">56</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">ff:</span><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">feea:</span>b49/<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">64</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">Scope:</span>Link</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">5</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">      UP BROADCAST RUNNING MULTICAST  <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">MTU:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1500</span>  <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">Metric:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">6</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">      RX <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">packets:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1584</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">errors:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">dropped:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">overruns:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">frame:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">7</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">      TX <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">packets:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">6</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">errors:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">dropped:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">overruns:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">carrier:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">8</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">      <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">collisions:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">txqueuelen:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0</span> </div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">9</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">      RX <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">bytes:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">316502</span> (<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">316.5</span> KB)  TX <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">bytes:</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">468</span> (<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">468.0</span> B)</div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
当我们创建了一个交换机（网桥）以后，此时网络功能不受影响，但是会产生一个虚拟网卡，名字就是网桥的名称（br-int），之所以会产生一个虚拟网卡，是为了实现接下来的网桥（交换机）功能。有了这个交换机以后，还需要为这个交换机增加端口(port)，一个端口，就是一个物理网卡，当网卡加入到这个交换机之后，其工作方式就和普通交换机的一个端口的工作方式类似了。</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ovs-vsctl add-port br0 port</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
这里要特别注意，网卡加入网桥以后，要按照网桥的工作标准工作，那么加入的一个端口就必须是以混杂模式工作，工作在链路层，处理2层的帧，所以这个port就不需要配置IP了。（你没见过哪个交换的端口有IP的吧）</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
那么接下来你可能会问，通常的交换机不都是有一个管理接口，可以telnet到交换机上进行配置吧，那么在OVS中创建的虚拟交换机有木有这种呢，有的！上面既然创建交换机brname的时候产生了一个虚拟网口 br-int，那么，你给这个虚拟网卡配置了IP以后，就相当于给交换机的管理接口配置了IP，此时一个正常的虚拟交换机就搞定了。</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ip address add 192.168.1.1/24 dev br0</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
最后，我们来看看一个br的具体信息：</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ovs-vsctl show</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">bc12c8d2-<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">6900</span>-<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">42</span>dd-<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">9</span>c1c-<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">30</span>e8ecb99a1b</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">3</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">Bridge <span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">&quot;br0&quot;</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">4</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">    Port <span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">&quot;eth0&quot;</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">5</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">        Interface <span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">&quot;eth0&quot;</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">6</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">    Port <span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">&quot;br0&quot;</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">7</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">        Interface <span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">&quot;br0&quot;</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">8</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">            <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">type:</span> internal</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">9</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">ovs_version:</span> <span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">&quot;1.4.0+build0&quot;</span></div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
首先，这里显示了一个名为br0的桥（交换机），这个交换机有两个接口,一个是eth0，一个是br0，上面说到，创建桥的时候会创建一个和桥名字一样的接口，并自动作为该桥的一个端口，那么这个虚拟接口的作用，一方面是可以作为交换机的管理端口，另一方面也是基于这个虚拟接口，实现了桥的功能。</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
####　OpenvSwitch的典型工作流程</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
这一部分以一个简单的例子，说明在虚拟化环境中OpenvSwitch的典型工作流程。</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
前面已经说到，OVS主要是用来在虚拟化环境中。实现虚拟机之间通信以及一个虚拟机和外网之间通信，如下是一个典型的结构图：</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
那么，通常情况下的工作流程如下：</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<a href="http://sdnhub.cn/wp-content/uploads/2015/05/logical_model.png" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank"><img src="openvswitch_files/logical_model-600x332.png" type="image/png" data-filename="logical_model-600x332.png" height="331" style="box-sizing:border-box;outline:rgb(7, 130, 193) solid 1px;padding:1px;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;border:0px;clear:both;display:block;" width="600"/></a></p>
<ol style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;border:0px;color:rgb(51,51,51);font-family:'Microsoft YaHei', Verdana, sans-serif;font-size:13px;"><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
VM实例 instance 产生一个数据包并发送至实例内的虚拟网络接口 VNIC，图中就是 instance 中的 eth0.</li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
这个数据包会传送到物理机上的VNIC接口，如图就是vnet接口。</li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
数据包从 vnet NIC 出来，到达桥（虚拟交换机） br100 上.</li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
数据包经过交换机的处理，从物理节点上的物理接口发出，如图中物理机上的 eth0 .</li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
数据包从 eth0 出去的时候，是按照物理节点上的路由以及默认网关操作的，这个时候该数据包其实已经不受你的控制了。</li></ol><p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
一般 L2 switch 连接 eth0 的这个口是一个 trunk 口, 因为虚拟机对应的 VNET 往往会设置 VLAN TAG, 可以通过对虚拟机对应的 vnet 打 VALN TAG 来控制虚拟机的网络广播域. 如果跑多个虚拟机的话, 多个虚拟机对应的 vnet 可以设置不同的 vlan tag, 那么这些虚拟机的数据包从 eth0(4)出去的时候, 会带上TAG标记. 这样也就必须是 trunk 口才行.</p>
<h2 style="font-size:16px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:26px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t7" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
6 OVS简单应用实例</h2>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t8" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
6.1 创建物理机到物理机的网络拓扑</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<a href="http://sdnhub.cn/wp-content/uploads/2015/05/example-topo.jpg" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank"><img src="openvswitch_files/example-topo.jpg" type="image/jpeg" data-filename="example-topo.jpg" height="308" style="box-sizing:border-box;outline:rgb(7, 130, 193) solid 1px;padding:1px;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;border:0px;clear:both;display:block;" width="351"/></a></p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ovs-vsctl add-br br0</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ovs-vsctl add-port br0 eth0</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">3</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost<span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">:~</span><span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ovs-vsctl add-port br0 eth1</span></div></div></li></ol></code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t9" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
6.2 创建虚拟机到虚拟机的网络拓扑</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
使用KVM虚拟化。</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<a href="http://sdnhub.cn/wp-content/uploads/2015/05/example-topo2.jpg" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank"><img src="openvswitch_files/example-topo2.jpg" type="image/jpeg" data-filename="example-topo2.jpg" height="244" style="box-sizing:border-box;outline:rgb(7, 130, 193) solid 1px;padding:1px;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;border:0px;clear:both;display:block;" width="329"/></a></p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost:~<span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># ovs-vsctl add-br br0</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost:~<span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># cat /etc/ovs-ifup</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">3</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">#!/bin/sh</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">4</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">5</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">switch=<span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'br0'</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">6</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">/sbin/ifconfig  <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">$1</span> 0.0.0.0 up</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">7</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl add-port <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">${switch}</span> <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">$1</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">8</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"> </div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">9</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost:~<span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># cat /etc/ovs-ifdown</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">10</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">#!/bin/sh</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">11</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">12</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">switch= <span style="outline:0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'br0'</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">13</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl del-port ${sw/sbin/ifconfig  <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">$1</span> 0.0.0.0 down</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">14</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">itch} <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">$1</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">15</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"> </div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">16</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost:~<span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># kvm -m 512 -net nic,macaddr=00:11:22:33:44:55 -net \</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">17</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">tap,script=/etc/ovs-ifup,downscript=/etc/ovs-ifdown-drive \</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">18</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">file=/path/to/disk-image,boot=on</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">19</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">        </div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">20</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">root@localhost:~<span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># kvm -m 512 -net nic,macaddr=11:22:33:44:55:66 -net \     </span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">21</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">tap,script=/etc/ovs-ifup,downscript=/etc/ovs-ifdown-drive \</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">22</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">file=/path/to/disk-image,boot=on</div></div></li></ol></code></pre>
<h2 style="font-size:16px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:26px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t10" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.Misc</h2>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t11" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.1 查表</h3>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">list</span> bridge ovs-br
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t12" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.2 关于 Brdige 及 Port</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
创建 Brdige</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-br ovs-br
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
在 ovs-br 上添加 interface</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-port ovs-br eth0
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
(1) + (2) 的可以合并为：</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs−vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>−br ovs-br -- <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>−port ovs-br eth0
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
删除 Bridge</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">del</span>-br ovs-br <span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;">#如果不存在, 会有error log</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl --<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">if</span>-exists <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">del</span>-br ovs-br</div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
更改 ofport (openflow port number)为100：</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl add-port ovs-br eth0 -- <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">Interface</span> eth0 ofport_request=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">100</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 port 为 internal</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">Interface</span> eth0 <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">type</span>=internal
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t13" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.3 关于Controller</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 Controller</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">ovs-vsctl</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">set-controller</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">ovs-br</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">tcp</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">:1.2.3.4</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">:6633</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 multi controller<br style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;"/>
ovs-vsctl set-controller ovs-br tcp:1.2.3.4:6633 tcp:5.6.7.8:6633</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询 Controller</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">show</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
如果有成功连到 controller 则提示 is_connected:true, 反之未连上：</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">get</span>-controller ovs-br
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
移除 Controller<br style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;"/>
ovs-vsctl del-controller ovs-br</p>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t14" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.4 关于 STP (Spanning Tree Protocol)</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
开启 STP</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> bridge ovs-br stp_enable=<span style="outline:0px;box-sizing:border-box;color:rgb(86, 182, 194);word-break:break-all;">true</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
关闭 STP</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> bridge ovs-br stp_enable=<span style="outline:0px;box-sizing:border-box;color:rgb(86, 182, 194);word-break:break-all;">false</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询 STP 配置信息</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">get</span> bridge ovs-br stp_enable
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 Priority</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs−vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> bridge br0 other_config:stp-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">priority</span>=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0x7800</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 Cost<br style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;"/>
ovs−vsctl set port eth0 other_config:stp-path-cost=10</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
移除 STP 设置</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs−vsctl clear bridge ovs-br other_config
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t15" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.5 关于 Openflow Version</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
支持 OpenFlow Version 1.3</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> bridge ovs-br protocols=OpenFlow13
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
支持 OpenFlow Version 1.3 1.2</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> bridge ovs-br protocols=OpenFlow12,OpenFlow13
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
移除 OpenFlow 支持设置</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl clear bridge ovs-br protocols
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t16" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.6 关于 VLAN</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 VLAN tag</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-port ovs-br vlan3 tag=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">3</span> -- <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">interface</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">vlan3</span> <span style="outline:0px;box-sizing:border-box;color:rgb(97, 174, 238);word-break:break-all;">type</span>=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">internal</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
移除 VLAN</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">del</span>-port ovs-br vlan3
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询 VLAN</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">show</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ifconfig vlan3</div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 Vlan trunk<br style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;"/>
ovs-vsctl add-port ovs-br eth0 trunk=3,4,5,6</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置已 add 的 port 为 access port, vlan id 9</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> port eth0 tag=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">9</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
ovs-ofctl add-flow 设置 vlan 100</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;width:837px;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-ofctl add-flow ovs-br in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span>,dl_vlan=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0xffff</span>,actions=mod_vlan_vid:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">100</span>,output:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">3</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-ofctl add-flow ovs-br in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span>,dl_vlan=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0xffff</span>,actions=push_vlan:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0x8100</span>,set_field:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">100</span>-\&gt;vlan_vid,output:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">3</span></div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
ovs-ofctl add-flow 拿掉 vlan tag</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-ofctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-flow ovs1 in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">3</span>,dl_vlan=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">100</span>,actions=strip_vlan,output:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">two_vlan example</div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
ovs-ofctl add-flow pop-vlan</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-ofctl add-flow ovs-br in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">3</span>,dl_vlan=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">0xffff</span>,actions=pop_vlan,output:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span>
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t17" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.7 关于 GRE Tunnel</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 GRE tunnel</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs−vsctl add−port ovs-br ovs-gre -- <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> <span style="outline:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">interface</span> <span style="outline:0px;box-sizing:border-box;word-break:break-all;color:rgb(230, 192, 123);">ovs</span>-<span style="outline:0px;box-sizing:border-box;word-break:break-all;color:rgb(230, 192, 123);">gre</span> <span style="outline:0px;box-sizing:border-box;word-break:break-all;color:rgb(230, 192, 123);">type</span>=<span style="outline:0px;box-sizing:border-box;word-break:break-all;color:rgb(230, 192, 123);">gre</span> <span style="outline:0px;box-sizing:border-box;word-break:break-all;color:rgb(230, 192, 123);">options</span>:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">remote_ip=1.2.3.4</span></span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询 GRE Tunnel</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">show</span>
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t18" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.8 关于 Dump flows</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Dumps OpenFlow flows 不含 hidden flows (常用)</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-ofctl <span style="outline:0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;">dump</span>-flows ovs-br
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Dumps OpenFlow flows 包含 hidden flows</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-appctl bridge/<span style="outline:0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;">dump</span>-flows ovs-br
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Dump 特定 bridge 的 datapath flows 不論任何 type</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-appctl dpif/<span style="outline:0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;">dump</span>-flows ovs-br
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Dump 在 Linux kernel 裡的 datapath flow table (常用)</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">ovs-dpctl</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">dump-flows</span> <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">[dp]</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Top like behavior for ovs-dpctl dump-flows</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-dpctl-top
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t19" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.9 XenServer 开启 OpenvSwitch 方式</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
检查是否启动openvswitch服务：</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">service openvswitch status
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
启动服务</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">xe-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">switch</span>-network-backend openvswitch
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
关闭服务</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">xe-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">switch</span>-network-backend bridge
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t20" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.10 关于 Log</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询 log level list</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-appctl vlog/<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">list</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 log level (以 stp 设置 file 为 dbg level 为例)</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-appctl vlog/<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> stp:<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">file</span>:dbg</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-appctl vlog/<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> {<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">module</span> <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">name</span>}:{console, syslog, <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">file</span>}:{<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">off</span>, emer, err, warn, info, dbg}</div></div></li></ol></code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t21" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.11 关于 Fallback</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Controller connection: false 的时候, 会自动调成 legacy switch mode</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span>-fail-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">mode</span> ovs-br <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">standalone</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
无论 Controller connection status 为何, 都必须通过 OpenFlow 进行网络行为 (default)</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span>-fail-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">mode</span> ovs-br secure
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
移除</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">del</span>-fail-mode ovs-br
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">get</span>-fail-mode ovs-br
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t22" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.12 关于 sFlow</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">list</span> sflow
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
新增</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">Set</span> sFlow 缺
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
刪除</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;">-- clear Bridge ovs-br sflow</span>
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t23" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.13关于 NetFlow</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">list</span> netflow
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
新增</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">Set</span> NetFlow 缺
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
刪除</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;">-- clear Bridge ovs-br netflow</span>
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t24" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.14 设置 Out-of-band 和 in-band</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">get</span> controller ovs-br connection-mode
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Out-of-band</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> controller ovs-br <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">connection</span>-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">mode</span>=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">out</span>-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">of</span>-band
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
In-band (default)</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> controller ovs-br <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">connection</span>-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">mode</span>=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">in</span>-band
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
移除 hidden flow</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> bridge br0 other-config:<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">disable</span>-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">in</span>-band=<span style="outline:0px;box-sizing:border-box;color:rgb(86, 182, 194);word-break:break-all;">true</span>
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t25" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.15 关于 ssl</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">get</span>-ssl
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span>-ssl sc-privkey.pem sc-cert.pem cacert.pem</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">OpenvSwitch</span> <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">Lab</span> <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">6</span>$ <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">TLS</span> <span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">SSL</span> : http:<span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;">//roan.logdown.com/posts/208707-openvswitch-lab-6-ssl</span></div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
刪除</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">del</span>-ssl
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t26" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.16 关于 SPAN</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
详细设置</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-br ovs-br</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-port ovs-br eth0</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">3</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-port ovs-br eth1</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">4</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-port ovs-br tap0 \</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">5</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     -- --id=@p <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">get</span> port tap0 \</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">6</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     -- --id=@m create mirror name=m0 <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">select</span>-all=<span style="outline:0px;box-sizing:border-box;color:rgb(86, 182, 194);word-break:break-all;">true</span> output-port=@p \</div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">7</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     -- <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> bridge ovs-br mirrors=@m</div></div></li></ol></code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
将 ovs-br 上 add-port {eth0,eth1} mirror 至 tap0</p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
刪除</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl clear bridge ovs-br mirrors <span style="outline:0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"># 關於 Table</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查 table ovs-ofctl dump-tables ovs-br</p>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t27" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.17 关于 Group Table</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
参考 <a href="http://hwchiu.logdown.com/posts/207387-multipath-routing-with-group-table-at-mininet" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">hwchiu – Multipath routing with Group table at mininet</a></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
建立 Group id 及对应的 bucket</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-ofctl -O OpenFlow13 add-group ovs-br group_id=5566,type=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">select</span>,bucket=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">output</span>:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span>,bucket=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">output</span>:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span>,bucket=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">output</span>:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">3</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
type 共有 All, Select, Indirect, FastFailover, 详细规格：<a href="http://flowgrammable.org/sdn/openflow/message-layer/groupmod/#GroupMod_1.3" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://flowgrammable.org/sdn/openflow/message-layer/groupmod/#GroupMod_1.3</a></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
使用 Group Table</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-ofctl -O OpenFlow13 <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-flow ovs-br in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">4</span>,actions=<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">group</span>:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">5566</span>
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t28" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.18 关于 VXLAN</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
参考 <a href="http://rascov.logdown.com/posts/230635-bridge-remote-networks-using-vxlan" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">rascov – Bridge Remote Mininets using VXLAN</a></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
建立 VXLAN Network ID (VNI) 和指定的 OpenFlow port number, eg: VNI=5566, OF_PORT=9</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">interface</span> vxlan <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">type</span>=vxlan <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">option</span>:remote_ip=x.x.x.x <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">option</span>:<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">key</span>=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">5566</span> ofport_request=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">9</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
VNI flow by flow</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-vsctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">set</span> <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">interface</span> vxlan <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">type</span>=vxlan <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">option</span>:remote_ip=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">140.113</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">.215</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">.200</span> <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">option</span>:<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">key</span>=flow ofport_request=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">9</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
设置 VXLAN tunnel id</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><ol style="outline:0px;list-style:none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;"><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-ofctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-flow ovs-br in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span>,actions=set_field:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">5566</span>-&gt;tun_id,output:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span></div></div></li><li style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">ovs-ofctl <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">add</span>-flow s1 in_port=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">2</span>,tun_id=<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">5566</span>,actions=output:<span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">1</span></div></div></li></ol></code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t29" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.19 关于 OVSDB Manager</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
参考 <a href="https://wiki.opendaylight.org/view/OVSDB_Integration:Mininet_OVSDB_Tutorial" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">OVSDB Integration:Mininet OVSDB Tutorial</a></p>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Active Listener 设置</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">ovs-vsctl</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">set-manager</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">tcp</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">:1.2.3.4</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">:6640</span>
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Passive Listener 设置</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;"><span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">ovs-vsctl</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">set-manager</span> <span style="outline:0px;box-sizing:border-box;color:rgb(224, 108, 117);word-break:break-all;">ptcp</span><span style="outline:0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">:6640</span>
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t30" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.20 OpenFlow Trace</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
Generate pakcet trace</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-appctl ofproto/trace ovs-br in_port=1,dl_src=00:00:00:00:00:01,dl_dst=00:00:00:00:00:02 -generate
</code></pre>
<h3 style="font-size:22px;word-break:break-all;outline:0px;padding:0px;margin:8px 0px 16px;box-sizing:border-box;color:rgb(51,51,51);font-weight:700;line-height:30px;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;"><a name="t31" style="outline:0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>
7.21 其它</h3>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询 OpenvSwitch 版本</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovs-ofctl -V
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
查询指令历史记录</p>
<pre style="overflow-x:auto;word-break:break-all;outline:0px;padding:8px;margin:0px 0px 24px;position:relative;white-space:pre-wrap;word-wrap:break-word;box-sizing:border-box;font-family:Consolas, 'Liberation Mono', Courier, monospace;font-size:13px;line-height:19px;color:rgb(51,51,51);border:1px solid rgb(204,204,204);overflow:auto;background-color:rgb(248,248,248);"><code style="overflow-x:auto;word-break:break-all;outline:0px;border-radius:4px;display:block;font-size:12px;line-height:22px;box-sizing:border-box;white-space:pre;word-wrap:normal;padding:8px;font-family:Consolas, 'Liberation Mono', Courier, monospace;color:rgb(171, 178, 191);background:transparent;border:none;">ovsdb-tool <span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">show</span>-<span style="outline:0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">log</span> [-mmm]
</code></pre>
<p style="color:rgb(51,51,51);word-break:break-all;outline:0px;padding:0px;margin:0px 0px 16px;font-size:13px;box-sizing:border-box;font-weight:400;line-height:22px;text-align:justify;border:0px;font-family:'Microsoft YaHei', Verdana, sans-serif;">
<span style="outline:0px;box-sizing:border-box;word-break:break-all;border:0px;">[参考]</span></p>
<ol style="outline:0px;list-style:none;box-sizing:border-box;padding:0px;margin:0px 0px 24px;word-break:break-all;border:0px;color:rgb(51,51,51);font-family:'Microsoft YaHei', Verdana, sans-serif;font-size:13px;"><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://git.openvswitch.org/cgi-bin/gitweb.cgi?p=openvswitch;a=blob_plain;f=FAQ;hb=HEAD" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://git.openvswitch.org/cgi-bin/gitweb.cgi?p=openvswitch;a=blob_plain;f=FAQ;hb=HEAD</a></li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://git.openvswitch.org/cgi-bin/gitweb.cgi?p=openvswitch;a=blob_plain;f=README;hb=HEAD" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://git.openvswitch.org/cgi-bin/gitweb.cgi?p=openvswitch;a=blob_plain;f=README;hb=HEAD</a></li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://openvswitch.org/support/config-cookbooks/vlan-configuration-cookbook/" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://openvswitch.org/support/config-cookbooks/vlan-configuration-cookbook/</a></li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://roan.logdown.com/posts/191801-set-openvswitch" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://roan.logdown.com/posts/191801-set-openvswitch</a></li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://roan.logdown.com/posts/208707-openvswitch-lab-6-ssl" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://roan.logdown.com/posts/208707-openvswitch-lab-6-ssl</a></li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://flowgrammable.org/sdn/openflow/message-layer/groupmod/#GroupMod_1.3" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://flowgrammable.org/sdn/openflow/message-layer/groupmod/#GroupMod_1.3</a></li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://www.areteix.net/blog/2013/08/network-flow-monitoring-with-open-vswitch/" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://www.areteix.net/blog/2013/08/network-flow-monitoring-with-open-vswitch/</a></li><li style="list-style-type:decimal;word-break:break-all;outline:0px;padding:0px;margin:0px;box-sizing:border-box;margin-left:40px;margin-top:8px;border:0px;list-style:decimal;line-height:22px;">
<a href="http://blog.scottlowe.org/2014/11/21/removing-ovs-configuration-settings/" rel="nofollow" style="word-break:break-all;color:rgb(0,136,221);outline:0px;box-sizing:border-box;text-decoration:none;cursor:pointer;border:0px;" target="_blank">http://blog.scottlowe.org/2014/11/21/removing-ovs-configuration-settings/</a></li></ol><br style="outline:0px;box-sizing:border-box;word-break:break-all;"/>            </div></div></div></div></span></div></div></div></div>
</div>
</span>
</div></body></html> 