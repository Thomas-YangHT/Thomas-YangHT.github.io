<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307027 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3652"/>

<div>
<span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="outline:currentcolor none 0px;box-sizing:border-box;"><div style="box-sizing:inherit;outline:currentcolor none 0px;font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:14px;line-height:1.57143;background-color:rgb(245, 246, 247);color:rgb(51, 51, 51);"><div style="outline:currentcolor none 0px;box-sizing:border-box;"><span style="box-sizing:inherit;outline:currentcolor none 0px;"><div style="box-sizing:inherit;outline:currentcolor none 0px;background:rgb(255, 255, 255) none repeat scroll 0% 0%;box-shadow:rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;">
	<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;border-bottom:1px solid rgb(224, 224, 224);padding-top:24px;z-index:9;background-color:rgb(255, 255, 255);">
		<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;">
			<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-bottom:16px;">
				<span style="box-sizing:inherit;outline:currentcolor none 0px;display:inline-block;width:26px;height:26px;line-height:26px;text-align:center;font-size:12px;border-radius:50%;color:rgb(202, 12, 22);border:1px solid rgb(244, 206, 208);margin-top:4px;margin-right:8px;float:left;">原</span>				<h1 style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;font-size:24px;word-break:break-all;">docker创建ceph集群</h1>
			</div>
			<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;padding-bottom:14px;">
				<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;color:rgb(133, 133, 133);display:flex;">
																				<span style="box-sizing:inherit;outline:currentcolor none 0px;margin-right:14px;">2017年08月17日 07:44:24</span>
					<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-left:auto;float:right;">
						<span style="box-sizing:inherit;outline:currentcolor none 0px;margin-right:14px;">阅读数：1694</span>
																	</div>
				</div>
			</div>
			
		</div>
	</div>
	<div style="box-sizing:inherit;outline:currentcolor none 0px;display:block;position:relative;padding-top:16px;">
		<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;word-break:break-all;">
                    <div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;font-family:-apple-system, SF UI Text, Arial, PingFang SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, sans-serif, SimHei, SimSun;word-break:break-all;">
                <h2 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t0" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>背景</h2>

<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">　　Ceph官方现在提供两类镜像来创建集群，一种是常规的，每一种Ceph组件是单独的一个镜像，如ceph/daemon、ceph/radosgw、ceph/mon、ceph/osd等；另外一种是最新的方式，所有的Ceph组件都集成在一个镜像ceph/daemon中，如果要创建对应的Ceph组件容器，只需要指定类型即可。这里，我们使用第一种方式来创建Ceph集群。  <br style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"/>
　　另外，这里所有的容器，都是在同一个Docker host上创建的。  </p>



<h2 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t1" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>重新开始</h2>

<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">　　在搭建过程中，如果遇到了任何问题，想删除之前的环境，并重新开始搭建时，可以运行如下命令：  </p>



<pre style="outline:currentcolor none 0px;position:relative;overflow:auto hidden;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;padding:8px 16px 4px 56px;margin:0px 0px 24px;background-color:rgb(246, 248, 250);border:medium none;"><code style="outline:currentcolor none 0px;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;display:block;padding:0px;color:rgb(0, 0, 0);font-size:14px;line-height:22px;background-color:rgb(246, 248, 250);border-radius:4px;overflow-x:auto;white-space:pre;overflow-wrap:normal;word-break:break-all;">#  rm -rf /etc/ceph /<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 0, 136);word-break:break-all;">var</span>/lib/ceph/  <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 136, 0);word-break:break-all;">/opt/</span>osd/; mkdir -p /etc/ceph /<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 0, 136);word-break:break-all;">var</span>/lib/ceph/osd /opt/osd/;chown -R <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">64045</span>:<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">64045</span> /<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 0, 136);word-break:break-all;">var</span>/lib/ceph/osd/;chown -R <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">64045</span>:<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">64045</span> /opt/osd/; docker rm -f $(docker ps -a | grep <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">&quot;ceph&quot;</span> | awk <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">'{print $1}'</span>);</code><ul style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;padding:8px 0px;margin:0px;list-style:outside none none;position:absolute;width:48px;background-color:rgb(238, 240, 244);top:0px;left:0px;text-align:right;"><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">1</li></ul></pre>

<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">　　这里，分别删除了ceph配置、osd目录。并重新创建目录并更改所属用户(<strong style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;">这一步非常重要</strong>)，再删除所有有ceph关键字的容器。  </p>



<h2 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t2" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>搭建集群</h2>



<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t3" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>创建monitor节点</h3>

<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">　　这里，假设monitor节点的ip为192.168.1.111。  </p>



<pre style="outline:currentcolor none 0px;position:relative;overflow:auto hidden;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;padding:8px 16px 4px 56px;margin:0px 0px 24px;background-color:rgb(246, 248, 250);border:medium none;"><code style="outline:currentcolor none 0px;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;display:block;padding:0px;color:rgb(0, 0, 0);font-size:14px;line-height:22px;background-color:rgb(246, 248, 250);border-radius:4px;overflow-x:auto;white-space:pre;overflow-wrap:normal;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">#</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">docker</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">run</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">itd</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">name</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">mymon</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">network</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">my</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">bridge</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ip</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">111</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_NAME=mymon</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_IP=192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">111</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/etc/ceph:/etc/ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ceph/mon</span></code><ul style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;padding:8px 0px;margin:0px;list-style:outside none none;position:absolute;width:48px;background-color:rgb(238, 240, 244);top:0px;left:0px;text-align:right;"><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">1</li></ul></pre>



<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t4" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>在monitor节点上标识osd</h3>



<pre style="outline:currentcolor none 0px;position:relative;overflow:auto hidden;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;padding:8px 16px 4px 56px;margin:0px 0px 24px;background-color:rgb(246, 248, 250);border:medium none;"><code style="outline:currentcolor none 0px;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;display:block;padding:0px;color:rgb(0, 0, 0);font-size:14px;line-height:22px;background-color:rgb(246, 248, 250);border-radius:4px;overflow-x:auto;white-space:pre;overflow-wrap:normal;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;"># docker exec mymon ceph osd create</span>
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">0</span>
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;"># docker exec mymon ceph osd create</span>
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">1</span>
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;"># docker exec mymon ceph osd create</span>
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">2</span></code><ul style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;padding:8px 0px;margin:0px;list-style:outside none none;position:absolute;width:48px;background-color:rgb(238, 240, 244);top:0px;left:0px;text-align:right;"><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">1</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">2</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">3</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">4</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">5</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">6</li></ul></pre>



<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t5" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>创建osd节点</h3>



<pre style="outline:currentcolor none 0px;position:relative;overflow:auto hidden;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;padding:8px 16px 4px 56px;margin:0px 0px 24px;background-color:rgb(246, 248, 250);border:medium none;"><code style="outline:currentcolor none 0px;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;display:block;padding:0px;color:rgb(0, 0, 0);font-size:14px;line-height:22px;background-color:rgb(246, 248, 250);border-radius:4px;overflow-x:auto;white-space:pre;overflow-wrap:normal;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">#</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">docker</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">run</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">itd</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">name</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">osd0</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">network</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">my</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">bridge</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">CLUSTER=ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">WEIGHT=1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">0</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_NAME=mymon</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_IP=192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">111</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/etc/ceph:/etc/ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/opt/osd/0:/var/lib/ceph/osd/ceph</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">0</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ceph/osd</span> 
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">#</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">docker</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">run</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">itd</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">name</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">osd1</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">network</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">my</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">bridge</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">CLUSTER=ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">WEIGHT=1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">0</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_NAME=mymon</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_IP=192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">111</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/etc/ceph:/etc/ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/opt/osd/1:/var/lib/ceph/osd/ceph</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ceph/osd</span> 
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">#</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">docker</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">run</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">itd</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">name</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">osd2</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">network</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">my</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">bridge</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">CLUSTER=ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">WEIGHT=1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">0</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_NAME=mymon</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_IP=192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">111</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/etc/ceph:/etc/ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/opt/osd/2:/var/lib/ceph/osd/ceph</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">2</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ceph/osd</span> </code><ul style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;padding:8px 0px;margin:0px;list-style:outside none none;position:absolute;width:48px;background-color:rgb(238, 240, 244);top:0px;left:0px;text-align:right;"><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">1</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">2</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">3</li></ul></pre>



<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t6" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>再创建两个monitor节点组成集群</h3>



<pre style="outline:currentcolor none 0px;position:relative;overflow:auto hidden;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;padding:8px 16px 4px 56px;margin:0px 0px 24px;background-color:rgb(246, 248, 250);border:medium none;"><code style="outline:currentcolor none 0px;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;display:block;padding:0px;color:rgb(0, 0, 0);font-size:14px;line-height:22px;background-color:rgb(246, 248, 250);border-radius:4px;overflow-x:auto;white-space:pre;overflow-wrap:normal;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">#</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">docker</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">run</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">itd</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">name</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">mymon_1</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">network</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">my</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">bridge</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ip</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">112</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_NAME=mymon_1</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_IP=192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">112</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/etc/ceph:/etc/ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ceph/mon</span>
<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">#</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">docker</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">run</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">itd</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">name</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">mymon_2</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">network</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">my</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">bridge</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ip</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">113</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_NAME=mymon_2</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">MON_IP=192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">113</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/etc/ceph:/etc/ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ceph/mon</span></code><ul style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;padding:8px 0px;margin:0px;list-style:outside none none;position:absolute;width:48px;background-color:rgb(238, 240, 244);top:0px;left:0px;text-align:right;"><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">1</li><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">2</li></ul></pre>



<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t7" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>创建Ceph网关节点</h3>



<pre style="outline:currentcolor none 0px;position:relative;overflow:auto hidden;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;padding:8px 16px 4px 56px;margin:0px 0px 24px;background-color:rgb(246, 248, 250);border:medium none;"><code style="outline:currentcolor none 0px;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;display:block;padding:0px;color:rgb(0, 0, 0);font-size:14px;line-height:22px;background-color:rgb(246, 248, 250);border-radius:4px;overflow-x:auto;white-space:pre;overflow-wrap:normal;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">#</span>  <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">docker</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">run</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">itd</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">name</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">myrgw</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">network</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">my</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">bridge</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ip</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">192</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">168</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">1</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;">.</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">100</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">p</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">9080:80</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">e</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">RGW_NAME=myrgw</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 102, 102);word-break:break-all;">-</span><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">v</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">/etc/ceph:/etc/ceph</span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(136, 0, 0);word-break:break-all;">ceph/radosgw</span></code><ul style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;padding:8px 0px;margin:0px;list-style:outside none none;position:absolute;width:48px;background-color:rgb(238, 240, 244);top:0px;left:0px;text-align:right;"><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">1</li></ul></pre>



<h2 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t8" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>验证</h2>

<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">　　执行ceph命令来查看ceph集群状态。  </p>



<pre style="outline:currentcolor none 0px;position:relative;overflow:auto hidden;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;padding:8px 16px 4px 56px;margin:0px 0px 24px;background-color:rgb(246, 248, 250);border:medium none;"><code style="outline:currentcolor none 0px;box-sizing:border-box;font-family:Consolas, Inconsolata, Courier, monospace;display:block;padding:0px;color:rgb(0, 0, 0);font-size:14px;line-height:22px;background-color:rgb(246, 248, 250);border-radius:4px;overflow-x:auto;white-space:pre;overflow-wrap:normal;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(0, 153, 0);word-break:break-all;"># docker exec mymon ceph -s</span></code><ul style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;padding:8px 0px;margin:0px;list-style:outside none none;position:absolute;width:48px;background-color:rgb(238, 240, 244);top:0px;left:0px;text-align:right;"><li style="outline:currentcolor none 0px;box-sizing:border-box;list-style-type:disc;word-break:break-all;padding:0px 8px;margin:0px;list-style:outside none none;color:rgb(153, 153, 153);">1</li></ul></pre>



<h2 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:24px;color:rgb(79, 79, 79);font-weight:700;line-height:32px;word-break:break-all;"><a name="t9" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>缺点</h2>

<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">　　这种搭建方法，所有容器共享了/etc/ceph中的配置，因此，仅限于在一个Docker host中搭建集群。在最新的Ceph镜像ceph/daemon中，提供了一种共享kv存储etcd的实现方式，可以实现多host情况下的Ceph集群搭建，适用于swarm、k8s或者Marathon的环境下搭建Ceph，有兴趣的朋友可以试一试。</p>            </div>
            
                <span style="display:block;height:0px;visibility:hidden;clear:both;"></span></div>
				
        	</div>
	
		<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;padding-bottom:16px;margin-top:16px;border-bottom:1px solid rgb(227, 227, 227);position:relative;height:55px;overflow:hidden;">
				<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;font-size:12px;color:rgb(153, 153, 153);">
			版权声明：文章欢迎转载，但请注明出处。			https://blog.csdn.net/styshoo/article/details/77284916		</div>
						<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-bottom:8px;font-size:12px;margin-top:8px;">
			<span style="box-sizing:inherit;outline:currentcolor none 0px;color:rgb(77, 77, 77);">文章标签：</span>
						<a href="http://so.csdn.net/so/search/s.do?q=CEPH&amp;t=blog" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;word-break:break-all;margin-right:8px;padding:0px 8px;height:24px;min-width:24px;line-height:24px;border:1px solid rgb(204, 204, 204);border-radius:100px;color:rgb(77, 77, 77);text-align:center;" target="_blank">CEPH						</a><a href="http://so.csdn.net/so/search/s.do?q=Docker&amp;t=blog" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;word-break:break-all;margin-right:8px;padding:0px 8px;height:24px;min-width:24px;line-height:24px;border:1px solid rgb(204, 204, 204);border-radius:100px;color:rgb(77, 77, 77);text-align:center;" target="_blank">Docker						</a><a href="http://so.csdn.net/so/search/s.do?q=RGW&amp;t=blog" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;word-break:break-all;margin-right:8px;padding:0px 8px;height:24px;min-width:24px;line-height:24px;border:1px solid rgb(204, 204, 204);border-radius:100px;color:rgb(77, 77, 77);text-align:center;" target="_blank">RGW						</a><a href="http://so.csdn.net/so/search/s.do?q=K8S&amp;t=blog" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;word-break:break-all;margin-right:8px;padding:0px 8px;height:24px;min-width:24px;line-height:24px;border:1px solid rgb(204, 204, 204);border-radius:100px;color:rgb(77, 77, 77);text-align:center;" target="_blank">K8S						</a><a href="http://so.csdn.net/so/search/s.do?q=kubernetes&amp;t=blog" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;word-break:break-all;margin-right:8px;padding:0px 8px;height:24px;min-width:24px;line-height:24px;border:1px solid rgb(204, 204, 204);border-radius:100px;color:rgb(77, 77, 77);text-align:center;" target="_blank">kubernetes						</a>
		</div>
						<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-bottom:8px;font-size:12px;">
			<span style="box-sizing:inherit;outline:currentcolor none 0px;color:rgb(77, 77, 77);">个人分类：</span>
						<a href="https://blog.csdn.net/styshoo/article/category/6116363" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">docker						</a><a href="https://blog.csdn.net/styshoo/article/category/6117965" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">ceph						</a>
		</div>
						<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-bottom:8px;font-size:12px;">
			<span style="box-sizing:inherit;outline:currentcolor none 0px;color:rgb(77, 77, 77);">所属专栏：</span>
						<a href="https://blog.csdn.net/column/details/14654.html" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">Docker点滴</a>
						<a href="https://blog.csdn.net/column/details/14778.html" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">Ceph点滴</a>
						
		</div>
			<div style="box-sizing:inherit;outline:currentcolor none 0px;margin:0px;position:absolute;font-size:12px;color:rgb(51, 153, 234);letter-spacing:0px;line-height:20px;cursor:pointer;padding:4px 4px 4px 16px;background-color:rgb(255, 255, 255);left:362px;width:auto;top:25px;">▼查看关于本篇文章更多信息</div></div>
	</div></span></div></div></div></div><br/></div></span>
</div></body></html> 