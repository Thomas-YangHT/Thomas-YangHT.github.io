<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Linux bridge: High availability using VRRP</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://docs.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://ask.openstack.org/">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Linux bridge: High availability using VRRP</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="deploy-lb-selfservice.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Linux bridge: Self-service networks"></i></a>
    
    
    <a href="deploy-ovs.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Open vSwitch mechanism driver"></i></a>
    
    <a id="logABugLink1" href="deploy-lb-ha-vrrp.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2018-02-08 07:39</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#">Linux bridge: High availability using VRRP</a><ul>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#architecture">Architecture</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#example-configuration">Example configuration</a><ul>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#controller-node">Controller node</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#network-node-1">Network node 1</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#network-node-2">Network node 2</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#compute-nodes">Compute nodes</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#verify-service-operation">Verify service operation</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#create-initial-networks">Create initial networks</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#verify-network-operation">Verify network operation</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#verify-failover-operation">Verify failover operation</a></li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#keepalived-vrrp-health-check">Keepalived VRRP health check</a></li>
</ul>
</li>
<li><a class="reference internal" href="deploy-lb-ha-vrrp.html#network-traffic-flow">Network traffic flow</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="linux-bridge-high-availability-using-vrrp">
<span id="deploy-lb-ha-vrrp"></span><h1>Linux bridge: High availability using VRRP<a class="headerlink" href="deploy-lb-ha-vrrp.html#linux-bridge-high-availability-using-vrrp" title="Permalink to this headline">¶</a></h1>
<p>This architecture example augments the self-service deployment example
with a high-availability mechanism using the Virtual Router Redundancy
Protocol (VRRP) via <code class="docutils literal"><span class="pre">keepalived</span></code> and provides failover of routing
for self-service networks. It requires a minimum of two network nodes
because VRRP creates one master (active) instance and at least one backup
instance of each router.</p>
<p>During normal operation, <code class="docutils literal"><span class="pre">keepalived</span></code> on the master router periodically
transmits <em>heartbeat</em> packets over a hidden network that connects all VRRP
routers for a particular project. Each project with VRRP routers uses a
separate hidden network. By default this network uses the first value in
the <code class="docutils literal"><span class="pre">tenant_network_types</span></code> option in the <code class="docutils literal"><span class="pre">ml2_conf.ini</span></code> file. For
additional control, you can specify the self-service network type and physical
network name for the hidden network using the <code class="docutils literal"><span class="pre">l3_ha_network_type</span></code> and
<code class="docutils literal"><span class="pre">l3_ha_network_name</span></code> options in the <code class="docutils literal"><span class="pre">neutron.conf</span></code> file.</p>
<p>If <code class="docutils literal"><span class="pre">keepalived</span></code> on the backup router stops receiving <em>heartbeat</em> packets,
it assumes failure of the master router and promotes the backup router to
master router by configuring IP addresses on the interfaces in the
<code class="docutils literal"><span class="pre">qrouter</span></code> namespace. In environments with more than one backup router,
<code class="docutils literal"><span class="pre">keepalived</span></code> on the backup router with the next highest priority promotes
that backup router to master router.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This high-availability mechanism configures VRRP using the same priority
for all routers. Therefore, VRRP promotes the backup router with the
highest IP address to the master router.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There is a known bug with <code class="docutils literal"><span class="pre">keepalived</span></code> v1.2.15 and earlier which can
cause packet loss when <code class="docutils literal"><span class="pre">max_l3_agents_per_router</span></code> is set to 3 or more.
Therefore, we recommend that you upgrade to <code class="docutils literal"><span class="pre">keepalived</span></code> v1.2.16
or greater when using this feature.</p>
</div>
<p>Interruption of VRRP <em>heartbeat</em> traffic between network nodes, typically
due to a network interface or physical network infrastructure failure,
triggers a failover. Restarting the layer-3 agent, or failure of it, does
not trigger a failover providing <code class="docutils literal"><span class="pre">keepalived</span></code> continues to operate.</p>
<p>Consider the following attributes of this high-availability mechanism to
determine practicality in your environment:</p>
<ul class="simple">
<li>Instance network traffic on self-service networks using a particular
router only traverses the master instance of that router. Thus,
resource limitations of a particular network node can impact all
master instances of routers on that network node without triggering
failover to another network node. However, you can configure the
scheduler to distribute the master instance of each router uniformly
across a pool of network nodes to reduce the chance of resource
contention on any particular network node.</li>
<li>Only supports self-service networks using a router. Provider networks
operate at layer-2 and rely on physical network infrastructure for
redundancy.</li>
<li>For instances with a floating IPv4 address, maintains state of network
connections during failover as a side effect of 1:1 static NAT. The
mechanism does not actually implement connection tracking.</li>
</ul>
<p>For production deployments, we recommend at least three network nodes
with sufficient resources to handle network traffic for the entire
environment if one network node fails. Also, the remaining two nodes
can continue to provide redundancy.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This high-availability mechanism is not compatible with the layer-2
population mechanism. You must disable layer-2 population in the
<code class="docutils literal"><span class="pre">linuxbridge_agent.ini</span></code> file and restart the Linux bridge agent
on all existing network and compute nodes prior to deploying the example
configuration.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="deploy-lb-ha-vrrp.html#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Add one network node with the following components:</p>
<ul class="simple">
<li>Three network interfaces: management, provider, and overlay.</li>
<li>OpenStack Networking layer-2 agent, layer-3 agent, and any
dependencies.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can keep the DHCP and metadata agents on each compute node or
move them to the network nodes.</p>
</div>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="deploy-lb-ha-vrrp.html#architecture" title="Permalink to this headline">¶</a></h2>
<img alt="High-availability using Linux bridge with VRRP - overview" src="_images/deploy-lb-ha-vrrp-overview.png" />
<p>The following figure shows components and connectivity for one self-service
network and one untagged (flat) network. The master router resides on network
node 1. In this particular case, the instance resides on the same compute
node as the DHCP agent for the network. If the DHCP agent resides on another
compute node, the latter only contains a DHCP namespace and Linux bridge
with a port on the overlay physical network interface.</p>
<img alt="High-availability using Linux bridge with VRRP - components and connectivity - one network" src="_images/deploy-lb-ha-vrrp-compconn1.png" />
</div>
<div class="section" id="example-configuration">
<h2>Example configuration<a class="headerlink" href="deploy-lb-ha-vrrp.html#example-configuration" title="Permalink to this headline">¶</a></h2>
<p>Use the following example configuration as a template to add support for
high-availability using VRRP to an existing operational environment that
supports self-service networks.</p>
<div class="section" id="controller-node">
<h3>Controller node<a class="headerlink" href="deploy-lb-ha-vrrp.html#controller-node" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">In the <code class="docutils literal"><span class="pre">neutron.conf</span></code> file:</p>
<ul>
<li><p class="first">Enable VRRP.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[DEFAULT]</span>
<span class="na">l3_ha</span> <span class="o">=</span> <span class="s">True</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Restart the following services:</p>
<ul class="simple">
<li>Server</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="network-node-1">
<h3>Network node 1<a class="headerlink" href="deploy-lb-ha-vrrp.html#network-node-1" title="Permalink to this headline">¶</a></h3>
<p>No changes.</p>
</div>
<div class="section" id="network-node-2">
<h3>Network node 2<a class="headerlink" href="deploy-lb-ha-vrrp.html#network-node-2" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Install the Networking service Linux bridge layer-2 agent and layer-3
agent.</p>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">neutron.conf</span></code> file, configure common options:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[DEFAULT]</span>
<span class="na">core_plugin</span> <span class="o">=</span> <span class="s">ml2</span>
<span class="na">auth_strategy</span> <span class="o">=</span> <span class="s">keystone</span>

<span class="k">[database]</span>
<span class="c1"># ...</span>

<span class="k">[keystone_authtoken]</span>
<span class="c1"># ...</span>

<span class="k">[nova]</span>
<span class="c1"># ...</span>

<span class="k">[agent]</span>
<span class="c1"># ...</span>
</pre></div>
</div>
<p>See the <a class="reference external" href="https://docs.openstack.org">Installation Tutorials and Guides</a> and
<a class="reference external" href="https://docs.openstack.org">Configuration Reference</a> for your OpenStack
release to obtain the appropriate additional configuration for the
<code class="docutils literal"><span class="pre">[DEFAULT]</span></code>, <code class="docutils literal"><span class="pre">[database]</span></code>, <code class="docutils literal"><span class="pre">[keystone_authtoken]</span></code>, <code class="docutils literal"><span class="pre">[nova]</span></code>, and
<code class="docutils literal"><span class="pre">[agent]</span></code> sections.</p>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">linuxbridge_agent.ini</span></code> file, configure the layer-2 agent.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[linux_bridge]</span>
<span class="na">physical_interface_mappings</span> <span class="o">=</span> <span class="s">provider:PROVIDER_INTERFACE</span>

<span class="k">[vxlan]</span>
<span class="na">enable_vxlan</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">local_ip</span> <span class="o">=</span> <span class="s">OVERLAY_INTERFACE_IP_ADDRESS</span>

<span class="k">[securitygroup]</span>
<span class="na">firewall_driver</span> <span class="o">=</span> <span class="s">iptables</span>
</pre></div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">PROVIDER_INTERFACE</span></code> with the name of the underlying interface
that handles provider networks. For example, <code class="docutils literal"><span class="pre">eth1</span></code>.</p>
<p>Replace <code class="docutils literal"><span class="pre">OVERLAY_INTERFACE_IP_ADDRESS</span></code> with the IP address of the
interface that handles VXLAN overlays for self-service networks.</p>
</li>
<li><p class="first">In the <code class="docutils literal"><span class="pre">l3_agent.ini</span></code> file, configure the layer-3 agent.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[DEFAULT]</span>
<span class="na">interface_driver</span> <span class="o">=</span> <span class="s">linuxbridge</span>
<span class="na">external_network_bridge</span> <span class="o">=</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">external_network_bridge</span></code> option intentionally contains
no value.</p>
</div>
</li>
<li><p class="first">Start the following services:</p>
<ul class="simple">
<li>Linux bridge agent</li>
<li>Layer-3 agent</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="compute-nodes">
<h3>Compute nodes<a class="headerlink" href="deploy-lb-ha-vrrp.html#compute-nodes" title="Permalink to this headline">¶</a></h3>
<p>No changes.</p>
</div>
<div class="section" id="verify-service-operation">
<h3>Verify service operation<a class="headerlink" href="deploy-lb-ha-vrrp.html#verify-service-operation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Source the administrative project credentials.</p>
</li>
<li><p class="first">Verify presence and operation of the agents.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack network agent list
<span class="go">+--------------------------------------+--------------------+----------+-------------------+-------+-------+---------------------------+</span>
<span class="go">| ID                                   | Agent Type         | Host     | Availability Zone | Alive | State | Binary                    |</span>
<span class="go">+--------------------------------------+--------------------+----------+-------------------+-------+-------+---------------------------+</span>
<span class="go">| 09de6af6-c5f1-4548-8b09-18801f068c57 | Linux bridge agent | compute2 |                   | True  | UP    | neutron-linuxbridge-agent |</span>
<span class="go">| 188945d1-9e70-4803-a276-df924e0788a4 | Linux bridge agent | compute1 |                   | True  | UP    | neutron-linuxbridge-agent |</span>
<span class="go">| e76c440d-d5f6-4316-a674-d689630b629e | DHCP agent         | compute1 | nova              | True  | UP    | neutron-dhcp-agent        |</span>
<span class="go">| e67367de-6657-11e6-86a4-931cd04404bb | DHCP agent         | compute2 | nova              | True  | UP    | neutron-dhcp-agent        |</span>
<span class="go">| e8174cae-6657-11e6-89f0-534ac6d0cb5c | Metadata agent     | compute1 |                   | True  | UP    | neutron-metadata-agent    |</span>
<span class="go">| ece49ec6-6657-11e6-bafb-c7560f19197d | Metadata agent     | compute2 |                   | True  | UP    | neutron-metadata-agent    |</span>
<span class="go">| 598f6357-4331-4da5-a420-0f5be000bec9 | L3 agent           | network1 | nova              | True  | UP    | neutron-l3-agent          |</span>
<span class="go">| f4734e0f-bcd5-4922-a19d-e31d56b0a7ae | Linux bridge agent | network1 |                   | True  | UP    | neutron-linuxbridge-agent |</span>
<span class="go">| 670e5805-340b-4182-9825-fa8319c99f23 | Linux bridge agent | network2 |                   | True  | UP    | neutron-linuxbridge-agent |</span>
<span class="go">| 96224e89-7c15-42e9-89c4-8caac7abdd54 | L3 agent           | network2 | nova              | True  | UP    | neutron-l3-agent          |</span>
<span class="go">+--------------------------------------+--------------------+----------+-------------------+-------+-------+---------------------------+</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="create-initial-networks">
<h3>Create initial networks<a class="headerlink" href="deploy-lb-ha-vrrp.html#create-initial-networks" title="Permalink to this headline">¶</a></h3>
<p>Similar to the self-service deployment example, this configuration supports
multiple VXLAN self-service networks. After enabling high-availability, all
additional routers use VRRP. The following procedure creates an additional
self-service network and router. The Networking service also supports adding
high-availability to existing routers. However, the procedure requires
administratively disabling and enabling each router which temporarily
interrupts network connectivity for self-service networks with interfaces
on that router.</p>
<ol class="arabic">
<li><p class="first">Source a regular (non-administrative) project credentials.</p>
</li>
<li><p class="first">Create a self-service network.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack network create selfservice2
<span class="go">+-------------------------+--------------+</span>
<span class="go">| Field                   | Value        |</span>
<span class="go">+-------------------------+--------------+</span>
<span class="go">| admin_state_up          | UP           |</span>
<span class="go">| mtu                     | 1450         |</span>
<span class="go">| name                    | selfservice2 |</span>
<span class="go">| port_security_enabled   | True         |</span>
<span class="go">| router:external         | Internal     |</span>
<span class="go">| shared                  | False        |</span>
<span class="go">| status                  | ACTIVE       |</span>
<span class="go">+-------------------------+--------------+</span>
</pre></div>
</div>
</li>
<li><p class="first">Create a IPv4 subnet on the self-service network.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack subnet create --subnet-range <span class="m">198</span>.51.100.0/24 <span class="se">\</span>
  --network selfservice2 --dns-nameserver <span class="m">8</span>.8.4.4 selfservice2-v4
<span class="go">+-------------------+------------------------------+</span>
<span class="go">| Field             | Value                        |</span>
<span class="go">+-------------------+------------------------------+</span>
<span class="go">| allocation_pools  | 198.51.100.2-198.51.100.254  |</span>
<span class="go">| cidr              | 198.51.100.0/24              |</span>
<span class="go">| dns_nameservers   | 8.8.4.4                      |</span>
<span class="go">| enable_dhcp       | True                         |</span>
<span class="go">| gateway_ip        | 198.51.100.1                 |</span>
<span class="go">| ip_version        | 4                            |</span>
<span class="go">| name              | selfservice2-v4              |</span>
<span class="go">+-------------------+------------------------------+</span>
</pre></div>
</div>
</li>
<li><p class="first">Create a IPv6 subnet on the self-service network.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack subnet create --subnet-range fd00:198:51:100::/64 --ip-version <span class="m">6</span> <span class="se">\</span>
  --ipv6-ra-mode slaac --ipv6-address-mode slaac --network selfservice2 <span class="se">\</span>
  --dns-nameserver <span class="m">2001</span>:4860:4860::8844 selfservice2-v6
<span class="go">+-------------------+--------------------------------------------------------+</span>
<span class="go">| Field             | Value                                                  |</span>
<span class="go">+-------------------+--------------------------------------------------------+</span>
<span class="go">| allocation_pools  | fd00:198:51:100::2-fd00:198:51:100:ffff:ffff:ffff:ffff |</span>
<span class="go">| cidr              | fd00:198:51:100::/64                                   |</span>
<span class="go">| dns_nameservers   | 2001:4860:4860::8844                                   |</span>
<span class="go">| enable_dhcp       | True                                                   |</span>
<span class="go">| gateway_ip        | fd00:198:51:100::1                                     |</span>
<span class="go">| ip_version        | 6                                                      |</span>
<span class="go">| ipv6_address_mode | slaac                                                  |</span>
<span class="go">| ipv6_ra_mode      | slaac                                                  |</span>
<span class="go">| name              | selfservice2-v6                                        |</span>
<span class="go">+-------------------+--------------------------------------------------------+</span>
</pre></div>
</div>
</li>
<li><p class="first">Create a router.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack router create router2
<span class="go">+-----------------------+---------+</span>
<span class="go">| Field                 | Value   |</span>
<span class="go">+-----------------------+---------+</span>
<span class="go">| admin_state_up        | UP      |</span>
<span class="go">| name                  | router2 |</span>
<span class="go">| status                | ACTIVE  |</span>
<span class="go">+-----------------------+---------+</span>
</pre></div>
</div>
</li>
<li><p class="first">Add the IPv4 and IPv6 subnets as interfaces on the router.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack router add subnet router2 selfservice2-v4
<span class="gp">$</span> openstack router add subnet router2 selfservice2-v6
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands provide no output.</p>
</div>
</li>
<li><p class="first">Add the provider network as a gateway on the router.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> neutron router-gateway-set router2 provider1
<span class="go">Set gateway for router router2</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="verify-network-operation">
<h3>Verify network operation<a class="headerlink" href="deploy-lb-ha-vrrp.html#verify-network-operation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Source the administrative project credentials.</p>
</li>
<li><p class="first">Verify creation of the internal high-availability network that handles
VRRP <em>heartbeat</em> traffic.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack network list
<span class="go">+--------------------------------------+----------------------------------------------------+--------------------------------------+</span>
<span class="go">| ID                                   | Name                                               | Subnets                              |</span>
<span class="go">+--------------------------------------+----------------------------------------------------+--------------------------------------+</span>
<span class="go">| 1b8519c1-59c4-415c-9da2-a67d53c68455 | HA network tenant f986edf55ae945e2bef3cb4bfd589928 | 6843314a-1e76-4cc9-94f5-c64b7a39364a |</span>
<span class="go">+--------------------------------------+----------------------------------------------------+--------------------------------------+</span>
</pre></div>
</div>
</li>
<li><p class="first">On each network node, verify creation of a <code class="docutils literal"><span class="pre">qrouter</span></code> namespace with
the same ID.</p>
<p>Network node 1:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> ip netns
<span class="go">qrouter-b6206312-878e-497c-8ef7-eb384f8add96</span>
</pre></div>
</div>
<p>Network node 2:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> ip netns
<span class="go">qrouter-b6206312-878e-497c-8ef7-eb384f8add96</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The namespace for router 1 from <a class="reference internal" href="deploy-lb-selfservice.html#deploy-lb-selfservice"><span class="std std-ref">Linux bridge: Self-service networks</span></a> should
only appear on network node 1 because of creation prior to enabling
VRRP.</p>
</div>
</li>
<li><p class="first">On each network node, show the IP address of interfaces in the <code class="docutils literal"><span class="pre">qrouter</span></code>
namespace. With the exception of the VRRP interface, only one namespace
belonging to the master router instance contains IP addresses on the
interfaces.</p>
<p>Network node 1:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> ip netns <span class="nb">exec</span> qrouter-b6206312-878e-497c-8ef7-eb384f8add96 ip addr show
<span class="go">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1</span>
<span class="go">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span>
<span class="go">    inet 127.0.0.1/8 scope host lo</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 ::1/128 scope host</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">2: ha-eb820380-40@if21: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">    link/ether fa:16:3e:78:ba:99 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span>
<span class="go">    inet 169.254.192.1/18 brd 169.254.255.255 scope global ha-eb820380-40</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet 169.254.0.1/24 scope global ha-eb820380-40</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 fe80::f816:3eff:fe78:ba99/64 scope link</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">3: qr-da3504ad-ba@if24: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">    link/ether fa:16:3e:dc:8e:a8 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span>
<span class="go">    inet 198.51.100.1/24 scope global qr-da3504ad-ba</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 fe80::f816:3eff:fedc:8ea8/64 scope link</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">4: qr-442e36eb-fc@if27: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">    link/ether fa:16:3e:ee:c8:41 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span>
<span class="go">    inet6 fd00:198:51:100::1/64 scope global nodad</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 fe80::f816:3eff:feee:c841/64 scope link</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">5: qg-33fedbc5-43@if28: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">    link/ether fa:16:3e:03:1a:f6 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span>
<span class="go">    inet 203.0.113.21/24 scope global qg-33fedbc5-43</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 fd00:203:0:113::21/64 scope global nodad</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 fe80::f816:3eff:fe03:1af6/64 scope link</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
</pre></div>
</div>
<p>Network node 2:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> ip netns <span class="nb">exec</span> qrouter-b6206312-878e-497c-8ef7-eb384f8add96 ip addr show
<span class="go">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1</span>
<span class="go">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span>
<span class="go">    inet 127.0.0.1/8 scope host lo</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 ::1/128 scope host</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">2: ha-7a7ce184-36@if8: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">    link/ether fa:16:3e:16:59:84 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span>
<span class="go">    inet 169.254.192.2/18 brd 169.254.255.255 scope global ha-7a7ce184-36</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">    inet6 fe80::f816:3eff:fe16:5984/64 scope link</span>
<span class="go">       valid_lft forever preferred_lft forever</span>
<span class="go">3: qr-da3504ad-ba@if11: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">    link/ether fa:16:3e:dc:8e:a8 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span>
<span class="go">4: qr-442e36eb-fc@if14: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1450 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">5: qg-33fedbc5-43@if15: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000</span>
<span class="go">    link/ether fa:16:3e:03:1a:f6 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The master router may reside on network node 2.</p>
</div>
</li>
<li><p class="first">Launch an instance with an interface on the addtional self-service network.
For example, a CirrOS image using flavor ID 1.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack server create --flavor <span class="m">1</span> --image cirros --nic net-id<span class="o">=</span>NETWORK_ID selfservice-instance2
</pre></div>
</div>
<p>Replace <code class="docutils literal"><span class="pre">NETWORK_ID</span></code> with the ID of the additional self-service
network.</p>
</li>
<li><p class="first">Determine the IPv4 and IPv6 addresses of the instance.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack server list
<span class="go">+--------------------------------------+-----------------------+--------+---------------------------------------------------------------------------+</span>
<span class="go">| ID                                   | Name                  | Status | Networks                                                                  |</span>
<span class="go">+--------------------------------------+-----------------------+--------+---------------------------------------------------------------------------+</span>
<span class="go">| bde64b00-77ae-41b9-b19a-cd8e378d9f8b | selfservice-instance2 | ACTIVE | selfservice2=fd00:198:51:100:f816:3eff:fe71:e93e, 198.51.100.4            |</span>
<span class="go">+--------------------------------------+-----------------------+--------+---------------------------------------------------------------------------+</span>
</pre></div>
</div>
</li>
<li><p class="first">Create a floating IPv4 address on the provider network.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack floating ip create provider1
<span class="go">+-------------+--------------------------------------+</span>
<span class="go">| Field       | Value                                |</span>
<span class="go">+-------------+--------------------------------------+</span>
<span class="go">| fixed_ip    | None                                 |</span>
<span class="go">| id          | 0174056a-fa56-4403-b1ea-b5151a31191f |</span>
<span class="go">| instance_id | None                                 |</span>
<span class="go">| ip          | 203.0.113.17                         |</span>
<span class="go">| pool        | provider1                            |</span>
<span class="go">+-------------+--------------------------------------+</span>
</pre></div>
</div>
</li>
<li><p class="first">Associate the floating IPv4 address with the instance.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack server add floating ip selfservice-instance2 <span class="m">203</span>.0.113.17
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command provides no output.</p>
</div>
</li>
</ol>
</div>
<div class="section" id="verify-failover-operation">
<h3>Verify failover operation<a class="headerlink" href="deploy-lb-ha-vrrp.html#verify-failover-operation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Begin a continuous <code class="docutils literal"><span class="pre">ping</span></code> of both the floating IPv4 address and IPv6
address of the instance. While performing the next three steps, you
should see a minimal, if any, interruption of connectivity to the
instance.</li>
<li>On the network node with the master router, administratively disable
the overlay network interface.</li>
<li>On the other network node, verify promotion of the backup router to
master router by noting addition of IP addresses to the interfaces
in the <code class="docutils literal"><span class="pre">qrouter</span></code> namespace.</li>
<li>On the original network node in step 2, administratively enable the
overlay network interface. Note that the master router remains on
the network node in step 3.</li>
</ol>
</div>
<div class="section" id="keepalived-vrrp-health-check">
<h3>Keepalived VRRP health check<a class="headerlink" href="deploy-lb-ha-vrrp.html#keepalived-vrrp-health-check" title="Permalink to this headline">¶</a></h3>
<p>The health of your <code class="docutils literal"><span class="pre">keepalived</span></code> instances can be automatically monitored via
a bash script that verifies connectivity to all available and configured
gateway addresses. In the event that connectivity is lost, the master router
is rescheduled to another node.</p>
<p>If all routers lose connectivity simultaneously, the process of selecting a
new master router will be repeated in a round-robin fashion until one or more
routers have their connectivity restored.</p>
<p>To enable this feature, edit the <code class="docutils literal"><span class="pre">l3_agent.ini</span></code> file:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">ha_vrrp_health_check_interval</span> <span class="o">=</span> <span class="s">30</span>
</pre></div>
</div>
<p>Where <code class="docutils literal"><span class="pre">ha_vrrp_health_check_interval</span></code> indicates how often in seconds the
health check should run. The default value is <code class="docutils literal"><span class="pre">0</span></code>, which indicates that the
check should not run at all.</p>
</div>
</div>
<div class="section" id="network-traffic-flow">
<h2>Network traffic flow<a class="headerlink" href="deploy-lb-ha-vrrp.html#network-traffic-flow" title="Permalink to this headline">¶</a></h2>
<p>This high-availability mechanism simply augments <a class="reference internal" href="deploy-lb-selfservice.html#deploy-lb-selfservice"><span class="std std-ref">Linux bridge: Self-service networks</span></a>
with failover of layer-3 services to another router if the master router
fails. Thus, you can reference <a class="reference internal" href="deploy-lb-selfservice.html#deploy-lb-selfservice-networktrafficflow"><span class="std std-ref">Self-service network traffic flow</span></a> for normal operation.</p>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="deploy-lb-selfservice.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Linux bridge: Self-service networks"></i></a>
          
          
            <a href="deploy-ovs.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Open vSwitch mechanism driver"></i></a>
          
            <a id="logABugLink3" href="deploy-lb-ha-vrrp.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2018-02-08 07:39</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="deploy-lb-ha-vrrp.html#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="deploy.html">Deployment examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="deploy.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="deploy.html#mechanism-drivers">Mechanism drivers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ops.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-3.1.1.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "deploy-lb-ha-vrrp" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/networking-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 4ad6860c2d8531fd122db0b8b89a923cefdb682f";
        var bugProject = "openstack-manuals";
        var bugTitle = "Linux bridge: High availability using VRRP in Networking Guide";
    var fieldTags = "networking-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 15.0.0 on 2018-02-08 07:39";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>