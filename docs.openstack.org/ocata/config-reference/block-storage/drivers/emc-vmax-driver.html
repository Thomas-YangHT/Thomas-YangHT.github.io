<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Dell EMC VMAX iSCSI and FC drivers</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../../_static/css/combined.css" rel="stylesheet">
<link href="../../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://docs.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://ask.openstack.org/">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Dell EMC VMAX iSCSI and FC drivers</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="emc-scaleio-driver.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: EMC ScaleIO Block Storage driver configuration"></i></a>
    
    
    <a href="emc-vnx-driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Dell EMC VNX driver"></i></a>
    
    <a id="logABugLink1" href="emc-vmax-driver.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2018-02-08 07:41</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="emc-vmax-driver.html#">Dell EMC VMAX iSCSI and FC drivers</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#system-requirements">System requirements</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#required-vmax-software-suites-for-openstack">Required VMAX software suites for OpenStack</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#elicensing-support">eLicensing support</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#supported-operations">Supported operations</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#setup-vmax-drivers">Setup VMAX drivers</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#fc-zoning-with-vmax">FC Zoning with VMAX</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#iscsi-with-vmax">iSCSI with VMAX</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#vmax-masking-view-and-group-naming-info">VMAX masking view and group naming info</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#masking-view-names">Masking view names</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#initiator-group-names">Initiator group names</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#fa-port-groups">FA port groups</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#storage-group-names">Storage group names</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#interval-and-retries">Interval and Retries</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#ssl-support">SSL support</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#oversubscription-support">Oversubscription support</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#scenario-1">Scenario 1</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#scenario-2">Scenario 2</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#scenario-3">Scenario 3</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#scenario-4">Scenario 4</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#scenario-5">Scenario 5</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#qos-quality-of-service-support">QoS (Quality of Service) support</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-1-default-values">USE CASE 1 - Default values</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-2-preset-limits">USE CASE 2 - Preset limits</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-3-preset-limits">USE CASE 3 - Preset limits</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-4-preset-limits">USE CASE 4 - Preset limits</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#iscsi-multipathing-support">iSCSI multipathing support</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#multipath-configuration-file">Multipath configuration file</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#openstack-configurations">OpenStack configurations</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#verify-you-have-multiple-initiators-available-on-the-compute-node-for-i-o">Verify you have multiple initiators available on the compute node for I/O</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#consistency-group-support">Consistency group support</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#operations">Operations</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#workload-planner-wlp">Workload Planner (WLP)</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#enabling-wlp-on-unisphere">Enabling WLP on Unisphere</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#using-testsmiprovider-to-add-statistics-access-point">Using TestSmiProvider to add statistics access point</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#attach-and-detach-snapshots">Attach and detach snapshots</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#enable-attach-and-detach-snapshot-functionality">Enable attach and detach snapshot functionality</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-1-create-a-volume-backup-when-the-volume-is-in-use">Use case 1 - Create a volume backup when the volume is in-use</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-2-restore-a-backup-of-a-volume">Use case 2 - Restore a backup of a volume</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-3-create-a-backup-of-a-snapshot">Use case 3 - Create a backup of a snapshot</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-4-restore-backup-of-a-snapshot">Use case 4 - Restore backup of a snapshot</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#all-flash-compression-support">All Flash compression support</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-1-compression-disabled-create-attach-detach-and-delete-volume">Use case 1 - Compression disabled create, attach, detach, and delete volume</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-2-compression-disabled-create-delete-snapshot-and-delete-volume">Use case 2 - Compression disabled create, delete snapshot and delete volume</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#use-case-3-retype-from-compression-disabled-to-compression-enabled">Use case 3 - Retype from compression disabled to compression enabled</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#volume-replication-support">Volume replication support</a><ul>
<li><a class="reference internal" href="emc-vmax-driver.html#configure-the-source-and-target-arrays">Configure the source and target arrays</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#volume-replication-interoperability-with-other-features">Volume replication interoperability with other features</a></li>
<li><a class="reference internal" href="emc-vmax-driver.html#failover-host">Failover host</a></li>
</ul>
</li>
<li><a class="reference internal" href="emc-vmax-driver.html#volume-retype-storage-assisted-volume-migration">Volume retype -  storage assisted volume migration</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="dell-emc-vmax-iscsi-and-fc-drivers">
<h1>Dell EMC VMAX iSCSI and FC drivers<a class="headerlink" href="emc-vmax-driver.html#dell-emc-vmax-iscsi-and-fc-drivers" title="Permalink to this headline">¶</a></h1>
<p>The Dell EMC VMAX drivers, <code class="docutils literal"><span class="pre">VMAXISCSIDriver</span></code> and <code class="docutils literal"><span class="pre">VMAXFCDriver</span></code>, support
the use of Dell EMC VMAX storage arrays with Block Storage. They both provide
equivalent functions and differ only in support for their respective host
attachment methods.</p>
<p>The drivers perform volume operations by communicating with the back-end VMAX
storage. It uses a CIM client in Python called <code class="docutils literal"><span class="pre">PyWBEM</span></code> to perform CIM
operations over HTTP.</p>
<p>The EMC CIM Object Manager (ECOM) is packaged with the EMC SMI-S provider. It
is a CIM server that enables CIM clients to perform CIM operations over HTTP by
using SMI-S in the back end for VMAX storage operations.</p>
<p>The Dell EMC SMI-S Provider supports the SNIA Storage Management Initiative
(SMI), an ANSI standard for storage management. It supports the VMAX storage
system.</p>
<div class="section" id="system-requirements">
<h2>System requirements<a class="headerlink" href="emc-vmax-driver.html#system-requirements" title="Permalink to this headline">¶</a></h2>
<p>The Cinder driver supports the VMAX-3 series.</p>
<p>For VMAX-3 series, Solutions Enabler 8.3.0.11 or later is required. This
is SSL only. Refer to section below <code class="docutils literal"><span class="pre">SSL</span> <span class="pre">support</span></code>.</p>
<p>When installing Solutions Enabler, make sure you explicitly add the SMI-S
component.</p>
<p>You can download Solutions Enabler from the Dell EMC&#8217;s support web site
(login is required). See the <code class="docutils literal"><span class="pre">Solutions</span> <span class="pre">Enabler</span> <span class="pre">8.3.0</span> <span class="pre">Installation</span> <span class="pre">and</span>
<span class="pre">Configuration</span> <span class="pre">Guide</span></code> at <code class="docutils literal"><span class="pre">support.emc.com</span></code>.</p>
<p>Ensure that there is only one SMI-S (ECOM) server active on the same VMAX
array.</p>
</div>
<div class="section" id="required-vmax-software-suites-for-openstack">
<h2>Required VMAX software suites for OpenStack<a class="headerlink" href="emc-vmax-driver.html#required-vmax-software-suites-for-openstack" title="Permalink to this headline">¶</a></h2>
<p>There are five Software Suites available for the VMAX All Flash and Hybrid:</p>
<ul class="simple">
<li>Base Suite</li>
<li>Advanced Suite</li>
<li>Local Replication Suite</li>
<li>Remote Replication Suite</li>
<li>Total Productivity Pack</li>
</ul>
<p>OpenStack requires the Advanced Suite and the Local Replication Suite
or the Total Productivity Pack (it includes the Advanced Suite and the
Local Replication Suite) for the VMAX All Flash and Hybrid.</p>
<p>Each are licensed separately. For further details on how to get the
relevant license(s), reference eLicensing Support below.</p>
</div>
<div class="section" id="elicensing-support">
<h2>eLicensing support<a class="headerlink" href="emc-vmax-driver.html#elicensing-support" title="Permalink to this headline">¶</a></h2>
<p>To activate your entitlements and obtain your VMAX license files, visit the
Service Center on <a class="reference external" href="https://support.emc.com">https://support.emc.com</a>, as directed on your License
Authorization Code (LAC) letter emailed to you.</p>
<ul>
<li><p class="first">For help with missing or incorrect entitlements after activation
(that is, expected functionality remains unavailable because it is not
licensed), contact your EMC account representative or authorized reseller.</p>
</li>
<li><p class="first">For help with any errors applying license files through Solutions Enabler,
contact the Dell EMC Customer Support Center.</p>
</li>
<li><p class="first">If you are missing a LAC letter or require further instructions on
activating your licenses through the Online Support site, contact EMC&#8217;s
worldwide Licensing team at <code class="docutils literal"><span class="pre">licensing&#64;emc.com</span></code> or call:</p>
<p>North America, Latin America, APJK, Australia, New Zealand: SVC4EMC
(800-782-4362) and follow the voice prompts.</p>
<p>EMEA: +353 (0) 21 4879862 and follow the voice prompts.</p>
</li>
</ul>
</div>
<div class="section" id="supported-operations">
<h2>Supported operations<a class="headerlink" href="emc-vmax-driver.html#supported-operations" title="Permalink to this headline">¶</a></h2>
<p>VMAX drivers support these operations:</p>
<ul class="simple">
<li>Create, list, delete, attach, and detach volumes</li>
<li>Create, list, and delete volume snapshots</li>
<li>Copy an image to a volume</li>
<li>Copy a volume to an image</li>
<li>Clone a volume</li>
<li>Extend a volume</li>
<li>Retype a volume (Host and storage assisted volume migration)</li>
<li>Create a volume from a snapshot</li>
<li>Create and delete consistency group</li>
<li>Create and delete consistency group snapshot</li>
<li>Modify consistency group (add and remove volumes)</li>
<li>Create consistency group from source</li>
</ul>
<p>VMAX drivers also support the following features:</p>
<ul class="simple">
<li>Dynamic masking view creation</li>
<li>Dynamic determination of the target iSCSI IP address</li>
<li>iSCSI multipath support</li>
<li>Oversubscription</li>
<li>Live Migration</li>
<li>Attach and detach snapshots</li>
<li>Volume replication</li>
</ul>
<p>VMAX All Flash and Hybrid:</p>
<ul class="simple">
<li>Service Level support</li>
<li>SnapVX support</li>
<li>All Flash support</li>
<li>Compression support</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">VMAX All Flash array with Solutions Enabler 8.3.0.11 or later have
compression enabled by default when associated with Diamond Service Level.
This means volumes added to any newly created storage groups will be
compressed.</p>
</div>
</div>
<div class="section" id="setup-vmax-drivers">
<h2>Setup VMAX drivers<a class="headerlink" href="emc-vmax-driver.html#setup-vmax-drivers" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text"><strong>Pywbem Versions</strong></span><a class="headerlink" href="emc-vmax-driver.html#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="27%" />
<col width="16%" />
<col width="20%" />
<col width="16%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pywbem
Version</th>
<th class="head" colspan="4">Ubuntu14.04(LTS),Ubuntu16.04(LTS),
Red Hat Enterprise Linux, CentOS
and Fedora</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="2">&#160;</td>
<td colspan="2">Python2</td>
<td colspan="2">Python3</td>
</tr>
<tr class="row-odd"><td>pip</td>
<td>Native</td>
<td>pip</td>
<td>Native</td>
</tr>
<tr class="row-even"><td>0.9.0</td>
<td>No</td>
<td>N/A</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-odd"><td>0.8.4</td>
<td>No</td>
<td>N/A</td>
<td>Yes</td>
<td>N/A</td>
</tr>
<tr class="row-even"><td>0.7.0</td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>On Python2, use the updated distro version, for example:</p>
<div class="last highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install python-pywbem
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On Python3, use the official pywbem version (V0.9.0 or v0.8.4).</p>
</div>
<ol class="arabic">
<li><p class="first">Install the <code class="docutils literal"><span class="pre">python-pywbem</span></code> package for your distribution.</p>
<ul>
<li><p class="first">On Ubuntu:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install python-pywbem
</pre></div>
</div>
</li>
<li><p class="first">On openSUSE:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> zypper install python-pywbem
</pre></div>
</div>
</li>
<li><p class="first">On Red Hat Enterprise Linux, CentOS, and Fedora:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> yum install pywbem
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A potential issue can exist with the <code class="docutils literal"><span class="pre">python-pywbem</span></code> dependency package,
especially M2crypto. To troubleshot and resolve these types of issues,
follow these steps.</p>
<ul class="last">
<li><p class="first">On Ubuntu:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get remove --purge -y python-m2crypto
<span class="gp">#</span> pip uninstall pywbem
<span class="gp">#</span> apt-get install python-pywbem
</pre></div>
</div>
</li>
<li><p class="first">On openSUSE:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> zypper remove --clean-deps python-m2crypto
<span class="gp">#</span> pip uninstall pywbem
<span class="gp">#</span> zypper install python-pywbem
</pre></div>
</div>
</li>
<li><p class="first">On Red Hat Enterprise Linux, CentOS, and Fedora:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> yum remove python-m2crypto
<span class="gp">#</span> sudo pip uninstall pywbem
<span class="gp">#</span> yum install pywbem
</pre></div>
</div>
</li>
</ul>
</div>
</li>
<li><p class="first">Install iSCSI Utilities (for iSCSI drivers only).</p>
<ol class="arabic">
<li><p class="first">Download and configure the Cinder node as an iSCSI initiator.</p>
</li>
<li><p class="first">Install the <code class="docutils literal"><span class="pre">open-iscsi</span></code> package.</p>
<ul>
<li><p class="first">On Ubuntu:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install open-iscsi
</pre></div>
</div>
</li>
<li><p class="first">On openSUSE:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> zypper install open-iscsi
</pre></div>
</div>
</li>
<li><p class="first">On Red Hat Enterprise Linux, CentOS, and Fedora:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> yum install scsi-target-utils.x86_64
</pre></div>
</div>
</li>
</ul>
</li>
</ol>
</li>
<li><p class="first">Download Solutions Enabler from <code class="docutils literal"><span class="pre">support.emc.com</span></code> and install it.
Make sure you install the SMIS component. A [Y]es response installs the
<code class="docutils literal"><span class="pre">SMISPROVIDER</span></code> component.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Install EMC Solutions Enabler SMIS Component ? [N]:Y</span>
</pre></div>
</div>
<p>You can install Solutions Enabler on a non-OpenStack host. Supported
platforms include different flavors of Windows, Red Hat, and SUSE Linux.
Solutions Enabler can be installed on a physical server or a VM hosted by
an ESX server. Note that the supported hypervisor for a VM running
Solutions Enabler is ESX only. See the <code class="docutils literal"><span class="pre">Solutions</span> <span class="pre">Enabler</span> <span class="pre">8.3.0</span>
<span class="pre">Installation</span> <span class="pre">and</span> <span class="pre">Configuration</span> <span class="pre">Guide</span></code> on <code class="docutils literal"><span class="pre">support.emc.com</span></code> for more
details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must discover storage arrays on the ECOM before you can use
the VMAX drivers. Follow instructions in <code class="docutils literal"><span class="pre">Solutions</span> <span class="pre">Enabler</span> <span class="pre">8.3.0</span>
<span class="pre">Installation</span> <span class="pre">and</span> <span class="pre">Configuration</span> <span class="pre">Guide</span></code> on <code class="docutils literal"><span class="pre">support.emc.com</span></code> for more
details.</p>
</div>
<p>The ECOM server is usually installed at <code class="docutils literal"><span class="pre">/opt/emc/ECIM/ECOM/bin</span></code> on Linux
and <code class="docutils literal"><span class="pre">C:\Program</span> <span class="pre">Files\EMC\ECIM\ECOM\bin</span></code> on Windows. After you install and
configure the ECOM, go to that directory and type <code class="docutils literal"><span class="pre">TestSmiProvider.exe</span></code>
for windows and <code class="docutils literal"><span class="pre">./TestSmiProvider</span></code> for linux</p>
<p>Use <code class="docutils literal"><span class="pre">disco</span></code> in <code class="docutils literal"><span class="pre">TestSmiProvider</span></code> to add an array. Use <code class="docutils literal"><span class="pre">dv</span></code> and examine
the output after the array is added. In advance of <code class="docutils literal"><span class="pre">TestSmiProvider</span></code>,
arrays need to be discovered on the Solutions Enabler by using the
<strong class="command">symcfg discover</strong> command. Make sure that the arrays are recognized by the
SMI-S server before using the EMC VMAX drivers.</p>
</li>
<li><p class="first">Configure Block Storage</p>
<p>Add the following entries to <code class="docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code>:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">enabled_backends</span> <span class="o">=</span> <span class="s">CONF_GROUP_ISCSI, CONF_GROUP_FC</span>

<span class="k">[CONF_GROUP_ISCSI]</span>
<span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.dell_emc.vmax.iscsi.VMAXISCSIDriver</span>
<span class="na">cinder_emc_config_file</span> <span class="o">=</span> <span class="s">/etc/cinder/cinder_emc_config_CONF_GROUP_ISCSI.xml</span>
<span class="na">volume_backend_name</span> <span class="o">=</span> <span class="s">ISCSI_backend</span>

<span class="k">[CONF_GROUP_FC]</span>
<span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.dell_emc.vmax.fc.VMAXFCDriver</span>
<span class="na">cinder_emc_config_file</span> <span class="o">=</span> <span class="s">/etc/cinder/cinder_emc_config_CONF_GROUP_FC.xml</span>
<span class="na">volume_backend_name</span> <span class="o">=</span> <span class="s">FC_backend</span>
</pre></div>
</div>
<p>In this example, two back-end configuration groups are enabled:
<code class="docutils literal"><span class="pre">CONF_GROUP_ISCSI</span></code> and <code class="docutils literal"><span class="pre">CONF_GROUP_FC</span></code>. Each configuration group has a
section describing unique parameters for connections, drivers, the
<code class="docutils literal"><span class="pre">volume_backend_name</span></code>, and the name of the EMC-specific configuration file
containing additional settings. Note that the file name is in the format
<code class="docutils literal"><span class="pre">/etc/cinder/cinder_emc_config_[confGroup].xml</span></code>.</p>
<p>Once the <code class="docutils literal"><span class="pre">cinder.conf</span></code> and EMC-specific configuration files have been
created, <strong class="command">openstack</strong> commands need to be issued in order to create and
associate OpenStack volume types with the declared <code class="docutils literal"><span class="pre">volume_backend_names</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume <span class="nb">type</span> create VMAX_ISCSI
<span class="gp">$</span> openstack volume <span class="nb">type</span> <span class="nb">set</span> --property <span class="nv">volume_backend_name</span><span class="o">=</span>ISCSI_backend VMAX_ISCSI
<span class="gp">$</span> openstack volume <span class="nb">type</span> create VMAX_FC
<span class="gp">$</span> openstack volume <span class="nb">type</span> <span class="nb">set</span> --property <span class="nv">volume_backend_name</span><span class="o">=</span>FC_backend VMAX_FC
</pre></div>
</div>
<p>By issuing these commands, the Block Storage volume type <code class="docutils literal"><span class="pre">VMAX_ISCSI</span></code> is
associated with the <code class="docutils literal"><span class="pre">ISCSI_backend</span></code>, and the type <code class="docutils literal"><span class="pre">VMAX_FC</span></code> is
associated with the <code class="docutils literal"><span class="pre">FC_backend</span></code>.</p>
<p>Create the <code class="docutils literal"><span class="pre">/etc/cinder/cinder_emc_config_CONF_GROUP_ISCSI.xml</span></code> file.
You do not need to restart the service for this change.</p>
<p>Add the following lines to the XML file:</p>
<dl class="docutils">
<dt>VMAX All Flash and Hybrid</dt>
<dd><div class="first last highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;EMC&gt;</span>
  <span class="nt">&lt;EcomServerIp&gt;</span>1.1.1.1<span class="nt">&lt;/EcomServerIp&gt;</span>
  <span class="nt">&lt;EcomServerPort&gt;</span>00<span class="nt">&lt;/EcomServerPort&gt;</span>
  <span class="nt">&lt;EcomUserName&gt;</span>user1<span class="nt">&lt;/EcomUserName&gt;</span>
  <span class="nt">&lt;EcomPassword&gt;</span>password1<span class="nt">&lt;/EcomPassword&gt;</span>
  <span class="nt">&lt;PortGroups&gt;</span>
    <span class="nt">&lt;PortGroup&gt;</span>OS-PORTGROUP1-PG<span class="nt">&lt;/PortGroup&gt;</span>
    <span class="nt">&lt;PortGroup&gt;</span>OS-PORTGROUP2-PG<span class="nt">&lt;/PortGroup&gt;</span>
  <span class="nt">&lt;/PortGroups&gt;</span>
  <span class="nt">&lt;Array&gt;</span>111111111111<span class="nt">&lt;/Array&gt;</span>
  <span class="nt">&lt;Pool&gt;</span>SRP_1<span class="nt">&lt;/Pool&gt;</span>
  <span class="nt">&lt;ServiceLevel&gt;</span>Diamond<span class="nt">&lt;/ServiceLevel&gt;</span>
  <span class="nt">&lt;Workload&gt;</span>OLTP<span class="nt">&lt;/Workload&gt;</span>
<span class="nt">&lt;/EMC&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<p>Where:</p>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">VMAX Hybrid supports Optimized, Diamond, Platinum, Gold, Silver, Bronze, and
NONE service levels. VMAX All Flash supports Diamond and NONE. Both
support DSS_REP, DSS, OLTP_REP, OLTP, and NONE workloads.</p>
</div>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">EcomServerIp</span></code></dt>
<dd>IP address of the ECOM server which is packaged with SMI-S.</dd>
<dt><code class="docutils literal"><span class="pre">EcomServerPort</span></code></dt>
<dd>Port number of the ECOM server which is packaged with SMI-S.</dd>
<dt><code class="docutils literal"><span class="pre">EcomUserName</span></code> and <code class="docutils literal"><span class="pre">EcomPassword</span></code></dt>
<dd>Credentials for the ECOM server.</dd>
<dt><code class="docutils literal"><span class="pre">PortGroups</span></code></dt>
<dd>Supplies the names of VMAX port groups that have been pre-configured to
expose volumes managed by this backend. Each supplied port group should
have sufficient number and distribution of ports (across directors and
switches) as to ensure adequate bandwidth and failure protection for the
volume connections. PortGroups can contain one or more port groups of
either iSCSI or FC ports. When a dynamic masking view is created by the
VMAX driver, the port group is chosen randomly from the PortGroup list, to
evenly distribute load across the set of groups provided. Make sure that
the PortGroups set contains either all FC or all iSCSI port groups (for a
given back end), as appropriate for the configured driver (iSCSI or FC).</dd>
<dt><code class="docutils literal"><span class="pre">Array</span></code></dt>
<dd>Unique VMAX array serial number.</dd>
<dt><code class="docutils literal"><span class="pre">Pool</span></code></dt>
<dd>Unique pool name within a given array. For back ends not using FAST
automated tiering, the pool is a single pool that has been created by the
administrator. For back ends exposing FAST policy automated tiering, the
pool is the bind pool to be used with the FAST policy.</dd>
<dt><code class="docutils literal"><span class="pre">ServiceLevel</span></code></dt>
<dd>VMAX All Flash and Hybrid only. The Service Level manages the underlying
storage to provide expected performance. Omitting the <code class="docutils literal"><span class="pre">ServiceLevel</span></code>
tag means that non FAST storage groups will be created instead
(storage groups not associated with any service level).</dd>
<dt><code class="docutils literal"><span class="pre">Workload</span></code></dt>
<dd>VMAX All Flash and Hybrid only. When a workload type is added, the latency
range is reduced due to the added information. Omitting the <code class="docutils literal"><span class="pre">Workload</span></code>
tag means the latency range will be the widest for its SLO type.</dd>
</dl>
</div>
<div class="section" id="fc-zoning-with-vmax">
<h2>FC Zoning with VMAX<a class="headerlink" href="emc-vmax-driver.html#fc-zoning-with-vmax" title="Permalink to this headline">¶</a></h2>
<p>Zone Manager is required when there is a fabric between the host and array.
This is necessary for larger configurations where pre-zoning would be too
complex and open-zoning would raise security concerns.</p>
</div>
<div class="section" id="iscsi-with-vmax">
<h2>iSCSI with VMAX<a class="headerlink" href="emc-vmax-driver.html#iscsi-with-vmax" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Make sure the <code class="docutils literal"><span class="pre">iscsi-initiator-utils</span></code> package is installed on all Compute
nodes.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can only ping the VMAX iSCSI target ports when there is a valid masking
view. An attach operation creates this masking view.</p>
</div>
</div>
<div class="section" id="vmax-masking-view-and-group-naming-info">
<h2>VMAX masking view and group naming info<a class="headerlink" href="emc-vmax-driver.html#vmax-masking-view-and-group-naming-info" title="Permalink to this headline">¶</a></h2>
<div class="section" id="masking-view-names">
<h3>Masking view names<a class="headerlink" href="emc-vmax-driver.html#masking-view-names" title="Permalink to this headline">¶</a></h3>
<p>Masking views are dynamically created by the VMAX FC and iSCSI drivers using
the following naming conventions. <code class="docutils literal"><span class="pre">[protocol]</span></code> is either <code class="docutils literal"><span class="pre">I</span></code> for volumes
attached over iSCSI or <code class="docutils literal"><span class="pre">F</span></code> for volumes attached over Fiber Channel.</p>
<p>VMAX All Flash and Hybrid</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>OS-[shortHostName]-[SRP]-[SLO]-[workload]-[protocol]-MV
</pre></div>
</div>
</div>
<div class="section" id="initiator-group-names">
<h3>Initiator group names<a class="headerlink" href="emc-vmax-driver.html#initiator-group-names" title="Permalink to this headline">¶</a></h3>
<p>For each host that is attached to VMAX volumes using the drivers, an initiator
group is created or re-used (per attachment type). All initiators of the
appropriate type known for that host are included in the group. At each new
attach volume operation, the VMAX driver retrieves the initiators (either WWNNs
or IQNs) from OpenStack and adds or updates the contents of the Initiator Group
as required. Names are of the following format. <code class="docutils literal"><span class="pre">[protocol]</span></code> is either <code class="docutils literal"><span class="pre">I</span></code>
for volumes attached over iSCSI or <code class="docutils literal"><span class="pre">F</span></code> for volumes attached over Fiber
Channel.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>OS-[shortHostName]-[protocol]-IG
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Hosts attaching to OpenStack managed VMAX storage cannot also attach to
storage on the same VMAX that are not managed by OpenStack.</p>
</div>
</div>
<div class="section" id="fa-port-groups">
<h3>FA port groups<a class="headerlink" href="emc-vmax-driver.html#fa-port-groups" title="Permalink to this headline">¶</a></h3>
<p>VMAX array FA ports to be used in a new masking view are chosen from the list
provided in the EMC configuration file.</p>
</div>
<div class="section" id="storage-group-names">
<h3>Storage group names<a class="headerlink" href="emc-vmax-driver.html#storage-group-names" title="Permalink to this headline">¶</a></h3>
<p>As volumes are attached to a host, they are either added to an existing storage
group (if it exists) or a new storage group is created and the volume is then
added. Storage groups contain volumes created from a pool (either single-pool
or FAST-controlled), attached to a single host, over a single connection type
(iSCSI or FC). <code class="docutils literal"><span class="pre">[protocol]</span></code> is either <code class="docutils literal"><span class="pre">I</span></code> for volumes attached over iSCSI
or <code class="docutils literal"><span class="pre">F</span></code> for volumes attached over Fiber Channel.</p>
<p>VMAX All Flash and Hybrid</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>OS-[shortHostName]-[SRP]-[SLO]-[Workload]-[protocol]-SG
</pre></div>
</div>
</div>
<div class="section" id="interval-and-retries">
<h3>Interval and Retries<a class="headerlink" href="emc-vmax-driver.html#interval-and-retries" title="Permalink to this headline">¶</a></h3>
<p>By default, <code class="docutils literal"><span class="pre">Interval</span></code> and <code class="docutils literal"><span class="pre">Retries</span></code> are <code class="docutils literal"><span class="pre">10</span></code> seconds and <code class="docutils literal"><span class="pre">60</span></code>
retries respectively. These determine how long (<code class="docutils literal"><span class="pre">Interval</span></code>) and how many
times (<code class="docutils literal"><span class="pre">Retries</span></code>) a user is willing to wait for a single SMIS call,
<code class="docutils literal"><span class="pre">10*60=300seconds</span></code>. Depending on usage, these may need to be overriden by
the user in the XML file.  For example, if performance is a factor, then the
<code class="docutils literal"><span class="pre">Interval</span></code> should be decreased to check the job status more frequently,
and if multiple concurrent provisioning requests are issued then <code class="docutils literal"><span class="pre">Retries</span></code>
should be increased so calls will not timeout prematurely.</p>
<p>In the example below, the driver checks every 5 seconds for the status of the
job. It will continue checking for 120 retries before it times out.</p>
<p>Add the following lines to the XML file:</p>
<blockquote>
<div><p>VMAX All Flash and Hybrid</p>
<blockquote>
<div><div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="nt">&lt;EMC&gt;</span>
  <span class="nt">&lt;EcomServerIp&gt;</span>1.1.1.1<span class="nt">&lt;/EcomServerIp&gt;</span>
  <span class="nt">&lt;EcomServerPort&gt;</span>00<span class="nt">&lt;/EcomServerPort&gt;</span>
  <span class="nt">&lt;EcomUserName&gt;</span>user1<span class="nt">&lt;/EcomUserName&gt;</span>
  <span class="nt">&lt;EcomPassword&gt;</span>password1<span class="nt">&lt;/EcomPassword&gt;</span>
  <span class="nt">&lt;PortGroups&gt;</span>
    <span class="nt">&lt;PortGroup&gt;</span>OS-PORTGROUP1-PG<span class="nt">&lt;/PortGroup&gt;</span>
    <span class="nt">&lt;PortGroup&gt;</span>OS-PORTGROUP2-PG<span class="nt">&lt;/PortGroup&gt;</span>
  <span class="nt">&lt;/PortGroups&gt;</span>
  <span class="nt">&lt;Array&gt;</span>111111111111<span class="nt">&lt;/Array&gt;</span>
  <span class="nt">&lt;Pool&gt;</span>SRP_1<span class="nt">&lt;/Pool&gt;</span>
  <span class="nt">&lt;Interval&gt;</span>5<span class="nt">&lt;/Interval&gt;</span>
  <span class="nt">&lt;Retries&gt;</span>120<span class="nt">&lt;/Retries&gt;</span>
<span class="nt">&lt;/EMC&gt;</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="ssl-support">
<h2>SSL support<a class="headerlink" href="emc-vmax-driver.html#ssl-support" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The ECOM component in Solutions Enabler enforces SSL in 8.3.0.1 or later.
By default, this port is 5989.</p>
</div>
<ol class="arabic">
<li><p class="first">Get the CA certificate of the ECOM server. This pulls the CA cert file and
saves it as .pem file. The ECOM server IP address or hostname is <code class="docutils literal"><span class="pre">my_ecom_host</span></code>.
The sample name of the .pem file is <code class="docutils literal"><span class="pre">ca_cert.pem</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> openssl s_client -showcerts -connect my_ecom_host:5989 &lt;/dev/null <span class="m">2</span>&gt;/dev/null<span class="p">|</span>openssl x509 -outform PEM &gt;ca_cert.pem
</pre></div>
</div>
</li>
<li><p class="first">Copy the pem file to the system certificate directory:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> cp ca_cert.pem /usr/share/ca-certificates/ca_cert.crt
</pre></div>
</div>
</li>
<li><p class="first">Update CA certificate database with the following commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> sudo dpkg-reconfigure ca-certificates
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Check that the new <code class="docutils literal"><span class="pre">ca_cert.crt</span></code> will activate by selecting
<span class="guilabel">ask</span> on the dialog. If it is not enabled for activation, use the
down and up keys to select, and the space key to enable or disable.</p>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> sudo update-ca-certificates
</pre></div>
</div>
</li>
<li><p class="first">Update <code class="file docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code> to reflect SSL functionality by
adding the following to the back end block. <code class="docutils literal"><span class="pre">my_location</span></code> is the location
of the .pem file generated in step one:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">driver_ssl_cert_verify</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">driver_use_ssl</span> <span class="o">=</span> <span class="s">True</span>
</pre></div>
</div>
<p>If you skip steps two and three, you must add the location of you .pem file.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">driver_ssl_cert_verify</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">driver_use_ssl</span> <span class="o">=</span> <span class="s">True</span>
<span class="na">driver_ssl_cert_path</span> <span class="o">=</span> <span class="s">/my_location/ca_cert.pem</span>
</pre></div>
</div>
</li>
<li><p class="first">Update EcomServerIp to ECOM host name and EcomServerPort to secure port
(5989 by default) in <code class="file docutils literal"><span class="pre">/etc/cinder/cinder_emc_config_&lt;conf_group&gt;.xml</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When specifying the ECOM host name in the XML file, it is the host name
and not the fully qualified domain name (FQDN) you use.</p>
<p>For example:</p>
<ul class="last simple">
<li>Host name - <code class="docutils literal"><span class="pre">ecom_dev</span></code></li>
<li>Domain name - <code class="docutils literal"><span class="pre">openstack.prod.com</span></code></li>
<li>FQDN - <code class="docutils literal"><span class="pre">eocm_dev.openstack.prod.com</span></code></li>
</ul>
</div>
</li>
</ol>
</div>
<div class="section" id="oversubscription-support">
<h2>Oversubscription support<a class="headerlink" href="emc-vmax-driver.html#oversubscription-support" title="Permalink to this headline">¶</a></h2>
<p>Oversubscription support requires the <code class="docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code> to be
updated with two additional tags <code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> and
<code class="docutils literal"><span class="pre">reserved_percentage</span></code>. In the sample below, the value of 2.0 for
<code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> means that the pools in oversubscribed by a
factor of 2, or 200% oversubscribed. The <code class="docutils literal"><span class="pre">reserved_percentage</span></code> is the high
water mark where by the physical remaining space cannot be exceeded.
For example, if there is only 4% of physical space left and the reserve
percentage is 5, the free space will equate to zero. This is a safety
mechanism to prevent a scenario where a provisioning request fails due to
insufficient raw space.</p>
<p>The parameter <code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> and <code class="docutils literal"><span class="pre">reserved_percentage</span></code> are
optional.</p>
<p>To set these parameter go to the configuration group of the volume type in
<code class="file docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code>.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="k">[VMAX_ISCSI_SILVER]</span>
<span class="na">cinder_emc_config_file</span> <span class="o">=</span> <span class="s">/etc/cinder/cinder_emc_config_VMAX_ISCSI_SILVER.xml</span>
<span class="na">volume_driver</span> <span class="o">=</span> <span class="s">cinder.volume.drivers.dell_emc.vmax.iscsi.VMAXISCSIDriver</span>
<span class="na">volume_backend_name</span> <span class="o">=</span> <span class="s">VMAX_ISCSI_SILVER</span>
<span class="na">max_over_subscription_ratio</span> <span class="o">=</span> <span class="s">2.0</span>
<span class="na">reserved_percentage</span> <span class="o">=</span> <span class="s">10</span>
</pre></div>
</div>
<p>For the second iteration of over subscription, take into account the
EMCMaxSubscriptionPercent property on the pool. This value is the highest
that a pool can be oversubscribed.</p>
<div class="section" id="scenario-1">
<h3>Scenario 1<a class="headerlink" href="emc-vmax-driver.html#scenario-1" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">EMCMaxSubscriptionPercent</span></code> is 200 and the user defined
<code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> is 2.5, the latter is ignored.
Oversubscription is 200%.</p>
</div>
<div class="section" id="scenario-2">
<h3>Scenario 2<a class="headerlink" href="emc-vmax-driver.html#scenario-2" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">EMCMaxSubscriptionPercent</span></code> is 200 and the user defined
<code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> is 1.5, 1.5 equates to 150% and is less than
the value set on the pool. Oversubscription is 150%.</p>
</div>
<div class="section" id="scenario-3">
<h3>Scenario 3<a class="headerlink" href="emc-vmax-driver.html#scenario-3" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">EMCMaxSubscriptionPercent</span></code> is 0. This means there is no upper limit on the
pool. The user defined <code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> is 1.5.
Oversubscription is 150%.</p>
</div>
<div class="section" id="scenario-4">
<h3>Scenario 4<a class="headerlink" href="emc-vmax-driver.html#scenario-4" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">EMCMaxSubscriptionPercent</span></code> is 0. <code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> is not
set by the user. We recommend to default to upper limit, this is 150%.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If FAST is set and multiple pools are associated with a FAST policy,
then the same rules apply. The difference is, the TotalManagedSpace and
EMCSubscribedCapacity for each pool associated with the FAST policy are
aggregated.</p>
</div>
</div>
<div class="section" id="scenario-5">
<h3>Scenario 5<a class="headerlink" href="emc-vmax-driver.html#scenario-5" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">EMCMaxSubscriptionPercent</span></code> is 200 on one pool. It is 300 on another pool.
The user defined <code class="docutils literal"><span class="pre">max_over_subscription_ratio</span></code> is 2.5. Oversubscription is
200% on the first pool and 250% on the other.</p>
</div>
</div>
<div class="section" id="qos-quality-of-service-support">
<h2>QoS (Quality of Service) support<a class="headerlink" href="emc-vmax-driver.html#qos-quality-of-service-support" title="Permalink to this headline">¶</a></h2>
<p>Quality of service(QoS) has traditionally been associated with network
bandwidth usage. Network administrators set limitations on certain networks
in terms of bandwidth usage for clients. This enables them to provide a
tiered level of service based on cost. The cinder QoS offers similar
functionality based on volume type setting limits on host storage bandwidth
per service offering. Each volume type is tied to specific QoS attributes
that are unique to each storage vendor. QoS enforcement in cinder is done
either at the hypervisor (front end), the storage subsystem (back end),
or both. The VMAX driver only supports the storage subsystem (back end)
or the combination of hypervisor (front end) and the storage subsystem
(back end), but never just hypervisor (front end).
The VMAX driver offers the following attributes:</p>
<ul class="simple">
<li>By I/O limit per second (IOPS)</li>
<li>By limiting throughput per second (MB/S)</li>
<li>Dynamic distribution</li>
<li>The VMAX offers modification of QoS at the Storage Group level</li>
</ul>
<div class="section" id="use-case-1-default-values">
<h3>USE CASE 1 - Default values<a class="headerlink" href="emc-vmax-driver.html#use-case-1-default-values" title="Permalink to this headline">¶</a></h3>
<p>Prerequisites - VMAX</p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     No Limit</li>
<li>Host I/O Limit (IO/Sec) -     No Limit</li>
<li>Set Dynamic Distribution -    N/A</li>
</ul>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-text"><strong>Prerequisites - Block Storage (cinder) back end (storage group)</strong></span><a class="headerlink" href="emc-vmax-driver.html#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>maxIOPS</td>
<td>4000</td>
</tr>
<tr class="row-odd"><td>maxMBPS</td>
<td>4000</td>
</tr>
<tr class="row-even"><td>DistributionType</td>
<td>Always</td>
</tr>
</tbody>
</table>
<ol class="arabic">
<li><p class="first">Create QoS Specs with the prerequisite values above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos create --consumer back-end <span class="se">\</span>
                              --property <span class="nv">maxIOPS</span><span class="o">=</span><span class="m">4000</span> <span class="se">\</span>
                              --property <span class="nv">maxMBPS</span><span class="o">=</span><span class="m">4000</span> <span class="se">\</span>
                              --property <span class="nv">DistributionType</span><span class="o">=</span>Always <span class="se">\</span>
                              SILVER
</pre></div>
</div>
</li>
<li><p class="first">Associate QoS specs with specified volume type:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos associate SILVER VOLUME_TYPE
</pre></div>
</div>
</li>
<li><p class="first">Create volume with the volume type indicated above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume create --size <span class="m">1</span> --type VOLUME_TYPE TEST_VOLUME
</pre></div>
</div>
</li>
</ol>
<p><strong>Outcome - VMAX (storage group)</strong></p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     4000</li>
<li>Host I/O Limit (IO/Sec) -     4000</li>
<li>Set Dynamic Distribution -    Always</li>
</ul>
<p><strong>Outcome - Block Storage (cinder)</strong></p>
<p>Volume is created against volume type and QoS is enforced with the parameters
above.</p>
</div>
<div class="section" id="use-case-2-preset-limits">
<h3>USE CASE 2 - Preset limits<a class="headerlink" href="emc-vmax-driver.html#use-case-2-preset-limits" title="Permalink to this headline">¶</a></h3>
<p>Prerequisites - VMAX</p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     2000</li>
<li>Host I/O Limit (IO/Sec) -     2000</li>
<li>Set Dynamic Distribution -    Never</li>
</ul>
<table border="1" class="docutils" id="id3">
<caption><span class="caption-text"><strong>Prerequisites - Block Storage (cinder) back end (storage group)</strong></span><a class="headerlink" href="emc-vmax-driver.html#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>maxIOPS</td>
<td>4000</td>
</tr>
<tr class="row-odd"><td>maxMBPS</td>
<td>4000</td>
</tr>
<tr class="row-even"><td>DistributionType</td>
<td>Always</td>
</tr>
</tbody>
</table>
<ol class="arabic">
<li><p class="first">Create QoS specifications with the prerequisite values above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos create --property <span class="nv">maxIOPS</span><span class="o">=</span><span class="m">4000</span> <span class="nv">maxMBPS</span><span class="o">=</span><span class="m">4000</span> <span class="nv">DistributionType</span><span class="o">=</span>Always SILVER
</pre></div>
</div>
</li>
<li><p class="first">Associate QoS specifications with specified volume type:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos associate SILVER VOLUME_TYPE
</pre></div>
</div>
</li>
<li><p class="first">Create volume with the volume type indicated above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume create --size <span class="m">1</span> --type VOLUME_TYPE TEST_VOLUME
</pre></div>
</div>
</li>
</ol>
<p><strong>Outcome - VMAX (storage group)</strong></p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     4000</li>
<li>Host I/O Limit (IO/Sec) -     4000</li>
<li>Set Dynamic Distribution -    Always</li>
</ul>
<p><strong>Outcome - Block Storage (cinder)</strong></p>
<p>Volume is created against volume type and QoS is enforced with the parameters
above.</p>
</div>
<div class="section" id="use-case-3-preset-limits">
<h3>USE CASE 3 - Preset limits<a class="headerlink" href="emc-vmax-driver.html#use-case-3-preset-limits" title="Permalink to this headline">¶</a></h3>
<p>Prerequisites - VMAX</p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     No Limit</li>
<li>Host I/O Limit (IO/Sec) -     No Limit</li>
<li>Set Dynamic Distribution -    N/A</li>
</ul>
<table border="1" class="docutils" id="id4">
<caption><span class="caption-text"><strong>Prerequisites - Block Storage (cinder) back end (storage group)</strong></span><a class="headerlink" href="emc-vmax-driver.html#id4" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="70%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DistributionType</td>
<td>Always</td>
</tr>
</tbody>
</table>
<ol class="arabic">
<li><p class="first">Create QoS specifications with the prerequisite values above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos create --property <span class="nv">DistributionType</span><span class="o">=</span>Always SILVER
</pre></div>
</div>
</li>
<li><p class="first">Associate QoS specifications with specified volume type:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos associate SILVER VOLUME_TYPE
</pre></div>
</div>
</li>
<li><p class="first">Create volume with the volume type indicated above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume create --size <span class="m">1</span> --type VOLUME_TYPE TEST_VOLUME
</pre></div>
</div>
</li>
</ol>
<p><strong>Outcome - VMAX (storage group)</strong></p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     No Limit</li>
<li>Host I/O Limit (IO/Sec) -     No Limit</li>
<li>Set Dynamic Distribution -    N/A</li>
</ul>
<p><strong>Outcome - Block Storage (cinder)</strong></p>
<p>Volume is created against volume type and there is no QoS change.</p>
</div>
<div class="section" id="use-case-4-preset-limits">
<h3>USE CASE 4 - Preset limits<a class="headerlink" href="emc-vmax-driver.html#use-case-4-preset-limits" title="Permalink to this headline">¶</a></h3>
<p>Prerequisites - VMAX</p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     No Limit</li>
<li>Host I/O Limit (IO/Sec) -     No Limit</li>
<li>Set Dynamic Distribution -    N/A</li>
</ul>
<table border="1" class="docutils" id="id5">
<caption><span class="caption-text"><strong>Prerequisites - Block Storage (cinder) back end (storage group)</strong></span><a class="headerlink" href="emc-vmax-driver.html#id5" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="63%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DistributionType</td>
<td>OnFailure</td>
</tr>
</tbody>
</table>
<ol class="arabic">
<li><p class="first">Create QoS specifications with the prerequisite values above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos create --property <span class="nv">DistributionType</span><span class="o">=</span>OnFailure SILVER
</pre></div>
</div>
</li>
<li><p class="first">Associate QoS specifications with specified volume type:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume qos associate SILVER VOLUME_TYPE
</pre></div>
</div>
</li>
<li><p class="first">Create volume with the volume type indicated above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume create --size <span class="m">1</span> --type VOLUME_TYPE TEST_VOLUME
</pre></div>
</div>
</li>
</ol>
<p><strong>Outcome - VMAX (storage group)</strong></p>
<ul class="simple">
<li>Host I/O Limit (MB/Sec) -     No Limit</li>
<li>Host I/O Limit (IO/Sec) -     No Limit</li>
<li>Set Dynamic Distribution -    N/A</li>
</ul>
<p><strong>Outcome - Block Storage (cinder)</strong></p>
<p>Volume is created against volume type and there is no QoS change.</p>
</div>
</div>
<div class="section" id="iscsi-multipathing-support">
<h2>iSCSI multipathing support<a class="headerlink" href="emc-vmax-driver.html#iscsi-multipathing-support" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Install open-iscsi on all nodes on your system</li>
<li>Do not install EMC PowerPath as they cannot co-exist with native multipath
software</li>
<li>Multipath tools must be installed on all nova compute nodes</li>
</ul>
<p>On Ubuntu:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install open-iscsi           <span class="c1">#ensure iSCSI is installed</span>
<span class="gp">#</span> apt-get install multipath-tools      <span class="c1">#multipath modules</span>
<span class="gp">#</span> apt-get install sysfsutils sg3-utils <span class="c1">#file system utilities</span>
<span class="gp">#</span> apt-get install scsitools            <span class="c1">#SCSI tools</span>
</pre></div>
</div>
<p>On openSUSE and SUSE Linux Enterprise Server:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> zipper install open-iscsi           <span class="c1">#ensure iSCSI is installed</span>
<span class="gp">#</span> zipper install multipath-tools      <span class="c1">#multipath modules</span>
<span class="gp">#</span> zipper install sysfsutils sg3-utils <span class="c1">#file system utilities</span>
<span class="gp">#</span> zipper install scsitools            <span class="c1">#SCSI tools</span>
</pre></div>
</div>
<p>On Red Hat Enterprise Linux and CentOS:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> yum install iscsi-initiator-utils   <span class="c1">#ensure iSCSI is installed</span>
<span class="gp">#</span> yum install device-mapper-multipath <span class="c1">#multipath modules</span>
<span class="gp">#</span> yum install sysfsutils sg3-utils    <span class="c1">#file system utilities</span>
<span class="gp">#</span> yum install scsitools               <span class="c1">#SCSI tools</span>
</pre></div>
</div>
<div class="section" id="multipath-configuration-file">
<h3>Multipath configuration file<a class="headerlink" href="emc-vmax-driver.html#multipath-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>The multipath configuration file may be edited for better management and
performance. Log in as a privileged user and make the following changes to
<code class="file docutils literal"><span class="pre">/etc/multipath.conf</span></code> on the  Compute (nova) node(s).</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>devices {
# Device attributed for EMC VMAX
    device {
            vendor &quot;EMC&quot;
            product &quot;SYMMETRIX&quot;
            path_grouping_policy multibus
            getuid_callout &quot;/lib/udev/scsi_id --page=pre-spc3-83 --whitelisted --device=/dev/%n&quot;
            path_selector &quot;round-robin 0&quot;
            path_checker tur
            features &quot;0&quot;
            hardware_handler &quot;0&quot;
            prio const
            rr_weight uniform
            no_path_retry 6
            rr_min_io 1000
            rr_min_io_rq 1
    }
}
</pre></div>
</div>
<p>You may need to reboot the host after installing the MPIO tools or restart
iSCSI and multipath services.</p>
<p>On Ubuntu:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> service open-iscsi restart
<span class="gp">#</span> service multipath-tools restart
</pre></div>
</div>
<p>On openSUSE, SUSE Linux Enterprise Server, Red Hat Enterprise Linux, and
CentOS:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl restart open-iscsi
<span class="gp">#</span> systemctl restart multipath-tools
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> lsblk
<span class="go">NAME                                       MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT</span>
<span class="go">sda                                          8:0    0     1G  0 disk</span>
<span class="go">..360000970000196701868533030303235 (dm-6) 252:6    0     1G  0 mpath</span>
<span class="go">sdb                                          8:16   0     1G  0 disk</span>
<span class="go">..360000970000196701868533030303235 (dm-6) 252:6    0     1G  0 mpath</span>
<span class="go">vda                                        253:0    0     1T  0 disk</span>
</pre></div>
</div>
</div>
<div class="section" id="openstack-configurations">
<h3>OpenStack configurations<a class="headerlink" href="emc-vmax-driver.html#openstack-configurations" title="Permalink to this headline">¶</a></h3>
<p>On Compute (nova) node, add the following flag in the <code class="docutils literal"><span class="pre">[libvirt]</span></code> section of
<code class="file docutils literal"><span class="pre">/etc/nova/nova.conf</span></code>:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">iscsi_use_multipath</span> <span class="o">=</span> <span class="s">True</span>
</pre></div>
</div>
<p>On cinder controller node, set the multipath flag to true in
<code class="file docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code>:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">use_multipath_for_image_xfer</span> <span class="o">=</span> <span class="s">True</span>
</pre></div>
</div>
<p>Restart <code class="docutils literal"><span class="pre">nova-compute</span></code> and <code class="docutils literal"><span class="pre">cinder-volume</span></code> services after the change.</p>
</div>
<div class="section" id="verify-you-have-multiple-initiators-available-on-the-compute-node-for-i-o">
<h3>Verify you have multiple initiators available on the compute node for I/O<a class="headerlink" href="emc-vmax-driver.html#verify-you-have-multiple-initiators-available-on-the-compute-node-for-i-o" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Create a 3GB VMAX volume.</p>
</li>
<li><p class="first">Create an instance from image out of native LVM storage or from VMAX
storage, for example, from a bootable volume</p>
</li>
<li><p class="first">Attach the 3GB volume to the new instance:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> multipath -ll
<span class="go">mpath102 (360000970000196700531533030383039) dm-3 EMC,SYMMETRIX</span>
<span class="go">size=3G features=&#39;1 queue_if_no_path&#39; hwhandler=&#39;0&#39; wp=rw</span>
<span class="go">&#39;-+- policy=&#39;round-robin 0&#39; prio=1 status=active</span>
<span class="go">33:0:0:1 sdb 8:16 active ready running</span>
<span class="go">&#39;- 34:0:0:1 sdc 8:32 active ready running</span>
</pre></div>
</div>
</li>
<li><p class="first">Use the <code class="docutils literal"><span class="pre">lsblk</span></code> command to see the multipath device:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> lsblk
<span class="go">NAME                                       MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT</span>
<span class="go">sdb                                          8:0    0     3G  0 disk</span>
<span class="go">..360000970000196700531533030383039 (dm-6) 252:6    0     3G  0 mpath</span>
<span class="go">sdc                                          8:16   0     3G  0 disk</span>
<span class="go">..360000970000196700531533030383039 (dm-6) 252:6    0     3G  0 mpath</span>
<span class="go">vda</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="consistency-group-support">
<h2>Consistency group support<a class="headerlink" href="emc-vmax-driver.html#consistency-group-support" title="Permalink to this headline">¶</a></h2>
<p>Consistency Groups operations are performed through the CLI using v2 of
the cinder API.</p>
<p><code class="file docutils literal"><span class="pre">/etc/cinder/policy.json</span></code> may need to be updated to enable new API calls
for Consistency groups.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even though the terminology is &#8216;Consistency Group&#8217; in OpenStack, a Storage
Group is created on the VMAX, and should not be confused with a VMAX
Consistency Group which is an SRDF feature. The Storage Group is not
associated with any Service Level.</p>
</div>
<div class="section" id="operations">
<h3>Operations<a class="headerlink" href="emc-vmax-driver.html#operations" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Create a Consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder --os-volume-api-version 2 consisgroup-create [--name &lt;name&gt;]</span>
<span class="go">[--description &lt;description&gt;] [--availability-zone &lt;availability-zone&gt;]</span>
<span class="go">&lt;volume-types&gt;</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder --os-volume-api-version <span class="m">2</span> consisgroup-create --name bronzeCG2 volume_type_1
</pre></div>
</div>
</li>
<li><p class="first">List Consistency Groups:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder consisgroup-list [--all-tenants [&lt;0|1&gt;]]</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-list
</pre></div>
</div>
</li>
<li><p class="first">Show a Consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder consisgroup-show &lt;consistencygroup&gt;</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-show 38a604b7-06eb-4202-8651-dbf2610a0827
</pre></div>
</div>
</li>
<li><p class="first">Update a consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder consisgroup-update [--name &lt;name&gt;] [--description &lt;description&gt;]</span>
<span class="go">[--add-volumes &lt;uuid1,uuid2,......&gt;] [--remove-volumes &lt;uuid3,uuid4,......&gt;]</span>
<span class="go">&lt;consistencygroup&gt;</span>
</pre></div>
</div>
<p>Change name:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-update --name updated_name 38a604b7-06eb-4202-8651-dbf2610a0827
</pre></div>
</div>
<p>Add volume(s) to a Consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-update --add-volumes af1ae89b-564b-4c7f-92d9-c54a2243a5fe 38a604b7-06eb-4202-8651-dbf2610a0827
</pre></div>
</div>
<p>Delete volume(s) from a Consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-update --remove-volumes af1ae89b-564b-4c7f-92d9-c54a2243a5fe 38a604b7-06eb-4202-8651-dbf2610a0827
</pre></div>
</div>
</li>
<li><p class="first">Create a snapshot of a Consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder cgsnapshot-create [--name &lt;name&gt;] [--description &lt;description&gt;]</span>
<span class="go">&lt;consistencygroup&gt;</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder cgsnapshot-create 618d962d-2917-4cca-a3ee-9699373e6625
</pre></div>
</div>
</li>
<li><p class="first">Delete a snapshot of a Consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder cgsnapshot-delete &lt;cgsnapshot&gt; [&lt;cgsnapshot&gt; ...]</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder cgsnapshot-delete 618d962d-2917-4cca-a3ee-9699373e6625
</pre></div>
</div>
</li>
<li><p class="first">Delete a Consistency Group:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder consisgroup-delete [--force] &lt;consistencygroup&gt; [&lt;consistencygroup&gt; ...]</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-delete --force 618d962d-2917-4cca-a3ee-9699373e6625
</pre></div>
</div>
</li>
<li><p class="first">Create a Consistency group from source:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">cinder consisgroup-create-from-src [--cgsnapshot &lt;cgsnapshot&gt;]</span>
<span class="go">[--source-cg &lt;source-cg&gt;] [--name &lt;name&gt;] [--description &lt;description&gt;]</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-create-from-src --source-cg 25dae184-1f25-412b-b8d7-9a25698fdb6d
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder consisgroup-create-from-src --cgsnapshot 618d962d-2917-4cca-a3ee-9699373e6625
</pre></div>
</div>
</li>
<li><p class="first">You can also create a volume in a consistency group in one step:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume create <span class="o">[</span>--consistency-group consistency-group&gt;<span class="o">]</span>
<span class="go">  [--description &lt;description&gt;]  [--type &lt;volume-type&gt;]</span>
<span class="go">  [--availability-zone &lt;availability-zone&gt;]  [--size &lt;size&gt;] &lt;name&gt;</span>
</pre></div>
</div>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume create --type volume_type_1 --consistency-group <span class="se">\</span>
  1de80c27-3b2f-47a6-91a7-e867cbe36462 --size <span class="m">1</span> cgBronzeVol
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="workload-planner-wlp">
<h2>Workload Planner (WLP)<a class="headerlink" href="emc-vmax-driver.html#workload-planner-wlp" title="Permalink to this headline">¶</a></h2>
<p>VMAX Hybrid allows you to manage application storage by using Service Level
Objectives (SLO) using policy based automation rather than the tiering in the
VMAX2. The VMAX Hybrid comes with up to 6 SLO policies defined. Each has a
set of workload characteristics that determine the drive types and mixes
which will be used for the SLO. All storage in the VMAX Array is virtually
provisioned, and all of the pools are created in containers called Storage
Resource Pools (SRP). Typically there is only one SRP, however there can be
more. Therefore, it is the same pool we will provision to but we can provide
different SLO/Workload combinations.</p>
<p>The SLO capacity is retrieved by interfacing with Unisphere Workload Planner
(WLP). If you do not set up this relationship then the capacity retrieved is
that of the entire SRP. This can cause issues as it can never be an accurate
representation of what storage is available for any given SLO and Workload
combination.</p>
<div class="section" id="enabling-wlp-on-unisphere">
<h3>Enabling WLP on Unisphere<a class="headerlink" href="emc-vmax-driver.html#enabling-wlp-on-unisphere" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>To enable WLP on Unisphere, click on the
<span class="menuselection">array‣Performance‣Settings</span>.</li>
<li>Set both the <span class="guilabel">Real Time</span> and the <span class="guilabel">Root Cause Analysis</span>.</li>
<li>Click <span class="guilabel">Register</span>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This should be set up ahead of time (allowing for several hours of data
collection), so that the Unisphere for VMAX Performance Analyzer can
collect rated metrics for each of the supported element types.</p>
</div>
</div>
<div class="section" id="using-testsmiprovider-to-add-statistics-access-point">
<h3>Using TestSmiProvider to add statistics access point<a class="headerlink" href="emc-vmax-driver.html#using-testsmiprovider-to-add-statistics-access-point" title="Permalink to this headline">¶</a></h3>
<p>After enabling WLP you must then enable SMI-S to gain access to the WLP data:</p>
<ol class="arabic">
<li><p class="first">Connect to the SMI-S Provider using TestSmiProvider.</p>
</li>
<li><p class="first">Navigate to the <span class="guilabel">Active</span> menu.</p>
</li>
<li><p class="first">Type <code class="docutils literal"><span class="pre">reg</span></code> and enter the noted responses to the questions:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">(EMCProvider:5989) ? reg</span>
<span class="go">Current list of statistics Access Points: ?</span>
<span class="go">Note: The current list will be empty if there are no existing Access Points.</span>
<span class="go">Add Statistics Access Point {y|n} [n]: y</span>
<span class="go">HostID [l2se0060.lss.emc.com]: ?</span>
<span class="go">Note: Enter the Unisphere for VMAX location using a fully qualified Host ID.</span>
<span class="go">Port [8443]: ?</span>
<span class="go">Note: The Port default is the Unisphere for VMAX default secure port. If the secure port</span>
<span class="go">is different for your Unisphere for VMAX setup, adjust this value accordingly.</span>
<span class="go">User [smc]: ?</span>
<span class="go">Note: Enter the Unisphere for VMAX username.</span>
<span class="go">Password [smc]: ?</span>
<span class="go">Note: Enter the Unisphere for VMAX password.</span>
</pre></div>
</div>
</li>
<li><p class="first">Type <code class="docutils literal"><span class="pre">reg</span></code> again to view the current list:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">(EMCProvider:5988) ? reg</span>
<span class="go">Current list of statistics Access Points:</span>
<span class="go">HostIDs:</span>
<span class="go">l2se0060.lss.emc.com</span>
<span class="go">PortNumbers:</span>
<span class="go">8443</span>
<span class="go">Users:</span>
<span class="go">smc</span>
<span class="go">Add Statistics Access Point {y|n} [n]: n</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="attach-and-detach-snapshots">
<h2>Attach and detach snapshots<a class="headerlink" href="emc-vmax-driver.html#attach-and-detach-snapshots" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">Attach</span> <span class="pre">snapshot</span></code> and <code class="docutils literal"><span class="pre">Detach</span> <span class="pre">snapshot</span></code> are used internally by
non-disruptive backup and backup snapshot. As of the Newton release,
it is possible to back up a volume, but not possible to directly back up
a snapshot. Volume back up functionality has been available ever since backups
were introduced into the Cinder service. The ability to back up a volume
directly is valuable because you can back up a volume in one step. Users can
take snapshots from the volumes as a way to protect their data. These snapshots
reside on the storage backend itself. Providing a way
to backup snapshots directly allows users to protect the snapshots
taken from the volumes on a backup device, separately from the storage
backend.</p>
<p>There are users who have taken many snapshots and would like a way to protect
these snapshots. The functionality to backup snapshots provides another layer
of data protection.</p>
<p>Please refer to <cite>backup and restore volumes and
snapshots &lt;https://docs.openstack.org/admin-guide/blockstorage-volume-backups.html&gt;</cite>
for more more information.</p>
<div class="section" id="enable-attach-and-detach-snapshot-functionality">
<h3>Enable attach and detach snapshot functionality<a class="headerlink" href="emc-vmax-driver.html#enable-attach-and-detach-snapshot-functionality" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Ensure that the <code class="docutils literal"><span class="pre">cinder-backup</span></code> service is running.</p>
</li>
<li><p class="first">The backup driver for the swift back end performs a volume backup to an
object storage system. To enable the swift backup driver, include the
following option in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> file:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">backup_driver = cinder.backup.drivers.swift</span>
</pre></div>
</div>
</li>
<li><p class="first">In order to force the volume to run attach and detach on the snapshot
and not the volume you need to put the following key-value pair in the
<code class="docutils literal"><span class="pre">[DEFAULT]</span></code> section of the <code class="docutils literal"><span class="pre">cinder.conf</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">backup_use_same_host = True</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<blockquote>
<div>You may need to increase the message queue timeout value which is 60 by
default in the <code class="docutils literal"><span class="pre">[DEFAULT]</span></code> section of the <code class="docutils literal"><span class="pre">cinder.conf</span></code>. This is
necessary because the snapshot may take more than this time.</div></blockquote>
<div class="last highlight-console"><div class="highlight"><pre><span></span><span class="go">rpc_response_timeout = 240</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="use-case-1-create-a-volume-backup-when-the-volume-is-in-use">
<h3>Use case 1 - Create a volume backup when the volume is in-use<a class="headerlink" href="emc-vmax-driver.html#use-case-1-create-a-volume-backup-when-the-volume-is-in-use" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Create a bootable volume and launch it so the volume status is in-use.</p>
</li>
<li><p class="first">Create a backup of the volume, where <code class="docutils literal"><span class="pre">VOLUME</span></code>
is the volume name or volume <code class="docutils literal"><span class="pre">ID</span></code>. This will initiate a snapshot attach
and a snapshot detach on a temporary snapshot:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup create --force VOLUME_ID</span>
</pre></div>
</div>
</li>
<li><p class="first">For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup create --force cba1ca83-b857-421a-87c3-df81eb9ea8ab</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="use-case-2-restore-a-backup-of-a-volume">
<h3>Use case 2 - Restore a backup of a volume<a class="headerlink" href="emc-vmax-driver.html#use-case-2-restore-a-backup-of-a-volume" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Restore the backup from Use case 1, where <code class="docutils literal"><span class="pre">BACKUP_ID</span></code> is the identifier of
the backup from Use case 1.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup restore BACKUP_ID VOLUME_ID</span>
</pre></div>
</div>
</li>
<li><p class="first">For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup restore ec7e17ec-ae3c-4495-9ee6-7f45c9a89572 cba1ca83-b857-421a-87c3-df81eb9ea8ab</span>
</pre></div>
</div>
</li>
</ol>
<p>Once complete, launch the back up as an instance, and it should be a
bootable volume.</p>
</div>
<div class="section" id="use-case-3-create-a-backup-of-a-snapshot">
<h3>Use case 3 - Create a backup of a snapshot<a class="headerlink" href="emc-vmax-driver.html#use-case-3-create-a-backup-of-a-snapshot" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Create a volume.</p>
</li>
<li><p class="first">Create a snapshot of the volume.</p>
</li>
<li><p class="first">Create a backup of the snapshot, where <code class="docutils literal"><span class="pre">VOLUME</span></code> is the volume name or
volume ID, <code class="docutils literal"><span class="pre">SNAPSHOT_ID</span></code> is the ID of the volume&#8217;s snapshot. This will
initiate a snapshot attach and a snapshot detach on the snapshot.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup create [--snapshot SNAPSHOT_ID} VOLUME</span>
</pre></div>
</div>
</li>
<li><p class="first">For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup create --snapshot 6ab440c2-80ef-4f16-ac37-2d9db938732c 9fedfc4a-5f25-4fa1-8d8d-d5bec91f72e0</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="use-case-4-restore-backup-of-a-snapshot">
<h3>Use case 4 - Restore backup of a snapshot<a class="headerlink" href="emc-vmax-driver.html#use-case-4-restore-backup-of-a-snapshot" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Restore the backup where <code class="docutils literal"><span class="pre">BACKUP_ID</span></code> is the identifier of the backup from
Use case 3.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup restore BACKUP_ID</span>
</pre></div>
</div>
</li>
<li><p class="first">For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">openstack backup restore ec7e17ec-ae3c-4495-9ee6-7f45c9a89572</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="all-flash-compression-support">
<h2>All Flash compression support<a class="headerlink" href="emc-vmax-driver.html#all-flash-compression-support" title="Permalink to this headline">¶</a></h2>
<p>On an All Flash array, the creation of any storage group has a compressed
attribute by default. Setting compression on a storage group does not mean
that all the devices will be immediately compressed. It means that for all
incoming writes compression will be considered. Setting compression <code class="docutils literal"><span class="pre">off</span></code> on
a storage group does not mean that all the devices will be uncompressed.
It means all the writes to compressed tracks will make these tracks
uncompressed.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This feature is only applicable for All Flash arrays, 250F, 450F or 850F.</p>
</div>
<div class="section" id="use-case-1-compression-disabled-create-attach-detach-and-delete-volume">
<h3>Use case 1 - Compression disabled create, attach, detach, and delete volume<a class="headerlink" href="emc-vmax-driver.html#use-case-1-compression-disabled-create-attach-detach-and-delete-volume" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Create a new volume type called <code class="docutils literal"><span class="pre">VMAX_COMPRESSION_DISABLED</span></code>.</li>
<li>Set an extra spec <code class="docutils literal"><span class="pre">volume_backend_name</span></code>.</li>
<li>Set a new extra spec <code class="docutils literal"><span class="pre">storagetype:disablecompression</span> <span class="pre">=</span> <span class="pre">True</span></code>.</li>
<li>Create a new volume.</li>
<li>Check in Unisphere or symcli to see if the volume
exists in storage group <code class="docutils literal"><span class="pre">OS-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-CD-SG</span></code>, and
compression is disabled on that storage group.</li>
<li>Attach the volume to an instance. Check in Unisphere or symcli to see if the
volume exists in storage group
<code class="docutils literal"><span class="pre">OS-&lt;shorthostname&gt;-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-CD-SG</span></code>, and
compression is disabled on that storage group.</li>
<li>Detach volume from instance. Check in Unisphere or symcli to see if the
volume exists in storage group <code class="docutils literal"><span class="pre">OS-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-CD-SG</span></code>,
and compression is disabled on that storage group.</li>
<li>Delete the volume. If this was the last volume in the
<code class="docutils literal"><span class="pre">OS-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-CD-SG</span></code> storage group,
it should also be deleted.</li>
</ol>
</div>
<div class="section" id="use-case-2-compression-disabled-create-delete-snapshot-and-delete-volume">
<h3>Use case 2 - Compression disabled create, delete snapshot and delete volume<a class="headerlink" href="emc-vmax-driver.html#use-case-2-compression-disabled-create-delete-snapshot-and-delete-volume" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Repeat steps 1-5 of Use case 1.</li>
<li>Create a snapshot. The volume should now exist in
<code class="docutils literal"><span class="pre">OS-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-CD-SG</span></code>.</li>
<li>Delete the snapshot. The volume should be removed from
<code class="docutils literal"><span class="pre">OS-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-CD-SG</span></code>.</li>
<li>Delete the volume. If this volume is the last volume in
<code class="docutils literal"><span class="pre">OS-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-CD-SG</span></code>, it should also be deleted.</li>
</ol>
</div>
<div class="section" id="use-case-3-retype-from-compression-disabled-to-compression-enabled">
<h3>Use case 3 - Retype from compression disabled to compression enabled<a class="headerlink" href="emc-vmax-driver.html#use-case-3-retype-from-compression-disabled-to-compression-enabled" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Repeat steps 1-4 of Use case 1.</li>
<li>Create a new volume type. For example <code class="docutils literal"><span class="pre">VMAX_COMPRESSION_ENABLED</span></code>.</li>
<li>Set extra spec <code class="docutils literal"><span class="pre">volume_backend_name</span></code> as before.</li>
<li>Set the new extra spec&#8217;s compression as
<code class="docutils literal"><span class="pre">storagetype:disablecompression</span> <span class="pre">=</span> <span class="pre">False</span></code> or DO NOT set this extra spec.</li>
<li>Retype from volume type <code class="docutils literal"><span class="pre">VMAX_COMPRESSION_DISABLED</span></code> to
<code class="docutils literal"><span class="pre">VMAX_COMPRESSION_ENABLED</span></code>.</li>
<li>Check in Unisphere or symcli to see if the volume exists in storage group
<code class="docutils literal"><span class="pre">OS-&lt;srp&gt;-&lt;servicelevel&gt;-&lt;workload&gt;-SG</span></code>, and compression is enabled on
that storage group.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If extra spec <code class="docutils literal"><span class="pre">storagetype:disablecompression</span></code> is set on a hybrid, it is
ignored because compression is not a feature on a VMAX3 hybrid.</p>
</div>
</div>
</div>
<div class="section" id="volume-replication-support">
<h2>Volume replication support<a class="headerlink" href="emc-vmax-driver.html#volume-replication-support" title="Permalink to this headline">¶</a></h2>
<div class="section" id="configure-the-source-and-target-arrays">
<h3>Configure the source and target arrays<a class="headerlink" href="emc-vmax-driver.html#configure-the-source-and-target-arrays" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">Configure a synchronous SRDF group between the chosen source and target
arrays for the VMAX cinder driver to use. The source array must correspond
with the <code class="docutils literal"><span class="pre">&lt;Array&gt;</span></code> entry in the VMAX XML file.</p>
</li>
<li><p class="first">Select both the director and the ports for the SRDF emulation to use on
both sides. Bear in mind that network topology is important when choosing
director endpoints. Currently, the only supported mode is <cite>Synchronous</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For full failover functionality, the source and target VMAX arrays must be
discovered and managed by the same SMI-S/ECOM server, locally connected
for example. This SMI-S/ ECOM server cannot be embedded - it can be
installed on a physical server or a VM hosted by an ESX server only.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">With both arrays being managed by the one SMI-S server, it is the cloud
storage administrators responsibility to account for a DR scenario where the
management (SMI-S) server goes down as well as the primary array. In that
event, the details and credentials of a back-up SMI-S server can be passed
in to the XML file, and the VMAX cinder driver can be rebooted. It would be
advisable to have the SMI-S server at a third location (separate from both
arrays) if possible.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the source and target arrays are not managed by the same management
server (that is, the target array is remotely connected to server), in the
event of a full disaster scenario (for example, the primary array is
completely lost and all connectivity to it is gone), the SMI-S server
would no longer be able to contact the target array. In this scenario,
the volumes would be automatically failed over to the target array, but
administrator intervention would be required to either; configure the
target (remote) array as local to the current SMI-S server, or enter
the details to the XML file of a second SMI-S server, which is locally
connected to the target array, and restart the cinder volume service.</p>
</div>
</li>
<li><p class="first">Enable replication in <code class="docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code>.
To enable the replication functionality in VMAX cinder driver, it is
necessary to create a replication volume-type. The corresponding
back-end stanza in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> for this volume-type must then
include a <code class="docutils literal"><span class="pre">replication_device</span></code> parameter. This parameter defines a
single replication target array and takes the form of a list of key
value pairs.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">enabled_backends = VMAX_FC_REPLICATION</span>
<span class="go">[VMAX_FC_REPLICATION]</span>
<span class="go">volume_driver = cinder.volume.drivers.dell_emc.vmax.fc.VMAXFCDriver</span>
<span class="go">cinder_emc_config_file = /etc/cinder/cinder_emc_config_VMAX_FC_REPLICATION.xml</span>
<span class="go">volume_backend_name = VMAX_FC_REPLICATION</span>
<span class="go">replication_device = target_device_id:000197811111, remote_port_group:os-failover-pg, remote_pool:SRP_1, rdf_group_label: 28_11_07, allow_extend:False</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">target_device_id</span></code> is a unique VMAX array serial number of the target
array. For full failover functionality, the source and target VMAX arrays
must be discovered and managed by the same SMI-S/ECOM server.
That is, locally connected. Follow the instructions in the SMI-S release
notes.</li>
<li><code class="docutils literal"><span class="pre">remote_port_group</span></code> is the name of a VMAX port group that has been
pre-configured to expose volumes managed by this backend in the event
of a failover. Make sure that this portgroup contains either all FC or
all iSCSI port groups (for a given back end), as appropriate for the
configured driver (iSCSI or FC).</li>
<li><code class="docutils literal"><span class="pre">remote_pool</span></code> is the unique pool name for the given target array.</li>
<li><code class="docutils literal"><span class="pre">rdf_group_label</span></code> is the name of a VMAX SRDF group (Synchronous) that
has been pre-configured between the source and target arrays.</li>
<li><code class="docutils literal"><span class="pre">allow_extend</span></code> is a flag for allowing the extension of replicated volumes.
To extend a volume in an SRDF relationship, this relationship must first be
broken, both the source and target volumes are then independently extended,
and then the replication relationship is re-established. As the SRDF link
must be severed, due caution should be exercised when performing this
operation. If not explicitly set, this flag defaults to <code class="docutils literal"><span class="pre">False</span></code>.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Service Level and Workload: An attempt will be made to create a storage
group on the target array with the same service level and workload combination
as the primary. However, if this combination is unavailable on the target
(for example, in a situation where the source array is a Hybrid, the target array
is an All Flash, and an All Flash incompatible SLO like Bronze is
configured), no SLO will be applied.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The VMAX cinder drivers can support a single replication target per
back-end, that is we do not support Concurrent SRDF or Cascaded SRDF.
Ensure there is only a single <code class="docutils literal"><span class="pre">.replication_device.</span></code> entry per
back-end stanza.</p>
</div>
</li>
<li><p class="first">Create a <code class="docutils literal"><span class="pre">replication-enabled</span></code> volume type. Once the
<code class="docutils literal"><span class="pre">replication_device</span></code> parameter has been entered in the VMAX
backend entry in the <code class="docutils literal"><span class="pre">cinder.conf</span></code>, a corresponding volume type
needs to be created <code class="docutils literal"><span class="pre">replication_enabled</span></code> property set. See
above <code class="docutils literal"><span class="pre">Setup</span> <span class="pre">VMAX</span> <span class="pre">drivers</span></code> for details.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume <span class="nb">type</span> <span class="nb">set</span> --property <span class="nv">replication_enabled</span> <span class="o">=</span> <span class="sb">``</span>&lt;is&gt; True<span class="sb">``</span> VMAX_FC_REPLICATION
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="volume-replication-interoperability-with-other-features">
<h3>Volume replication interoperability with other features<a class="headerlink" href="emc-vmax-driver.html#volume-replication-interoperability-with-other-features" title="Permalink to this headline">¶</a></h3>
<p>Most features are supported, except for the following:</p>
<ul>
<li><p class="first">There is no OpenStack Consistency Group support for replication-enabled VMAX
volumes.</p>
</li>
<li><p class="first">Storage-assisted retype operations on replication-enabled VMAX volumes
(moving from a non-replicated type to a replicated-type and vice-versa.
Moving to another SLO/workload combination, for example) are not supported.</p>
</li>
<li><p class="first">The image volume cache functionality is supported (enabled by setting
<code class="docutils literal"><span class="pre">image_volume_cache_enabled</span> <span class="pre">=</span> <span class="pre">True</span></code>), but one of two actions must be taken
when creating the cached volume:</p>
<ul class="simple">
<li>The first boot volume created on a backend (which will trigger the
cached volume to be created) should be the smallest necessary size.
For example, if the minimum size disk to hold an image is 5GB, create
the first boot volume as 5GB.</li>
<li>Alternatively, ensure that the <code class="docutils literal"><span class="pre">allow_extend</span></code> option in the
<code class="docutils literal"><span class="pre">replication_device</span> <span class="pre">parameter</span></code> is set to <code class="docutils literal"><span class="pre">True</span></code>.</li>
</ul>
<p>This is because the initial boot volume is created at the minimum required
size for the requested image, and then extended to the user specified size.</p>
</li>
</ul>
</div>
<div class="section" id="failover-host">
<h3>Failover host<a class="headerlink" href="emc-vmax-driver.html#failover-host" title="Permalink to this headline">¶</a></h3>
<p>In the event of a disaster, or where there is required downtime, upgrade
of the primary array for example, the administrator can issue the failover
host command to failover to the configured target:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder failover-host cinder_host@VMAX_FC_REPLICATION#Diamond+SRP_1+000192800111
</pre></div>
</div>
<p>If the primary array becomes available again, you can initiate a failback
using the same command and specifying <code class="docutils literal"><span class="pre">--backend_id</span> <span class="pre">default</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder failover-host <span class="se">\</span>
  cinder_host@VMAX_FC_REPLICATION#Diamond+SRP_1+000192800111 <span class="se">\</span>
  --backend_id default
</pre></div>
</div>
</div>
</div>
<div class="section" id="volume-retype-storage-assisted-volume-migration">
<h2>Volume retype -  storage assisted volume migration<a class="headerlink" href="emc-vmax-driver.html#volume-retype-storage-assisted-volume-migration" title="Permalink to this headline">¶</a></h2>
<p>Volume retype with storage assisted migration is supported now for
VMAX3 arrays. Cinder requires that for storage assisted migration, a
volume cannot be retyped across backends. For using storage assisted volume
retype, follow these steps:</p>
<ol class="arabic">
<li><p class="first">Add the parameter <code class="docutils literal"><span class="pre">multi_pool_support</span></code> to the configuration group in the
<code class="docutils literal"><span class="pre">/etc/cinder/cinder.conf</span></code> file and set it to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">[CONF_GROUP_FC]</span>
<span class="go">volume_driver = cinder.volume.drivers.dell_emc.vmax.fc.VMAXFCDriver</span>
<span class="go">cinder_emc_config_file = /etc/cinder/cinder_emc_config_CONF_GROUP_FC.xml</span>
<span class="go">volume_backend_name = FC_backend</span>
<span class="go">multi_pool_support = True</span>
</pre></div>
</div>
</li>
<li><p class="first">Configure a single backend per SRP for the <code class="docutils literal"><span class="pre">VMAX</span></code> (Only VMAX3 arrays).
This is different from the regular configuration where one backend is
configured per service level.</p>
</li>
<li><p class="first">Create the <code class="docutils literal"><span class="pre">/etc/cinder/cinder_emc_config_CONF_GROUP_FC.xml</span></code> and add
the following lines to the XML for VMAX All Flash and Hybrid.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">&lt;?xml version = &quot;1.0&quot; encoding = &quot;UTF-8&quot; ?&gt;</span>
<span class="go">&lt;EMC&gt;</span>
<span class="go">   &lt;EcomServerIp&gt;1.1.1.1&lt;/EcomServerIp&gt;</span>
<span class="go">   &lt;EcomServerPort&gt;00&lt;/EcomServerPort&gt;</span>
<span class="go">   &lt;EcomUserName&gt;user1&lt;/EcomUserName&gt;</span>
<span class="go">   &lt;EcomPassword&gt;password1&lt;/EcomPassword&gt;</span>
<span class="go">   &lt;PortGroups&gt;</span>
<span class="go">      &lt;PortGroup&gt;OS-PORTGROUP1-PG&lt;/PortGroup&gt;</span>
<span class="go">      &lt;PortGroup&gt;OS-PORTGROUP2-PG&lt;/PortGroup&gt;</span>
<span class="go">   &lt;/PortGroups&gt;</span>
<span class="go">   &lt;Array&gt;111111111111&lt;/Array&gt;</span>
<span class="go">   &lt;Pool&gt;SRP_1&lt;/Pool&gt;</span>
<span class="go">&lt;/EMC&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no need to specify the Service Level and Workload in the XML
file. A single XML file corresponding to the backend is sufficient
instead of creating one each for the desired Service Level and Workload
combination.</p>
</div>
</li>
<li><p class="first">Once the backend is configured in the <code class="docutils literal"><span class="pre">cinder.conf</span></code> file and the VMAX
specific configuration XML created, restart the cinder volume service for
the changes to take place.</p>
</li>
<li><p class="first">Run the command <code class="docutils literal"><span class="pre">cinder</span> <span class="pre">get-pools</span> <span class="pre">--detail</span></code> to query for the pool
information. This should list all the available Service Level and Workload
combinations available for the SRP as pools belonging to the same backend.</p>
</li>
<li><p class="first">Use the following examples of OpenStack commands to create various volume
types. The below example demonstrates creating a volume type for Diamond
Service Level and OLTP workload.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack volume <span class="nb">type</span> create VMAX_FC_DIAMOND_OLTP
<span class="gp">$</span> openstack volume <span class="nb">type</span> <span class="nb">set</span> --property <span class="nv">volume_backend_name</span><span class="o">=</span>FC_backend VMAX_FC_DIAMOND_OLTP
<span class="gp">$</span> openstack volume <span class="nb">type</span> <span class="nb">set</span> --property <span class="nv">pool_name</span><span class="o">=</span>Diamond+OLTP+SRP_1+111111111111 VMAX_FC_DIAMOND_OLTP
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Create as many volume types as the number of Service Level and Workload
(available) combinations which you are going to use for provisioning
volumes. The <code class="docutils literal"><span class="pre">pool_name</span></code> is the additional property which has to be set
and is of the format: <code class="docutils literal"><span class="pre">&lt;ServiceLevel&gt;+&lt;Workload&gt;+&lt;SRP&gt;+&lt;Array</span> <span class="pre">ID&gt;</span></code>.
This can be obtained from the output of the <code class="docutils literal"><span class="pre">cinder</span> <span class="pre">get-pools</span> <span class="pre">--detail</span></code>.</p>
</div>
</li>
<li><p class="first">For migrating a volume from one Service Level or Workload combination to
another, use volume retype with the migration-policy to on-demand. The
target volume type should have the same <code class="docutils literal"><span class="pre">volume_backend_name</span></code> configured
and should have the desired <code class="docutils literal"><span class="pre">pool_name</span></code> to which you are trying to retype
to.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> cinder retype --migration-policy on-demand &lt;volume&gt; &lt;volume-type&gt;
</pre></div>
</div>
</li>
</ol>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="emc-scaleio-driver.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: EMC ScaleIO Block Storage driver configuration"></i></a>
          
          
            <a href="emc-vnx-driver.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Dell EMC VNX driver"></i></a>
          
            <a id="logABugLink3" href="emc-vmax-driver.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2018-02-08 07:41</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="emc-vmax-driver.html#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../config-overview.html">OpenStack configuration overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../common-configurations.html">Common configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../application-catalog.html">Application Catalog service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bare-metal.html">Bare Metal service</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../block-storage.html">Block Storage service</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../block-storage-overview.html">Introduction to the Block Storage service</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../volume-drivers.html">Volume drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backup-drivers.html">Backup drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schedulers.html">Block Storage schedulers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logs.html">Log files used by Block Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fc-zoning.html">Fibre Channel Zone Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nested-quota.html">Nested quotas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../volume-encryption.html">Volume encryption supported by the key manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config-options.html">Additional options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../samples/index.html">Block Storage service sample configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tables/conf-changes/cinder.html">New, updated, and deprecated options in Ocata for Block Storage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../clustering.html">Clustering service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../compute.html">Compute service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data-processing.html">Data Processing service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../database.html">Database service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../identity.html">Identity service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../image.html">Image service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../message.html">Message service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking.html">Networking service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../object-storage.html">Object Storage service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../orchestration.html">Orchestration service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../shared-file-systems.html">Shared File Systems service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../telemetry.html">Telemetry service</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../policy-yaml-file.html">The policy.yaml file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../policy-json-file.html">The policy.json file</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../../_static/js/jquery-3.1.1.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "block-storage/drivers/emc-vmax-driver" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/config-reference/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 4ad6860c2d8531fd122db0b8b89a923cefdb682f";
        var bugProject = "openstack-manuals";
        var bugTitle = "Dell EMC VMAX iSCSI and FC drivers in Configuration Reference";
    var fieldTags = "config-reference";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 15.0.0 on 2018-02-08 07:41";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>