<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Xen via libvirt</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="../_static/css/bootstrap.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="../_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../_static/css/font-awesome.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="../_static/css/combined.css" rel="stylesheet">
<link href="../_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="../_static/sphinxmark.css" type="text/css" />
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="https://docs.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/software/security/">Security</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/telecoms-and-nfv/">Telecoms and NFV</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers & ISVs</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/marketplace/coa/">Get Certified</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://ask.openstack.org/">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/videos/">Summit Videos</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/analysts/">Analyst Reports</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
      <h2>Xen via libvirt</h2>
    
  </div>
  <div class="docs-actions">
    
    <a href="hypervisor-xen-api.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: XenServer (and other XAPI based Xen variants)"></i></a>
    
    
    <a href="hypervisor-lxc.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: LXC (Linux containers)"></i></a>
    
    <a id="logABugLink1" href="hypervisor-xen-libvirt.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2018-02-08 07:41</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="../index.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="hypervisor-xen-libvirt.html#">Xen via libvirt</a><ul>
<li><a class="reference internal" href="hypervisor-xen-libvirt.html#installing-xen-with-libvirt">Installing Xen with libvirt</a></li>
<li><a class="reference internal" href="hypervisor-xen-libvirt.html#configuring-xen-with-libvirt">Configuring Xen with libvirt</a></li>
<li><a class="reference internal" href="hypervisor-xen-libvirt.html#additional-configuration-options">Additional configuration options</a></li>
<li><a class="reference internal" href="hypervisor-xen-libvirt.html#troubleshoot-xen-with-libvirt">Troubleshoot Xen with libvirt</a></li>
<li><a class="reference internal" href="hypervisor-xen-libvirt.html#known-issues">Known issues</a></li>
<li><a class="reference internal" href="hypervisor-xen-libvirt.html#additional-information-and-resources">Additional information and resources</a></li>
</ul>
</li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="xen-via-libvirt">
<h1>Xen via libvirt<a class="headerlink" href="hypervisor-xen-libvirt.html#xen-via-libvirt" title="Permalink to this headline">¶</a></h1>
<p>OpenStack Compute supports the Xen Project Hypervisor (or Xen). Xen can be
integrated with OpenStack Compute via the <a class="reference external" href="http://libvirt.org/">libvirt</a>
<a class="reference external" href="http://wiki.xen.org/wiki/Choice_of_Toolstacks">toolstack</a> or via the
<a class="reference external" href="http://xenproject.org/developers/teams/xapi.html">XAPI</a>
<a class="reference external" href="http://wiki.xen.org/wiki/Choice_of_Toolstacks">toolstack</a>.
This section describes how to set up OpenStack Compute with Xen and libvirt.
For information on how to set up Xen with XAPI refer to
<a class="reference internal" href="hypervisor-xen-api.html"><span class="doc">XenServer (and other XAPI based Xen variants)</span></a>.</p>
<div class="section" id="installing-xen-with-libvirt">
<h2>Installing Xen with libvirt<a class="headerlink" href="hypervisor-xen-libvirt.html#installing-xen-with-libvirt" title="Permalink to this headline">¶</a></h2>
<p>At this stage we recommend using the baseline that we use for the
<a class="reference external" href="http://wiki.xenproject.org/wiki/OpenStack_CI_Loop_for_Xen-Libvirt">Xen Project OpenStack CI Loop</a>,
which contains the most recent
stability fixes to both Xen and libvirt.</p>
<p><a class="reference external" href="http://www.xenproject.org/downloads/xen-archives/xen-45-series/xen-451.html">Xen 4.5.1</a>
(or newer) and <a class="reference external" href="http://libvirt.org/sources/">libvirt 1.2.15</a>
(or newer) contain the minimum required OpenStack improvements for Xen.
Although libvirt 1.2.15 works with Xen, libvirt 1.3.2 or newer is recommended.
The necessary Xen changes have also been backported to the Xen 4.4.3 stable
branch. Please check with the Linux and FreeBSD distros you are intending to
use as <a class="reference external" href="http://wiki.xenproject.org/wiki/Category:Host_Install">Dom 0</a>,
whether the relevant version of Xen and libvirt are available as installable
packages.</p>
<p>The latest releases of Xen and libvirt packages that fulfil the above
minimum requirements for the various openSUSE distributions can always be
found and installed from the <a class="reference external" href="https://build.opensuse.org/project/show/Virtualization">Open Build Service</a>
Virtualization project.
To install these latest packages, add the Virtualization repository to your
software management stack and get the newest packages from there.
More information about the latest Xen and libvirt packages are available
<a class="reference external" href="https://build.opensuse.org/package/show/Virtualization/xen">here</a> and
<a class="reference external" href="https://build.opensuse.org/package/show/Virtualization/libvirt">here</a>.</p>
<p>Alternatively, it is possible to use the Ubuntu LTS 14.04 Xen Package
<strong>4.4.1-0ubuntu0.14.04.4</strong> (Xen 4.4.1) and apply the patches outlined <a class="reference external" href="http://wiki.xenproject.org/wiki/OpenStack_CI_Loop_for_Xen-Libvirt#Baseline">here</a>.
You can also use the Ubuntu LTS 14.04 libvirt package <strong>1.2.2
libvirt_1.2.2-0ubuntu13.1.7</strong> as baseline and update it to libvirt version
1.2.15, or 1.2.14 with the patches outlined <a class="reference external" href="http://wiki.xenproject.org/wiki/OpenStack_CI_Loop_for_Xen-Libvirt#Baseline">here</a>
applied.
Note that this will require rebuilding these packages partly from source.</p>
<p>For further information and latest developments, you may want to consult
the Xen Project&#8217;s <a class="reference external" href="http://lists.xenproject.org/cgi-bin/mailman/listinfo/wg-openstack">mailing lists for OpenStack related issues and questions</a>.</p>
</div>
<div class="section" id="configuring-xen-with-libvirt">
<h2>Configuring Xen with libvirt<a class="headerlink" href="hypervisor-xen-libvirt.html#configuring-xen-with-libvirt" title="Permalink to this headline">¶</a></h2>
<p>To enable Xen via libvirt, ensure the following options are set in
<code class="docutils literal"><span class="pre">/etc/nova/nova.conf</span></code> on all hosts running the <code class="docutils literal"><span class="pre">nova-compute</span></code> service.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">compute_driver</span> <span class="o">=</span> <span class="s">libvirt.LibvirtDriver</span>

<span class="k">[libvirt]</span>
<span class="na">virt_type</span> <span class="o">=</span> <span class="s">xen</span>
</pre></div>
</div>
</div>
<div class="section" id="additional-configuration-options">
<h2>Additional configuration options<a class="headerlink" href="hypervisor-xen-libvirt.html#additional-configuration-options" title="Permalink to this headline">¶</a></h2>
<p>Use the following as a guideline for configuring Xen for use in OpenStack:</p>
<ol class="arabic">
<li><p class="first"><strong>Dom0 memory</strong>: Set it between 1GB and 4GB by adding the following
parameter to the Xen Boot Options in the <a class="reference external" href="http://xenbits.xen.org/docs/unstable/misc/xen-command-line.html">grub.conf</a> file.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">dom0_mem</span><span class="o">=</span><span class="s">1024M</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The above memory limits are suggestions and should be based on the
available compute host resources. For large hosts that will run many
hundreds of instances, the suggested values may need to be higher.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The location of the grub.conf file depends on the host Linux
distribution that you are using. Please refer to the distro
documentation for more details (see <a class="reference external" href="http://wiki.xenproject.org/wiki/Category:Host_Install">Dom 0</a> for more resources).</p>
</div>
</li>
<li><p class="first"><strong>Dom0 vcpus</strong>: Set the virtual CPUs to 4 and employ CPU pinning by adding
the following parameters to the Xen Boot Options in the <a class="reference external" href="http://xenbits.xen.org/docs/unstable/misc/xen-command-line.html">grub.conf</a> file.</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">dom0_max_vcpus</span><span class="o">=</span><span class="s">4 dom0_vcpus_pin</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that the above virtual CPU limits are suggestions and should be
based on the available compute host resources. For large hosts, that
will run many hundred of instances, the suggested values may need to
be higher.</p>
</div>
</li>
<li><p class="first"><strong>PV vs HVM guests</strong>: A Xen virtual machine can be paravirtualized (PV)
or hardware virtualized (HVM). The virtualization mode determines the
interaction between Xen, Dom 0, and the guest VM&#8217;s kernel. PV guests are
aware of the fact that they are virtualized and will co-operate with Xen
and Dom 0. The choice of virtualization mode determines performance
characteristics. For an overview of Xen virtualization modes, see
<a class="reference external" href="http://wiki.xen.org/wiki/Xen_Overview#Guest_Types">Xen Guest Types</a>.</p>
<p>In OpenStack, customer VMs may run in either PV or HVM mode.
The mode is a property of the operating system image used by the VM, and
is changed by adjusting the image metadata stored in the Image service.
The image metadata can be changed using the <strong class="command">openstack</strong> commands.</p>
<p>To choose one of the HVM modes (HVM, HVM with PV Drivers or PVHVM),
use <strong class="command">openstack</strong> to set the <code class="docutils literal"><span class="pre">vm_mode</span></code> property to <code class="docutils literal"><span class="pre">hvm</span></code>.</p>
<p>To choose one of the HVM modes (HVM, HVM with PV Drivers or PVHVM),
use one of the following two commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack image <span class="nb">set</span> --property <span class="nv">vm_mode</span><span class="o">=</span>hvm IMAGE
</pre></div>
</div>
<p>To chose PV mode, which is supported by NetBSD, FreeBSD and Linux,
use one of the following two commands</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack image <span class="nb">set</span> --property <span class="nv">vm_mode</span><span class="o">=</span>xen IMAGE
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The default for virtualization mode in nova is PV mode.</p>
</div>
</li>
<li><p class="first"><strong>Image formats</strong>: Xen supports raw, qcow2 and vhd image formats.
For more information on image formats, refer to the <a class="reference external" href="https://docs.openstack.org/image-guide/introduction.html">OpenStack Virtual
Image Guide</a>
and the <a class="reference external" href="http://wiki.xenproject.org/wiki/Storage_options">Storage Options Guide on the Xen Project Wiki</a>.</p>
</li>
<li><p class="first"><strong>Image metadata</strong>: In addition to the <code class="docutils literal"><span class="pre">vm_mode</span></code> property discussed
above, the <code class="docutils literal"><span class="pre">hypervisor_type</span></code> property is another important component
of the image metadata, especially if your cloud contains mixed hypervisor
compute nodes. Setting the <code class="docutils literal"><span class="pre">hypervisor_type</span></code> property allows the nova
scheduler to select a compute node running the specified hypervisor when
launching instances of the image. Image metadata such as <code class="docutils literal"><span class="pre">vm_mode</span></code>,
<code class="docutils literal"><span class="pre">hypervisor_type</span></code>, architecture, and others can be set when importing
the image to the Image service. The metadata can also be changed using
the <strong class="command">openstack</strong> commands:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack image <span class="nb">set</span> --property <span class="nv">hypervisor_type</span><span class="o">=</span>xen <span class="nv">vm_mode</span><span class="o">=</span>hvm IMAGE
</pre></div>
</div>
<p>For more more information on image metadata, refer to the
<a class="reference external" href="https://docs.openstack.org/image-guide/image-metadata.html">OpenStack Virtual Image Guide</a>.</p>
</li>
<li><p class="first"><strong>Libguestfs file injection</strong>: OpenStack compute nodes can use <a class="reference external" href="http://libguestfs.org/">libguestfs</a> to inject files into an instance&#8217;s image prior
to launching the instance. libguestfs uses libvirt&#8217;s QEMU driver to start a
qemu process, which is then used to inject files into the image. When using
libguestfs for file injection, the compute node must have the libvirt qemu
driver installed, in addition to the Xen driver. In RPM based distributions,
the qemu driver is provided by the <code class="docutils literal"><span class="pre">libvirt-daemon-qemu</span></code> package. In
Debian and Ubuntu, the qemu driver is provided by the <code class="docutils literal"><span class="pre">libvirt-bin</span></code>
package.</p>
</li>
</ol>
<p>To customize the libvirt driver, use the configuration option settings
documented in <a class="reference internal" href="config-options.html#nova-libvirt"><span class="std std-ref">Description of libvirt configuration options</span></a>.</p>
</div>
<div class="section" id="troubleshoot-xen-with-libvirt">
<h2>Troubleshoot Xen with libvirt<a class="headerlink" href="hypervisor-xen-libvirt.html#troubleshoot-xen-with-libvirt" title="Permalink to this headline">¶</a></h2>
<p><strong>Important log files</strong>: When an instance fails to start, or when you come
across other issues, you should first consult the following log files:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">/var/log/nova/compute.log</span></code>
(for more information refer to <a class="reference internal" href="logs.html#nova-logs"><span class="std std-ref">Compute log files</span></a>).</li>
<li><code class="docutils literal"><span class="pre">/var/log/libvirt/libxl/libxl-driver.log</span></code>,</li>
<li><code class="docutils literal"><span class="pre">/var/log/xen/qemu-dm-${instancename}.log</span></code>,</li>
<li><code class="docutils literal"><span class="pre">/var/log/xen/xen-hotplug.log</span></code>,</li>
<li><code class="docutils literal"><span class="pre">/var/log/xen/console/guest-${instancename}</span></code>
(to enable see <a class="reference external" href="http://wiki.xen.org/wiki/Reporting_Bugs_against_Xen#Guest_console_logs">Enabling Guest Console Logs</a>)
and</li>
<li>Host Console Logs (read <a class="reference external" href="http://wiki.xen.org/wiki/Reporting_Bugs_against_Xen#Host_console_logs">Enabling and Retrieving Host Console Logs</a>).</li>
</ul>
<p>If you need further help you can ask questions on the mailing lists
<a class="reference external" href="http://lists.xenproject.org/cgi-bin/mailman/listinfo/xen-users">xen-users&#64;</a>, <a class="reference external" href="http://lists.xenproject.org/cgi-bin/mailman/listinfo/wg-openstack">wg-openstack&#64;</a> or <a class="reference external" href="http://wiki.xen.org/wiki/Reporting_Bugs_against_Xen">raise a bug</a> against Xen.</p>
</div>
<div class="section" id="known-issues">
<h2>Known issues<a class="headerlink" href="hypervisor-xen-libvirt.html#known-issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Networking</strong>: Xen via libvirt is currently only supported with
nova-network. Fixes for a number of bugs are currently being worked on to
make sure that Xen via libvirt will also work with OpenStack Networking
(neutron).</li>
<li><strong>Live migration</strong>: Live migration is supported in the libvirt libxl driver
since version 1.2.5. However, there were a number of issues when used with
OpenStack, in particular with libvirt migration protocol compatibility. It
is worth mentioning that libvirt 1.3.0 addresses most of these issues.
We do however recommend using libvirt 1.3.2, which is fully supported and
tested as part of the Xen Project CI loop. It addresses live migration
monitoring related issues and adds support for peer-to-peer migration mode,
which nova relies on.</li>
<li><strong>Live migration monitoring</strong>: On compute nodes running Kilo or later, live
migration monitoring relies on libvirt APIs that are only implemented from
libvirt version 1.3.1 onwards. When attempting to live migrate, the migration
monitoring thread would crash and leave the instance state as &#8220;MIGRATING&#8221;. If
you experience such an issue and you are running on a version released before
libvirt 1.3.1, make sure you backport libvirt commits ad71665 and b7b4391
from upstream.</li>
</ul>
</div>
<div class="section" id="additional-information-and-resources">
<h2>Additional information and resources<a class="headerlink" href="hypervisor-xen-libvirt.html#additional-information-and-resources" title="Permalink to this headline">¶</a></h2>
<p>The following section contains links to other useful resources.</p>
<ul class="simple">
<li><a class="reference external" href="http://wiki.xenproject.org/wiki/OpenStack">wiki.xenproject.org/wiki/OpenStack</a> - OpenStack Documentation on the Xen Project wiki</li>
<li><a class="reference external" href="http://wiki.xenproject.org/wiki/OpenStack_CI_Loop_for_Xen-Libvirt">wiki.xenproject.org/wiki/OpenStack_CI_Loop_for_Xen-Libvirt</a>
- Information about the Xen Project OpenStack CI Loop</li>
<li><a class="reference external" href="http://wiki.xenproject.org/wiki/OpenStack_via_DevStack">wiki.xenproject.org/wiki/OpenStack_via_DevStack</a>
- How to set up OpenStack via DevStack</li>
<li><a class="reference external" href="http://lists.xenproject.org/cgi-bin/mailman/listinfo/wg-openstack">Mailing lists for OpenStack related issues and questions</a>
- This list is dedicated to coordinating bug fixes and issues across Xen,
libvirt and OpenStack and the CI loop.</li>
</ul>
</div>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="hypervisor-xen-api.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: XenServer (and other XAPI based Xen variants)"></i></a>
          
          
            <a href="hypervisor-lxc.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: LXC (Linux containers)"></i></a>
          
            <a id="logABugLink3" href="hypervisor-xen-libvirt.html" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2018-02-08 07:41</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="../_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="hypervisor-xen-libvirt.html#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="../index.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../config-overview.html">OpenStack configuration overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../common-configurations.html">Common configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../application-catalog.html">Application Catalog service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bare-metal.html">Bare Metal service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block-storage.html">Block Storage service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clustering.html">Clustering service</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../compute.html">Compute service</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config-options.html">The full set of available options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tables/conf-changes/nova.html">New, updated, and deprecated options in Ocata for Compute</a></li>
<li class="toctree-l2"><a class="reference internal" href="nova-conf.html">Overview of nova.conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">Compute API configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="resize.html">Configure resize</a></li>
<li class="toctree-l2"><a class="reference internal" href="database-connections.html">Database configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="fibre-channel.html">Fibre Channel support in Compute</a></li>
<li class="toctree-l2"><a class="reference internal" href="iscsi-offload.html">iSCSI interface and offload support in Compute</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="hypervisors.html">Hypervisors</a></li>
<li class="toctree-l2"><a class="reference internal" href="schedulers.html">Compute schedulers</a></li>
<li class="toctree-l2"><a class="reference internal" href="cells.html">Cells (v1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="logs.html">Compute log files</a></li>
<li class="toctree-l2"><a class="reference internal" href="nova-conf-samples.html">Example nova.conf configuration files</a></li>
<li class="toctree-l2"><a class="reference internal" href="samples/index.html">Compute service sample configuration files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-processing.html">Data Processing service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../database.html">Database service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../identity.html">Identity service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../image.html">Image service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../message.html">Message service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking.html">Networking service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-storage.html">Object Storage service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orchestration.html">Orchestration service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shared-file-systems.html">Shared File Systems service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../telemetry.html">Telemetry service</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../policy-yaml-file.html">The policy.yaml file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../policy-json-file.html">The policy.json file</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="../_static/js/jquery-3.1.1.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="../_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="../_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="../_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "compute/hypervisor-xen-libvirt" + ".rst";
        gitURL = "Source: https://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/config-reference/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 4ad6860c2d8531fd122db0b8b89a923cefdb682f";
        var bugProject = "openstack-manuals";
        var bugTitle = "Xen via libvirt in Configuration Reference";
    var fieldTags = "config-reference";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 15.0.0 on 2018-02-08 07:41";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>
</html>