<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8" /><meta name="renderer" content="webkit" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" /><link rel="shortcut icon" href="/favicon.ico?v=1.0.8" type="image/x-icon" /><link rel="pingback" href="man.linuxde.net/xmlrpc.php" /><link href="man.linuxde.net/wp-content/themes/pc_mobile/style.css?v=1.0.8" rel="stylesheet" type="text/css" /><title>lsof命令_Linux lsof 命令用法详解：显示Linux系统当前已打开的所有文件列表</title><link rel='canonical' href='man.linuxde.net/lsof' /></head><body><div id="header" class="clearfix"><h2 id="logo" class="left"><a title="Linux命令大全" href="man.linuxde.net/">Linux命令大全</a></h2><ul id="menu-main" class="right toggle-target"><li id="menu-item-4" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home current-post-parent menu-item-4"><a href="man.linuxde.net/">首页搜索</a></li><li id="menu-item-2474" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2474"><a href="https://www.linuxprobe.com/">Linux书籍</a></li><li id="menu-item-6" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6"><a href="man.linuxde.net/par/2">系统管理</a></li><li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-7"><a href="man.linuxde.net/par/5">网络管理</a></li><li id="menu-item-8" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-8"><a href="man.linuxde.net/par/4">软件·打印·开发·工具</a></li><li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9"><a href="man.linuxde.net/par/1">文件和目录管理</a></li><li id="menu-item-10" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-10"><a href="man.linuxde.net/par/3">硬件·内核·Shell·监测</a></li></ul> <span id="menu-main-toggle" class="toggle-btn" toggle-target="#menu-main"></span></div><div id="main-single" class="main-layout clearfix"><div class="right arc-wrap"><div id="position-wrap" class="clearfix"><div class="position left">当前位置：<a href="man.linuxde.net">首页</a> &raquo; <a href="man.linuxde.net/par/3" rel="category tag">硬件·内核·Shell·监测</a> &raquo; lsof</div></div><div id="title" class="clearfix"><h1 class="left">lsof命令</h1><div class="right"> <a href="man.linuxde.net/sub/%e6%80%a7%e8%83%bd%e7%9b%91%e6%b5%8b%e4%b8%8e%e4%bc%98%e5%8c%96" rel="tag">性能监测与优化</a></div></div><div id="ad-arc-top" class="ad"></div><div id="arc-body"><p> <strong>lsof命令</strong>用于查看你进程开打的文件，打开文件的进程，进程打开的端口(TCP、UDP)。找回/恢复删除的文件。是十分方便的系统监视工具，因为lsof命令需要访问核心内存和各种文件，所以需要root用户执行。</p><p> 在linux环境下，任何事物都以文件的形式存在，通过文件不仅仅可以访问常规数据，还可以访问网络连接和硬件。所以如传输控制协议&nbsp;(TCP)&nbsp;和用户数据报协议&nbsp;(UDP)&nbsp;套接字等，系统在后台都为该应用程序分配了一个文件描述符，无论这个文件的本质如何，该文件描述符为应用程序与基础操作系统之间的交互提供了通用接口。因为应用程序打开文件的描述符列表提供了大量关于这个应用程序本身的信息，因此通过lsof工具能够查看这个列表对系统监测以及排错将是很有帮助的。</p><h3> 语法<br /></h3><pre>
lsof(选项)</pre><h3> 选项<br /></h3><pre>
-a：列出打开文件存在的进程；
-c&lt;进程名&gt;：列出指定进程所打开的文件；
-g：列出GID号进程详情；
-d&lt;文件号&gt;：列出占用该文件号的进程；
+d&lt;目录&gt;：列出目录下被打开的文件；
+D&lt;目录&gt;：递归列出目录下被打开的文件；
-n&lt;目录&gt;：列出使用NFS的文件；
-i&lt;条件&gt;：列出符合条件的进程。（4、6、协议、:端口、 @<span class='wp_keywordlink'><a href="man.linuxde.net/ip" title="ip命令" target="_blank">ip</a></span> ）
-p&lt;进程号&gt;：列出指定进程号所打开的文件；
-u：列出UID号进程详情；
-h：显示帮助信息；
-v：显示版本信息。</pre><h3> 实例<br /></h3><pre>
<span style="color:#FF0000;">lsof</span>
<span class='wp_keywordlink'><a href="man.linuxde.net/command" title="command命令" target="_blank">command</a></span>     PID USER   FD      <span class='wp_keywordlink'><a href="man.linuxde.net/type" title="type命令" target="_blank">type</a></span>             DEVICE     SIZE       NODE NAME
<span class='wp_keywordlink'><a href="man.linuxde.net/init" title="init命令" target="_blank">init</a></span>          1 root  cwd       DIR                8,2     4096          2 /
init          1 root  rtd       DIR                8,2     4096          2 /
init          1 root  txt       REG                8,2    43496    6121706 /sbin/init
init          1 root  mem       REG                8,2   143600    7823908 /lib64/<span class='wp_keywordlink'><a href="man.linuxde.net/ld" title="ld命令" target="_blank">ld</a></span>-2.5.so
init          1 root  mem       REG                8,2  1722304    7823915 /lib64/libc-2.5.so
init          1 root  mem       REG                8,2    23360    7823919 /lib64/libdl-2.5.so
init          1 root  mem       REG                8,2    95464    7824116 /lib64/libselinux.so.1
init          1 root  mem       REG                8,2   247496    7823947 /lib64/libsepol.so.1
init          1 root   10u     FIFO               0,17                1233 /dev/initctl
migration     2 root  cwd       DIR                8,2     4096          2 /
migration     2 root  rtd       DIR                8,2     4096          2 /
migration     2 root  txt   unknown                                        /proc/2/exe
ksoftirqd     3 root  cwd       DIR                8,2     4096          2 /
ksoftirqd     3 root  rtd       DIR                8,2     4096          2 /
ksoftirqd     3 root  txt   unknown                                        /proc/3/exe
migration     4 root  cwd       DIR                8,2     4096          2 /
migration     4 root  rtd       DIR                8,2     4096          2 /
migration     4 root  txt   unknown                                        /proc/4/exe
ksoftirqd     5 root  cwd       DIR                8,2     4096          2 /
ksoftirqd     5 root  rtd       DIR                8,2     4096          2 /
ksoftirqd     5 root  txt   unknown                                        /proc/5/exe
events/0      6 root  cwd       DIR                8,2     4096          2 /
events/0      6 root  rtd       DIR                8,2     4096          2 /
events/0      6 root  txt   unknown                                        /proc/6/exe
events/1      7 root  cwd       DIR                8,2     4096          2 /</pre><p> <strong>lsof输出各列信息的意义如下：</strong></p><ul><li> COMMAND：进程的名称</li><li> PID：进程标识符</li><li> PPID：父进程标识符（需要指定-R参数）</li><li> USER：进程所有者</li><li> PGID：进程所属组</li><li> FD：文件描述符，应用程序通过文件描述符识别该文件。</li></ul><p> <span style="color:#008000;">文件描述符列表：</span></p><ol><li> cwd：表示current&nbsp;work&nbsp;dirctory，即：应用程序的当前工作目录，这是该应用程序启动的目录，除非它本身对这个目录进行更改</li><li> txt：该类型的文件是程序代码，如应用程序二进制文件本身或共享库，如上列表中显示的&nbsp;/sbin/init&nbsp;程序</li><li> lnn：library&nbsp;references&nbsp;(AIX);</li><li> er：FD&nbsp;information&nbsp;error&nbsp;(see&nbsp;NAME&nbsp;column);</li><li> jld：jail&nbsp;directory&nbsp;(FreeBSD);</li><li> ltx：shared&nbsp;library&nbsp;text&nbsp;(code&nbsp;and&nbsp;data);</li><li> mxx&nbsp;：hex&nbsp;memory-mapped&nbsp;type&nbsp;number&nbsp;xx.</li><li> m86：DOS&nbsp;Merge&nbsp;mapped&nbsp;<span class='wp_keywordlink'><a href="man.linuxde.net/file" title="file命令" target="_blank">file</a></span>;</li><li> mem：memory-mapped&nbsp;file;</li><li> mmap：memory-mapped&nbsp;device;</li><li> pd：parent&nbsp;directory;</li><li> rtd：root&nbsp;directory;</li><li> <span class='wp_keywordlink'><a href="man.linuxde.net/tr" title="tr命令" target="_blank">tr</a></span>：kernel&nbsp;trace&nbsp;file&nbsp;(OpenBSD);</li><li> v86&nbsp;&nbsp;VP/ix&nbsp;mapped&nbsp;file;</li><li> 0：表示标准输出</li><li> 1：表示标准输入</li><li> 2：表示标准错误</li></ol><p> <span style="color:#008000;">一般在标准输出、标准错误、标准输入后还跟着文件状态模式：</span></p><ol><li> u：表示该文件被打开并处于读取/写入模式。</li><li> r：表示该文件被打开并处于只读模式。</li><li> <span class='wp_keywordlink'><a href="man.linuxde.net/w" title="w命令" target="_blank">w</a></span>：表示该文件被打开并处于。</li><li> 空格：表示该文件的状态模式为unknow，且没有锁定。</li><li> -：表示该文件的状态模式为unknow，且被锁定。</li></ol><p> <span style="color:#008000;">同时在文件状态模式后面，还跟着相关的锁：</span></p><ol><li> N：for&nbsp;a&nbsp;Solaris&nbsp;NFS&nbsp;lock&nbsp;of&nbsp;unknown&nbsp;type;</li><li> r：for&nbsp;<span class='wp_keywordlink'><a href="man.linuxde.net/read" title="read命令" target="_blank">read</a></span>&nbsp;lock&nbsp;on&nbsp;part&nbsp;of&nbsp;the&nbsp;file;</li><li> R：for&nbsp;a&nbsp;read&nbsp;lock&nbsp;on&nbsp;the&nbsp;entire&nbsp;file;</li><li> w：for&nbsp;a&nbsp;<span class='wp_keywordlink'><a href="man.linuxde.net/write" title="write命令" target="_blank">write</a></span>&nbsp;lock&nbsp;on&nbsp;part&nbsp;of&nbsp;the&nbsp;file;（文件的部分写锁）</li><li> W：for&nbsp;a&nbsp;write&nbsp;lock&nbsp;on&nbsp;the&nbsp;entire&nbsp;file;（整个文件的写锁）</li><li> u：for&nbsp;a&nbsp;read&nbsp;and&nbsp;write&nbsp;lock&nbsp;of&nbsp;any&nbsp;length;</li><li> U：for&nbsp;a&nbsp;lock&nbsp;of&nbsp;unknown&nbsp;type;</li><li> x：for&nbsp;an&nbsp;SCO&nbsp;OpenServer&nbsp;Xenix&nbsp;lock&nbsp;on&nbsp;part&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;file;</li><li> X：for&nbsp;an&nbsp;SCO&nbsp;OpenServer&nbsp;Xenix&nbsp;lock&nbsp;on&nbsp;the&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entire&nbsp;file;</li><li> space：if&nbsp;there&nbsp;is&nbsp;no&nbsp;lock.</li></ol><p> <span style="color:#008000;">文件类型：</span></p><ol><li> DIR：表示目录。</li><li> CHR：表示字符类型。</li><li> BLK：块设备类型。</li><li> UNIX：&nbsp;UNIX&nbsp;域套接字。</li><li> FIFO：先进先出&nbsp;(FIFO)&nbsp;队列。</li><li> IPv4：网际协议&nbsp;(IP)&nbsp;套接字。</li><li> DEVICE：指定磁盘的名称</li><li> SIZE：文件的大小</li><li> NODE：索引节点（文件在磁盘上的标识）</li><li> NAME：打开文件的确切名称</li></ol></div><div id="ad-arc-bottom"><p><a class="col-link" href="/taobaojiqiao" target="_blank">【站长推荐】淘宝购物省钱小窍门，有些商品优惠力度高达50%，非常夸张！</a></p></div></div><div id="sidebar" class="left"><div class="box"><h3 class="title">相关命令</h3><ul class="body list-col-1 clearfix"><li><a href="man.linuxde.net/ifstat" title="ifstat">ifstat</a></li><li><a href="man.linuxde.net/top" title="top">top</a></li><li><a href="man.linuxde.net/nethogs" title="nethogs">nethogs</a></li><li><a href="man.linuxde.net/iostat" title="iostat">iostat</a></li><li><a href="man.linuxde.net/iotop" title="iotop">iotop</a></li><li><a href="man.linuxde.net/free" title="free">free</a></li><li><a href="man.linuxde.net/mpstat" title="mpstat">mpstat</a></li><li><a href="man.linuxde.net/strace" title="strace">strace</a></li><li><a href="man.linuxde.net/tload" title="tload">tload</a></li><li><a href="man.linuxde.net/time" title="time">time</a></li><li><a href="man.linuxde.net/ltrace" title="ltrace">ltrace</a></li><li><a href="man.linuxde.net/fuser" title="fuser">fuser</a></li><li><a href="man.linuxde.net/dstat" title="dstat">dstat</a></li><li><a href="man.linuxde.net/vmstat" title="vmstat">vmstat</a></li><li><a href="man.linuxde.net/inotifywait" title="inotifywait">inotifywait</a></li><li><a href="man.linuxde.net/uptime" title="uptime">uptime</a></li><li><a href="man.linuxde.net/sar" title="sar">sar</a></li></ul></div><div class="box mobile-hide"><h3 class="title">送福利</h3><ul class="body list-col-1 clearfix"><li><a href="/taobaojiqiao" target="_blank" style="color: #008000;">淘宝购物省钱小窍门，有些商品优惠力度高达50%，非常夸张！</a></li></ul></div><div id="sidebar_search_box" class="box"><form action="man.linuxde.net/" method="post"> <input class="search-input " type="text" name="ss" id="ss" value="命令直达(输入完整命令)" onFocus="if (value =='命令直达(输入完整命令)'){value =''}" onBlur="if (value ==''){value='命令直达(输入完整命令)'}" /> <input class="search-submit button mobile-visible" type="submit" value="进入" /></form><form action="man.linuxde.net/"> <input class="search-input" type="text" name="s" id="s" value="模糊搜索(输入关键词)" onFocus="if (value =='模糊搜索(输入关键词)'){value =''}" onBlur="if (value ==''){value='模糊搜索(输入关键词)'}" /> <input class="search-submit button mobile-visible" type="submit" value="搜索" /></form></div><div class="box"><h3 class="title"><a href="/download/">Linux下载</a></h3><ul class="body list-col-1 clearfix"><li><a href="/download/Ubuntu">Ubuntu下载</a></li><li><a href="/download/CentOS">CentOS下载</a></li></ul></div></div></div> ﻿<div id="footer-wrap"><div id="btn-backtop" title="返回顶部">返回顶部↑</div><div id="footer"><div class="info box"> <a href="man.linuxde.net" title="Linux命令大全">Linux命令大全</a> <span class="split"></span> <a href="man.linuxde.net/about_us" title="关于/联系">关于/联系</a> <span class="split"></span> 收藏本站请使用Ctrl+D <span class="split"></span> <a href="man.linuxde.net/shell-script" target="_blank">Shell脚本攻略</a> <span class="split"></span> <a href="man.linuxde.net/docs/shell_regex.html" target="_blank">Shell正则表达式</a> <span class="split"></span> 共收录 <span style="font-size: 16px; color:#74b147;">690</span> 条Linux系统命令</div><div class="desc box">在Linux命令大全（man.linuxde.net）可以查询您所需要的Linux命令教程和相关实例。如果您觉得本站内容对您有所帮助，请推荐给更多需要帮助的人。</div></div></div> <script type="text/javascript" src="man.linuxde.net/wp-content/themes/pc_mobile/js/jquery-1.8.3.min.js?v=1.0.8"></script> <script type="text/javascript" src="man.linuxde.net/wp-content/themes/pc_mobile/js/common.js?v=1.0.8"></script> <div style="display:none"><script src="s19.cnzz.com/z_stat.php?id=1271307540&web_id=1271307540" language="JavaScript"></script></div></body></html>