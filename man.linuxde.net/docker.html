<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8" /><meta name="renderer" content="webkit" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" /><link rel="shortcut icon" href="/favicon.ico?v=1.0.8" type="image/x-icon" /><link rel="pingback" href="http://Thomas-YangHT.github.io/man.linuxde.net/xmlrpc.php" /><link href="http://Thomas-YangHT.github.io/man.linuxde.net/wp-content/themes/pc_mobile/style.css?v=1.0.8" rel="stylesheet" type="text/css" /><title>Docker網絡管理的未來命令_Linux Docker網絡管理的未來 命令用法详解：</title><link rel='canonical' href='http://Thomas-YangHT.github.io/man.linuxde.net/docker%e7%b6%b2%e7%b5%a1%e7%ae%a1%e7%90%86%e7%9a%84%e6%9c%aa%e4%be%86' /></head><body><div id="header" class="clearfix"><h2 id="logo" class="left"><a title="Linux命令大全" href="http://Thomas-YangHT.github.io/man.linuxde.net/">Linux命令大全</a></h2><ul id="menu-main" class="right toggle-target"><li id="menu-item-4" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-4"><a href="http://Thomas-YangHT.github.io/man.linuxde.net/">首页搜索</a></li><li id="menu-item-2474" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2474"><a href="http://www.linuxprobe.com/">Linux书籍</a></li><li id="menu-item-6" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-6"><a href="http://Thomas-YangHT.github.io/man.linuxde.net/par/2">系统管理</a></li><li id="menu-item-7" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-7"><a href="http://Thomas-YangHT.github.io/man.linuxde.net/par/5">网络管理</a></li><li id="menu-item-8" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-8"><a href="http://Thomas-YangHT.github.io/man.linuxde.net/par/4">软件·打印·开发·工具</a></li><li id="menu-item-9" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9"><a href="http://Thomas-YangHT.github.io/man.linuxde.net/par/1">文件和目录管理</a></li><li id="menu-item-10" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-10"><a href="http://Thomas-YangHT.github.io/man.linuxde.net/par/3">硬件·内核·Shell·监测</a></li></ul> <span id="menu-main-toggle" class="toggle-btn" toggle-target="#menu-main"></span></div><div id="main-single" class="main-layout clearfix"><div class="right arc-wrap"><div id="position-wrap" class="clearfix"><div class="position left">当前位置：<a href="http://Thomas-YangHT.github.io/man.linuxde.net">首页</a> &raquo; <a href="http://Thomas-YangHT.github.io/man.linuxde.net/par/5" rel="category tag">网络管理</a> &raquo; Docker網絡管理的未來</div></div><div id="title" class="clearfix"><h1 class="left">Docker網絡管理的未來命令</h1><div class="right"> <a href="http://Thomas-YangHT.github.io/man.linuxde.net/sub/%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1%e5%99%a8" rel="tag">网络服务器</a></div></div><div id="ad-arc-top" class="ad"></div><div id="arc-body"><p> 【編者的話】作者是一個極客，從Docker的0.7版本開始就關註了Docker的網絡問題，本文雖然帶有些感情色彩，但也不難看到作者對Docker 的癡迷程度，不難看出他那顆想讓Docker更好的心。文章分析了Docker的網絡歷史，對相關的解決方案發表了自己的看法，作者期待Docker官方 能做出最正確的決定。</p><p> 最近有很多關於Docker網絡管理的討論，對這個問題大家眾說紛壇。引起爭論的主要原因是近年來使用Docker的人越來越多，用戶逐漸意識到 Docker的網絡缺陷亟待解決。當然，實際情況也是這樣，目前Docker的網絡能力嚴重不足，不支持復雜的設置，現在Docker的網絡模型存在性能 問題且不易擴展。不過對於一個基本的應用而言Docker的網絡模型已經很不錯了。然而，我們不能永遠停留在使用&ldquo;基本應用&rdquo;的級別上，伴隨著雲計算和微 服務的普及，這些還遠遠不夠。作為libcontainer的貢獻者之一，我想通過本文，發表一些自己的觀點。</p><p> 首先我需要先聊聊一些和網絡相關背景知識。一開始的時候，Docker使用者和開發者就意識到Docker網絡模型的不足，因為他們需要給Docker容器分配更多的<span class='wp_keywordlink'><a href="http://Thomas-YangHT.github.io/man.linuxde.net/ip" title="ip命令" target="_blank">ip</a></span>地址，而使用LXC作為容器引擎卻不會為這個問題而感到苦惱。容器已經存在了相當長一段時間，只是由於Docker的出現好多人才去學習Linux的命名空間（namespace），包括網絡的命名空間，它是Linux容器網絡的基石。Docker Tinkerer Extraordinaire 寫了很多的博客並開發了pipework工具，它可以幫助了解Docker的網絡以及如何在Docker中構建復雜網絡。雖然pipework很強大，但它也僅僅只是一個第三方的工具罷了，我們希望Docker原生的支持。</p><p> 我從Docker 0.7版本開始就關註它的網絡問題了，但我並不是直接一頭紮進源碼裏研究。相反，我首先嘗試研究LXC網絡，我希望它可以幫助我找到問題的關鍵點並運用到Docker上。我聯系了Jerome並且對在未來在Docker中嵌入golang-pipwork hack達成了共識。接下來就是個漫長的故事。時間過去七個月了，我們並沒有在Docker-network-land這 個項目上投入太多的精力，在GitHub上也鮮有人討論網絡相關的問題。當我打開那些需要解決的問題的鏈接的時候，我覺得是時候需要改變了。Docker 們關心的是那些優先級比較高的問題因為我們已經有了pipework以及pipework衍生的工具。與此同時，越來越多的實用性工具使得我們能突破 Docker的網絡局限。人們不再關心Docker的網絡問題，而只是通過一小部分人修復那些已經存在的問題並添加一些新功能。</p><p> 轉眼過了幾個月的時間，我們最終決定開始改變現狀。我們向官方提出了網絡方面的建議並建立了一個關於libnetwork的聊天室，盡管這些距離我們某些不成熟的想法有些遙遠。現在參與討論的人越來越多。在我的觀點看來，這對Docker來說是至關重要的。值得欣慰的是社區裏很多人也開始意識到這個問題。</p><p> Docker的網絡問題是極其復雜的，包括表面的和深層次的。它會涉及到非常多的項目，小到本地開發環境，大到類似牛逼的Kubernetes項目。當你閱讀了Kubernates關於網絡方面的設計文檔後， 你會發現一些好點子。在過去的一年時間裏，我們開發了很多工具和類庫去解決網路問題。我真的希望正在進行的討論不會影響（fuck）到我們現有的工作，而 是能夠為新人創造更好的環境。我之所以使用Fuck這個詞是因為我曾見識過一個壞決定是如何讓所有人失望的，這也是我對Docker的一點擔心。也許這些 都只是人生經歷罷了，正如俗語有雲：歷史交不給我們什麽，所以我只是替古人擔憂罷了。</p><p> 對於我來說Docker不僅僅意味著軟件交付，不僅僅意味著DevOps。它是另一種開發工具。對我而言，Docker應該是一個工具，而且也許更重要的 是一個平臺。嗯，是開放平臺，並且不是我們經常討論的那種軟件平臺。如果Docker準備讓用戶或者公司在現有的平臺上構建其解決方案，那它就不應該依賴 其它項目。我希望官方不會這樣做，因為Docker的夥計們已經知道擺脫依賴LXC並使用自己的libcontainer項目來替代。類似的處理思路應該 用到網絡問題的上。</p><p> 目前看到有一些計劃是打算將OVS項目關聯到Docker上來，從Linux Kernel 3.3開始，OVS項目就是內核的一部分。當我聽到這個的時候我覺得是不是腦袋讓驢踢了。首先聲明我並不是反對使用OVS，實際上，它是一個非常不錯的網 絡工具套件。它的設置比較復雜，對於新手來說有一個陡峭的學習曲線，但是一旦學會，OVS就可以幫你事半功倍。關於這個話題我聽到的一個討論是：&ldquo;如果OVS工作在Docker上，那麽工作一切都變得很美好&rdquo;。 讓我告訴你，親們：如果讓我花費大量時間學習它，最後的結果只能是：&ldquo;還好，可以用&rdquo;。我並不想說的那麽憤世嫉俗，實際情況是在某些常用環境下OVS會崩 潰。因此，使用OVS只是一種瘋狂的想法罷了。我並不想大家都認同我的說法。是的，你可以什麽都不做，也可以把他當做日常基礎工作。你可以讓系統管理員和 網絡工程師很開心，但是不全是這樣，同時也會讓開發者很孤獨。這是一個復雜的話題，當然解決問題並非只有一種方法(沒有銀彈)，所以我們不奢望真的有銀彈 罷了。</p><p> 這個帖子並不是討論是否將OVS成為Docker的一部分。我選擇談到OVS是因為，這可能是解決Docker網絡問題的方案之一。我們討論的範 圍有且不限於Docker的第三方項目，無論它是否開源。截止到目前，Docker們已經做了一些工作去避免這種問題的出現。很重要的一點是我們之前談到 的問題：避免對某個項目的依賴。一旦你決定使用某個項目，你的註意力就不得不集中在避免損害已經作為有機整體的平臺構建項目的相互依賴的問題上。正如我們 現在討論的項目例如 flannel、weave、docket等，還有更多的新增的項目平臺帶來的眾多依賴項目上。</p><p> 目前有一個基於可插拔的網絡後端設置看起來是個不錯的建議。但是這還需要一點時間，直到有基於硬件的可插拔的架構設計而不僅僅是解決網絡問題，還 更多的Docker參與和時間的檢驗。這個改變發生在Docker的核心，目前正在從移動終端轉移到網絡部分。我認為，給Docker們建立一個健壯的默 認的後臺，而不是給用戶一些列的解決方案，強迫他們使用固定的路徑，是一個比較穩妥的做法。不可避免的我們會對其他項目引用和依賴，這將不會影響目前的 Docker用戶，並且不會給未來的Docker用戶帶來影響。我們都明白不可能讓每個人都滿意，但是你可以創建一個友好的環境，用來建立自己的解決方 案，這樣使得不同用戶可以共同工作而不會相互影響。如果你和我一樣加入可插拔的API項目，那麽我們就是在同一條船上的人了。</p><p> 說起Docker網絡的未來，我真的很興奮，我非常期待Docker能做出最正確的決定。最重要的是，我希望本文能激發更多的人能參與其中一同完善這個項目。</p></div><div id="ad-arc-bottom"><p><a class="col-link" href="/taobaojiqiao" target="_blank">【站长推荐】淘宝购物省钱小窍门，有些商品优惠力度高达50%，非常夸张！</a></p></div></div><div id="sidebar" class="left"><div class="box"><h3 class="title">相关命令</h3><ul class="body list-col-1 clearfix"><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/mysql" title="mysql">mysql</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/nfsstat" title="nfsstat">nfsstat</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/%e9%9b%86%e6%88%90%e7%9a%84%e7%b6%b2%e7%b5%a1%e6%9c%8d%e5%8b%99%e5%99%a8%e5%92%8c%e7%b6%b2%e7%b5%a1%e7%ae%a1%e7%90%86%e7%9a%84%e7%b3%bb%e7%b5%b1%ef%bc%8czentyal-server-4-0-%e7%99%bc%e5%b8%83" title="集成的網絡服務器和網絡管理的系統，Zentyal Server 4.0 發布">集成的網絡服務器和網絡管理的系統，Zentyal Server 4.0 發布</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/exportfs" title="exportfs">exportfs</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/sendmail" title="sendmail">sendmail</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/docker%e7%bd%91%e7%bb%9c%e7%ae%a1%e7%90%86%e7%9a%84%e6%9c%aa%e6%9d%a5" title="Docker网络管理的未来">Docker网络管理的未来</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/ftpcount" title="ftpcount">ftpcount</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/apachectl" title="apachectl">apachectl</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/mysqladmin" title="mysqladmin">mysqladmin</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/ab" title="ab">ab</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/mysqldump" title="mysqldump">mysqldump</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/mysqlshow" title="mysqlshow">mysqlshow</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/htpasswd" title="htpasswd">htpasswd</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/ftpshut" title="ftpshut">ftpshut</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/mysqlimport" title="mysqlimport">mysqlimport</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/showmount" title="showmount">showmount</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/squidclient" title="squidclient">squidclient</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/ftptop" title="ftptop">ftptop</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/smbclient" title="smbclient">smbclient</a></li><li><a href="http://Thomas-YangHT.github.io/man.linuxde.net/smbpasswd" title="smbpasswd">smbpasswd</a></li></ul></div><div class="box mobile-hide"><h3 class="title">送福利</h3><ul class="body list-col-1 clearfix"><li><a href="/taobaojiqiao" target="_blank" style="color: #008000;">淘宝购物省钱小窍门，有些商品优惠力度高达50%，非常夸张！</a></li></ul></div><div id="sidebar_search_box" class="box"><form action="http://Thomas-YangHT.github.io/man.linuxde.net/" method="post"> <input class="search-input " type="text" name="ss" id="ss" value="命令直达(输入完整命令)" onFocus="if (value =='命令直达(输入完整命令)'){value =''}" onBlur="if (value ==''){value='命令直达(输入完整命令)'}" /> <input class="search-submit button mobile-visible" type="submit" value="进入" /></form><form action="http://Thomas-YangHT.github.io/man.linuxde.net/"> <input class="search-input" type="text" name="s" id="s" value="模糊搜索(输入关键词)" onFocus="if (value =='模糊搜索(输入关键词)'){value =''}" onBlur="if (value ==''){value='模糊搜索(输入关键词)'}" /> <input class="search-submit button mobile-visible" type="submit" value="搜索" /></form></div><div class="box"><h3 class="title"><a href="/download/">Linux下载</a></h3><ul class="body list-col-1 clearfix"><li><a href="/download/Ubuntu">Ubuntu下载</a></li><li><a href="/download/CentOS">CentOS下载</a></li></ul></div></div></div><div id="footer-wrap"><div id="btn-backtop" title="返回顶部">返回顶部↑</div><div id="footer"><div class="info box"> <a href="http://Thomas-YangHT.github.io/man.linuxde.net" title="Linux命令大全">Linux命令大全</a> <span class="split"></span> <a href="http://Thomas-YangHT.github.io/man.linuxde.net/about_us" title="关于/联系">关于/联系</a> <span class="split"></span> 收藏本站请使用Ctrl+D <span class="split"></span> <a href="http://Thomas-YangHT.github.io/man.linuxde.net/shell-script" target="_blank">Shell脚本攻略</a> <span class="split"></span> <a href="http://Thomas-YangHT.github.io/man.linuxde.net/docs/shell_regex.html" target="_blank">Shell正则表达式</a> <span class="split"></span> 共收录 <span style="font-size: 16px; color:#74b147;">648</span> 条Linux系统命令</div><div class="desc box">在Linux命令大全（man.yunwei.edu）可以查询您所需要的Linux命令教程和相关实例。如果您觉得本站内容对您有所帮助，请推荐给更多需要帮助的人。</div></div></div> <script type="text/javascript" src="http://Thomas-YangHT.github.io/man.linuxde.net/wp-content/themes/pc_mobile/js/jquery-1.8.3.min.js?v=1.0.8"></script> <script type="text/javascript" src="http://Thomas-YangHT.github.io/man.linuxde.net/wp-content/themes/pc_mobile/js/common.js?v=1.0.8"></script> <div style="display:none"><script src="http://s19.cnzz.com/z_stat.php?id=1271307540&web_id=1271307540" language="JavaScript"></script></div></body></html>