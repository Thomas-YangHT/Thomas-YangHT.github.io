<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/307941 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3442"/>

<div>
<span><div style="-evernote-webclip:true"><br/><div style="font-size: 16px; display: inline-block;"><div style="outline:currentcolor none 0px;box-sizing:border-box;"><div style="box-sizing:inherit;outline:currentcolor none 0px;font-family:&quot;SF Pro Display&quot;, Roboto, Noto, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, sans-serif;font-size:14px;line-height:1.57143;background-color:rgb(245, 246, 247);color:rgb(51, 51, 51);"><div style="outline:currentcolor none 0px;box-sizing:border-box;"><span style="box-sizing:inherit;outline:currentcolor none 0px;"><div style="box-sizing:inherit;outline:currentcolor none 0px;background:rgb(255, 255, 255) none repeat scroll 0% 0%;box-shadow:rgba(0, 0, 0, 0.05) 0px 2px 4px 0px;">
	<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;border-bottom:1px solid rgb(224, 224, 224);padding-top:24px;z-index:9;background-color:rgb(255, 255, 255);padding-left:24px;padding-right:24px;position:absolute;width:100%;left:0px;top:4043.5px;">
		<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;display:block;">
			<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-bottom:16px;">
				<span style="box-sizing:inherit;outline:currentcolor none 0px;display:inline-block;width:26px;height:26px;line-height:26px;text-align:center;font-size:12px;border-radius:50%;color:rgb(202, 12, 22);border:1px solid rgb(244, 206, 208);margin-top:4px;margin-right:8px;float:left;">原</span>				<h1 style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;overflow:hidden;text-overflow:ellipsis;font-size:24px;word-break:break-all;white-space:nowrap;">关系型数据库优化操作</h1>
			</div>
			<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;padding-bottom:14px;">
				<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;color:rgb(133, 133, 133);display:flex;">
																				<span style="box-sizing:inherit;outline:currentcolor none 0px;margin-right:14px;">2016年12月23日 01:09:28</span>
					<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-left:auto;float:right;">
						<span style="box-sizing:inherit;outline:currentcolor none 0px;margin-right:14px;">阅读数：1085</span>
																	</div>
				</div>
			</div>
			
		</div>
				
			</div><div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;height:115px;display:block;"></div>
	<div style="box-sizing:inherit;outline:currentcolor none 0px;display:block;position:relative;padding-top:16px;">
		<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;word-break:break-all;">
                    
						<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;font-family:-apple-system, SF UI Text, Arial, PingFang SC, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, sans-serif, SimHei, SimSun;word-break:break-all;">
                
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>目前使用率最多的数据库均为&quot;关系型数据库&quot;,例如:oracle,MySql...</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(102,255,255);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:18px;">1.关系型数据库的瓶颈:</span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>高并发读写需求-----------针对网站类用户的并发性访问非常高,而一台数据库的最大连接数有限,且硬盘I/O有限,其不能满足很多人同时连接</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>海量数据的高效率读写-------当表中数据量太大,每次的读写速率都将非常缓慢(解决方案:分表.分库)</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>高扩展性和可用性------一台数据库服务器扩充到多台时,不下电情况很难做到,当服务器挂了,业务都将中断</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>故而,需要对数据库进行优化!</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">2.MySql数据库的优化技术</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(51,255,255);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>第一步:定位慢查询Sql</span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,255);">1.      先关闭mysql服务—在服务中中止<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(51,255,255);"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">2.      开启慢查询并把慢查询记录到日志中:           在mysql的安装目录下执行命令: bin\mysqld.exe--safe-mode --slow- query-log    </p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">3.      查看mysql安装目录下my.ini文件中datadir(ctrl+f)的路径值所对应的目录下是否有生成有生成当前时间下后缀为.log 的文件,若有,表示成功(新生成的三个文件不能删除)</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">4.<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>进行测试:   先设置慢查询时间----&gt;查看慢查询时间---&gt;执行需要测试sql语句---&gt;查看是否有慢查询语句(若有,可以在.log日志文件中查看),如图:</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>注意:通过 show  session/global status(找出) ,其中session是默认值,一般都用global<br style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"/></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>开发中,测试的时机为:自检/测试功能的时候开启慢查询</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><img src="关系型数据库优化操作_files/Center.png" type="image/png" data-filename="Center.png" alt="" height="144" style="outline:currentcolor none 0px;box-sizing:border-box;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;" width="505"/></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>慢</span>查询语句: .log中</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><img src="关系型数据库优化操作_files/Center [1].png" type="image/png" data-filename="Center.png" alt="" height="133" style="outline:currentcolor none 0px;box-sizing:border-box;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;" width="829"/></span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(102,255,255);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>第二步:分析该Sql效率地的原因</span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">explain</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">(通过 explain 语句可以分析，mysql如何执行你的sql语句)分析,如下图:</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><img src="关系型数据库优化操作_files/Center [2].png" type="image/png" data-filename="Center.png" alt="" height="281" style="outline:currentcolor none 0px;box-sizing:border-box;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;" width="603"/></span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(102,255,255);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:18px;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>第三步:结构设计优化</span></span></p>
<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t0" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(51,255,51);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>一.表机构设计</span></h3>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,51);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1.范式 3范式规范与反3NF设计,具体视情况而定</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>备注:三范式指:1.表的列具有原子性,不可再分解;2.建立主键,实现记录唯一性;3.不能出现冗余数据,特殊情况可建立外键</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,0);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2.选择合适的存储引擎(myisam+INNODB+memory)</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>当表<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,0,0);">对事务要求不高,主要是以查询和添加为主</span>的时候,一般用myisam,实例:bbs中的发帖表.回复表</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>反之<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(51,255,51);">对事务要求高,保存的数据都是重要数据</span>的时候,则使用INNODB,例如:订单表.账号表</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>若<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(204,51,204);">数据变化频繁,不需要入库,同时又频繁的查询和修改</span>,一般用memory,速度极快</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>备注:MyISAM和INNODB的区别:</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1.<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">MyISAM</span>不支持事务,INNODB支持</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2.MyISAM查询和添加速度较快(底层类似链表,可以采用二叉树查询)</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>3.MyISAM支持全文索引,INNODB不支持</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>4.锁机制不同,MyISAM是表锁,<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">INNODB</span>是行锁</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>5.MyISAM不支持外键,<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">INNODB</span>支持</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>设置/修改存储引擎语法:</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>Create table 表名(字段列表) engine存储引擎名称;</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>例如:Create table employee(id  int ,name varchar) engine myisam;</p>
<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t1" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(102,255,153);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>二.索引:<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">索引（Index</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">）是帮助DBMS高效</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">获取数据</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">的</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">数据结构</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">。</span></span></h3>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;background-color:rgb(255,255,51);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1.索引算法: </span></div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><img src="关系型数据库优化操作_files/Center [3].png" type="image/png" data-filename="Center.png" alt="" height="113" style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="267"/></span></span></div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>备注</span>: 1.btree代表二叉树算法</span></div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>  2.<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">hash就像Map,通过一个key直接就能找到value</span>    </span></div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>  3.</span>FullText全文索引算法，只有myisam中有用,且只能对表中的文本区域(char vachar text)进行索引</div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>
<table border="1" cellpadding="0" cellspacing="0" style="font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;outline:currentcolor none 0px;border-spacing:0px;box-sizing:border-box;border-collapse:collapse;display:table;width:100%;text-align:left;margin-bottom:24px;word-break:break-all;"><tbody style="outline:currentcolor none 0px;box-sizing:border-box;border:0px none;word-break:break-all;"><tr style="outline:currentcolor none 0px;box-sizing:border-box;border-color:rgb(221, 221, 221) currentcolor currentcolor;border-style:solid none none;border-width:1px 0px 0px;border-image:none 100% / 1 / 0 stretch;background-color:rgb(255, 255, 255);word-break:break-all;"><td style="outline:currentcolor none 0px;margin:0px;font-weight:normal;box-sizing:border-box;word-break:break-all;padding:8px;text-align:left;border:1px solid rgb(221, 221, 221);font-size:14px;color:rgb(79, 79, 79);line-height:22px;background:#D7D7D7;" valign="top">
<p style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:400;word-break:break-all;padding:0px;margin:0px;font-size:14px;color:rgb(79, 79, 79);line-height:22px;text-align:left;">总结：使用索引把全表查找变为索引查找，减少查询次数，增加效率。而索引查找效率的取决于索引算法。也就是<strong style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;background:#FFFFFF;">索引（Index</span>）是帮助DBMS高效获取数据的<span style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;background:#FFFFFF;">数据结构</span></strong></p>
</td>
</tr></tbody></table></div>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2.索引的---添加/修改/删除/查询</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1):mysql中索引的分类:<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>普通索引：允许重复的值出现，可以再任何字段上面添加</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>唯一索引：除了不能有重复的记录外，其它和普通索引一样，可以在值是唯一的字段添加（用户名、手机号码、身份证、email，QQ），可以为null,并且可以有多个null</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>主键索引：是随着设定主键而创建的，也就是把某个列设为主键的时候，数据库就会給改列创建索引。这就是主键索引.唯一且没有null值</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>全文索引：用来对表中的文本域(char，varchar，text)进行索引，全文索引针对MyISAM有用</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2):添加索引:</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>普通索引的创建，是先创建表，然后在创建普通索引.</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>唯一索引:除了不能有重复的记录外，其它和普通索引一样<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>主键索引：是随着设定主键而创建的，也就是把某个列设为主键的时候，数据库就会給改列创建索引。这就是主键索引.唯一且没有null值</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>全文索引:用来对表中的文本域(char，varchar，text)进行索引，全文索引针对MyISAM有用,如下图</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<pre style="outline:currentcolor none 0px;position:relative;box-sizing:border-box;padding:8px;margin:0px 0px 24px;white-space:pre-wrap;overflow-wrap:break-word;overflow-x:auto;font-family:Consolas, Inconsolata, Courier, monospace;font-size:14px;line-height:22px;color:rgb(0, 0, 0);word-break:break-all;"><code style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(171, 178, 191);background:rgb(40, 44, 52) none repeat scroll 0% 0%;border-radius:4px;display:block;font-size:14px;line-height:22px;overflow-x:auto;white-space:pre;overflow-wrap:normal;padding:8px;font-family:Consolas, Inconsolata, Courier, monospace, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, sans-serif;word-break:break-all;"><ol style="outline:currentcolor none 0px;list-style:outside none none;box-sizing:border-box;border-collapse:collapse;padding:0px;margin:0px;overflow:hidden;word-break:break-all;width:846px;"><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">1</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">//创建表,同时设置fulltext字段<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;">----------------------------全文检索案例</span></span></div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">2</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">CREATE</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">TABLE</span></span> articles2 (</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">3</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">       <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">id</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;">INT</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">UNSIGNED</span></span> AUTO_INCREMENT <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">NOT</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(86, 182, 194);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(86, 182, 194);word-break:break-all;">NULL</span></span> PRIMARY <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">KEY</span></span>,</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">4</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">       title <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;">VARCHAR</span></span>(<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(209, 154, 102);word-break:break-all;">200</span></span>),</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">5</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">       <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">body</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(230, 192, 123);word-break:break-all;">TEXT</span></span>,</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">6</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">       fulltext(title,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">body</span></span>)</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">7</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     )<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">engine</span></span>=myisam <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">charset</span></span> utf8;</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">8</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">//添加数据</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">9</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">INSERT</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">INTO</span></span> articles2 (title,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">body</span></span>) <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">VALUES</span></span>   </div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">10</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     (<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'MySQL Tutorial'</span></span>,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'DBMS stands for DataBase ...'</span></span>),</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">11</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     (<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'How To Use MySQL Well'</span></span>,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'After you went through a ...'</span></span>),</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">12</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     (<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'Optimizing MySQL'</span></span>,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'In this tutorial we will show ...'</span></span>),</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">13</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     (<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'1001 MySQL Tricks'</span></span>,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'1. Never run mysqld as root. 2. ...'</span></span>),</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">14</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     (<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'MySQL vs. YourSQL'</span></span>,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'In the following database comparison ...'</span></span>),</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">15</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;">     (<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'MySQL Security'</span></span>,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'When configured properly, MySQL ...'</span></span>);</div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">16</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"> </div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">17</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">EXPLAIN</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">SELECT</span></span> * <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">FROM</span></span> articles2 <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">WHERE</span></span> title <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">LIKE</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'%MySql%'</span></span>;//模糊查询<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;">---不支持全文检索</span></span></div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">18</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"> </div></div></li><li style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;list-style-type:none;margin-left:0px;margin-top:0px;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;float:left;height:22px;width:24px;border-right:1px solid rgb(197, 197, 197);"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;text-align:right;padding-right:8px;word-break:break-all;"><span style="text-align:right;">19</span></div></div><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;margin-left:8px;float:left;height:22px;"><div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">explain</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">select</span></span> * <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">from</span></span> articles2 <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">where</span></span> <span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">match</span></span>(title,<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(198, 120, 221);word-break:break-all;">body</span></span>) against(<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(152, 195, 121);word-break:break-all;">'database'</span></span>);//正确方式<span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;color:rgb(92, 99, 112);font-style:italic;word-break:break-all;">--能支持全文检索</span></span></div></div></li></ol></code></pre><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>3):查询
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>语法:show INDEX from 表名;</p>
<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>4):删除 
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>语法:<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">ALTER TABLE 表名 drop INDEX 索引名;//删除索引</span>  </p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>5):修改</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>流程:先删除后添加=修改</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>3:索引的代价是:</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1).占用磁盘空间</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2):对dml(删除/添加/修改)操作有影响,因为要维护索引,效率变低.</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>4.使用场景:较为频繁的作为查询条件的字段</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>a.肯定在where条件经常使用 </p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>b: 该字段的内容不是唯一的几个值(sex) </p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>c: 字段内容不是频繁变化.</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>5):总结:普通索引（单列索引）：该索引只在一个列上面创建</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>复合索引（多列索引）：该索引只在多个列上面创建</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,0);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>6):使用小技巧:</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>a:对于创建的多列索引（复合索引），不是使用的第一部分就不会使用索引。</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>b:使用like的适合,若%在前面('%aaa')不会使用索引,反之('aa%'),则会使用索引</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>c:使用or的适合,必须所有的条件都使用索引此sql才会使用索引</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>d:如果列类型是字符串，那一定要在条件中将数据使用引号引用起来。否则不使用索引</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>e:如果mysql估计使用全表扫描要比使用索引快，则不使用索引。</p>
<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t2" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>三</span>.分表 :<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">分为 水平分割</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">(</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">行</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">)</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;font-size:12px;">和垂直分割（列）</span></h3>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1.水平分表</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">表中数据量巨大时，我们要经常查询。则可以按照<strong style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;">合适的策略</strong>拆分为多张小表。<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background:#0000FF;">尽量在单张表中查询，减少扫描次数</span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2.垂直分表</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>表记录数并不多，但是字段却很长，表占用空间很大，检索表时需要执行大量I/O，严重降低了性能。这个时候需要把大的字段拆分到另一个表，并且该表与原表是一对一的关系（外键）。 (JOIN)</p>
<br style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"/><h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t3" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>四.分区:将数据分段划分在多个位置存放，可以是同一块磁盘也可以在不同的机器</h3>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>MySQL 5.1 中新增了分区(Partition)功能，优势也越来越明显了：</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>--与单个磁盘或文件系统分区相比，可以存储更多的数据</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>--很容易删除不用或者过时的数据</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>一些查询可以得到极大的优化可以并发查询</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>--涉及到 SUM()/COUNT()等聚合函数时，可以并发进行</p>
<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>--IO吞吐量更大</div>
<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t4" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(51,255,51);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>五.sql优化小技巧(批量处理)</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></h3>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>DDL(数据库定义语言):使用场景,<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,102,102);">一次性插入上百万条数据</span></div>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1.通过<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,51);">禁用索引</span>来提供<strong style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;">导入数据</strong>性能 。 这个操作主要针对有数据库的表，追加数据</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>//去除键      alter table test3 DISABLEkeys;</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>//批量插入数据         insert into test3 select * from test;</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>//恢复键            alter table test3 ENABLEkeys;</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span> 变多次维护索引为一次维护。</p>
<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2 <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,51);">
关闭唯一校验</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>set unique_checks=0  关闭</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>set unique_checks=1  开启</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>变多次唯一性校验为一次校验。</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>3.<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,102);">修改事务提交方式(导入)</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>set autocommit=0   关闭自动提交</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>//批量插入</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>set autocommit=1   开启</p>
<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>变多次数据库事务为一次提交
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(51,255,51);"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>DML(增加/修改/删除)</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1.将多条增/删/改优化成一条sql</span></p>
<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t5" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>六.集群:<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(51,255,51);">主从同步(日志),读写分离,主备切换</span></span></h3>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><img src="关系型数据库优化操作_files/Center [4].png" type="image/png" data-filename="Center.png" alt="" height="521" style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="727"/></span></span></div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>实现</span>步骤一:</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">主从复制</span></div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></span>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>一、准备主从mysql</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1、分别构造主、从数据库并输出日志（方便定位问题）</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">   <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  拷贝</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">    <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>改端口</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">    <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span> 拷贝数据</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>拷贝原理数据库的data.dir mysql到模拟的主从数据库</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">  <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>   配置日志路径</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">   <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>2、安装及启动：</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">    <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span> mysqld --install MySQLXY --defaults-file=&quot;C:\ProgramFiles\MySQL\MySQL Server X.Y\my.ini&quot;</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">    <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span> net start MySQLXY</p>
      sc delete master</div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><img src="关系型数据库优化操作_files/Center [5].png" type="image/png" data-filename="Center.png" alt="" height="433" style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;max-width:100%;cursor:zoom-in;" width="665"/></span></span></span></div>
<div style="outline:currentcolor none 0px;padding:0px;margin:0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></span>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>测试</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>二、master服务器配置：</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">      <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  1、修改master方的mysql.ini :</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                     log-bin=mysql-bin</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                     server-id=1</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                     innodb_flush_log_at_trx_commit=1</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                     sync_binlog=1</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                     binlog_ignore_db=mysql</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                     binlog_checksum=none</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">      <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  2、重启master服务，登录</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><img src="关系型数据库优化操作_files/Center [6].png" type="image/png" data-filename="Center.png" alt="" height="334" style="outline:currentcolor none 0px;box-sizing:border-box;margin:0px;word-break:break-all;max-width:100%;cursor:zoom-in;" width="574"/></span></p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>3、授权savle服务器的使用的账号及权限</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">          <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>    场景：</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                  master主服务器： 192.168.1.101</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                  slave从服务器     :  192.168.1.102</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>1) 授权给slave数据库服务器192.168.10.131（master用户，只对slave服务器开放）</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">            <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>    语法为：GRANT REPLICATION SLAVE ON *.* to '用户名'@'192.168.0.102'identified</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                        by ‘密码’; </p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                 Mysql&gt;  GRANT REPLICATION SLAVE ON *.* to'yhptest'@'192.168.77.128'identified</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                         by 'admin';</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                         参数说明：</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                                  yhptest：<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background:rgb(217,217,217);">slave</span><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background:rgb(217,217,217);">连接master</span>使用的账号</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                                  IDENTIFIED BY 'admin' ：slave连接master使用的密码</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                                  192.168.77.128：slave IP</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                </p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">          <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>   2)查询主数据库状态</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                   Mysql&gt; show master status;</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           +--------------------+----------+---------------+------------------------------+</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">            | File                            | Position  | Binlog_Do_DB | Binlog_Ignore_DB |</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           +--------------------+----------+---------------+------------------------------+</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">            | mysql-bin.000002  | 226         |                          |       mysql  |</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           +--------------------+----------+---------------+------------------------------+</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">             记录File  和 Position的值，在slave端使用</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>三、slave服务器配置</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">     <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  1、修改slave服务器的配置文件my.ini将 server-id = 1修改为 server-id = 10，并确保这个</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">        <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  ID没有被别的MySQL服务所使用。</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">     <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  2、启动slave服务器，登录</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">       <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>3、在slave端，配置master链接信息 (执行语句)</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">          <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>1） 配置</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>Mysql&gt;  change master to</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">             <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>     master_host='192.168.77.1',  #master IP</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">              <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>     master_user='yhptest',          #master数据库通过GRANT授权的账号</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">             <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>     master_password='admin',        #master数据库通过GRANT授权的密码</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">               <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>    master_port=3307,              #master数据库的密码</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">            <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>      master_log_file='mysql-bin.000001',</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                              #master数据库中通过show master status显示的File名称</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                   master_log_pos=296         </p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">                               #master数据库的通过show master status显示的Position的值</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">        <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>    2） （重启）连接</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">          <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  Mysql&gt; start slave;</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"> </p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"> <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>           3）主从同步检查</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">    <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>       show slave status；</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">        <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>    其中Slave_IO_Running 与Slave_SQL_Running 的值都必须为<strong style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;">YES</strong>，才表明状态正常。</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">  <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>   4、 测试</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">          <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1） 在master上，建库、建表、添加数据</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">     <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>     2） 刷新slave库，记录也存在</p>
由此，整个MySQL主从复制的过程就完成了，接下来，我们进行MySQL读写分离的安装与配置
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>如果主服务器已经存在应用数据，则在进行主从复制时，需要做以下处理：</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">   <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span> (1)主数据库进行锁表操作，不让数据再进行写入动作</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           mysql&gt; FLUSH TABLES WITH READLOCK;</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">  <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>  (2)查看主数据库状态</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           mysql&gt; show master status;</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>    (3)复制数据文件</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           将主服务器的数据文件（整个/opt/mysql/data目录）复制到从服务器，建议通过tar归档压         </p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">           缩后再传到从服务器解压。</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>    (4)取消主数据库锁定</p>
          mysql&gt; UNLOCK TABLES; 
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">步骤二------------------<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">读写分离</span></p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>使用MySQL Proxy实现读写分离</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>在此使用配置文件的方式来进行配置。</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>配置文件mysql-proxy.conf中的内容主要包括：</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>[mysql-proxy]</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>admin-username=root</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>admin-password=123456</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>admin-lua-script=C:/mysql-proxy/lib/mysql-proxy/lua/admin.lua</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>proxy-backend-addresses=192.168.1.101:3306</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>proxy-read-only-backend-addresses=192.168.1.102:3306</p>
<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>proxy-lua-script=C:/mysql-proxy/share/doc/mysql-proxy/rw-splitting.lua</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>log-file=C:/mysql-proxy/log/mysql-proxy.log</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>log-level=debug</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>daemon=true</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>keepalive=true</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"> </p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>执行命令：</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>mysql-proxy -P 192.168.5.100:4040--defaults-file=E:/mysql-proxy/bin/mysql-proxy.conf</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>查看日志文件mysql-proxy.log：</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2015-10-19 16:27:40: (critical)plugin proxy 0.8.5 started</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2015-10-19 16:27:40: (debug) maxopen file-descriptors = 512</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2015-10-19 16:27:40: (message)proxy listening on port 192.168.174.133:4040</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2015-10-19 16:27:40: (message)added read/write backend: 192.168.174.130:3306</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2015-10-19 16:27:40: (message)added read-only backend: 192.168.174.131:3306</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>出现以上日志信息则表示MySQL Proxy启动成功，此时便可以实现读写分离了。</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"> </p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>注意：由于rw-splitting.lua中的min_idle_connections的默认值为4，即当会话数达到最小为4时，才会进行读写分离，在此我们将其改为1，则可直接进行读写分离。</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>后端主机需要创建授权帐号</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>mysql&gt; GRANT ALL ON *.* TOmike@'192.168.%.%' IDENTIFIED BY '321';</p>
mysql&gt; FLUSH PRIVILEGES;<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>
<h3 style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:8px 0px 16px;font-size:22px;color:rgb(79, 79, 79);font-weight:700;line-height:30px;word-break:break-all;"><a name="t6" style="outline:currentcolor none 0px;cursor:pointer;box-sizing:border-box;color:rgb(78, 161, 219);text-decoration:none;word-break:break-all;"></a>七.MySql使用小技巧</h3>
</div>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1.<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,51);">修改密码</span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></span></p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>1)、停掉mysql服务</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2)、在mysql.ini下，添加<strong style="outline:currentcolor none 0px;box-sizing:border-box;font-weight:700;word-break:break-all;">“skip-grant-tables”</strong>配置（mysqld这样可以去掉登录时的密码验证）</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>3)、重启mysql</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>4)、在cmd下输入mysql -uroot -P3306 ，无密码登录</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>5)、use mysql;</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>6)、set password=password（‘123’）  --error</p>
<p align="left" style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;">   <span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"> </span>   update user setpassword=password('admin') where user='root' and host='localhost';</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>7)、重启，或直接flushprivileges;</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>2.<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;background-color:rgb(255,255,51);">随机获取行(rand函数)---可用于抽奖</span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">order by rand() limit</span> 1//<span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;">随机获取一行</span></span></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>八.分布式: 按业务分要访问那个集群.</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>比如:dao层中的订单相关业务就访问订单DB集群</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>商品相关业务就访问商品DB集群<br style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"/></p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span>九.缓存..略..见Redis</p>
<p style="outline:currentcolor none 0px;padding:0px;box-sizing:border-box;margin:0px 0px 16px;font-size:16px;color:rgb(79, 79, 79);font-weight:400;line-height:26px;text-align:justify;word-break:break-all;"><span style="outline:currentcolor none 0px;box-sizing:border-box;word-break:break-all;"></span></p>
            </div>
                <span style="display:block;height:0px;visibility:hidden;clear:both;"></span></div>
				
        	</div>
	
		<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;padding-bottom:16px;margin-top:16px;border-bottom:1px solid rgb(227, 227, 227);position:relative;height:50px;overflow:hidden;">
				<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;font-size:12px;color:rgb(153, 153, 153);">
			版权声明：本文为博主原创文章，未经博主允许不得转载。			https://blog.csdn.net/gs932899178/article/details/53827965		</div>
								<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-bottom:8px;font-size:12px;margin-top:8px;">
			<span style="box-sizing:inherit;outline:currentcolor none 0px;color:rgb(77, 77, 77);">个人分类：</span>
						<a href="https://blog.csdn.net/gs932899178/article/category/6604381" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">Java						</a>
		</div>
								<div style="box-sizing:inherit;outline:currentcolor none 0px;padding:0px;margin:0px;margin-bottom:8px;font-size:12px;">
			<span style="box-sizing:inherit;outline:currentcolor none 0px;color:rgb(77, 77, 77);">相关热词：</span>
						<a href="https://blog.csdn.net/lanchunhui/article/details/51046369" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">
			关系型数据库π			</a>
						<a href="https://blog.csdn.net/ym_diver/article/details/69590488" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">
			主从关系型数据库			</a>
						<a href="https://blog.csdn.net/laoyang360/article/details/72792865" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">
			es关系型数据库			</a>
						<a href="https://blog.csdn.net/back_to_dream/article/details/51302388" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">
			图解关系型数据库			</a>
						<a href="https://blog.csdn.net/ylforever/article/details/51048945" style="box-sizing:inherit;outline:currentcolor none 0px;text-decoration:none;cursor:pointer;display:inline-block;margin-right:24px;color:rgb(121, 165, 229);word-break:break-all;" target="_blank">
			关系型数据库事物			</a>
					</div>
			<div style="box-sizing:inherit;outline:currentcolor none 0px;margin:0px;position:absolute;font-size:12px;color:rgb(51, 153, 234);letter-spacing:0px;line-height:20px;cursor:pointer;padding:4px 4px 4px 16px;background-color:rgb(255, 255, 255);left:94px;width:auto;top:25px;">▼查看关于本篇文章更多信息</div></div>
	</div></span></div></div></div></div><br/></div></span>
</div></body></html> 