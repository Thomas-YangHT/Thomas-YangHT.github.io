<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>SET</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="SQL 命令" HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html"><LINK REL="PREVIOUS" TITLE="SELECT INTO" HREF="sql-selectinto.html"><LINK REL="NEXT" TITLE="SET CONSTRAINTS" HREF="sql-set-constraints.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="REFENTRY">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/ref/set.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="SELECT INTO" HREF="sql-selectinto.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="SET CONSTRAINTS" HREF="sql-set-constraints.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><H1><A NAME="SQL-SET"></A>SET</H1><DIV CLASS="REFNAMEDIV"><A NAME="AEN80811"></A><H2>&#21517;&#31216;</H2>SET&nbsp;--&nbsp;修改运行时参数</DIV><DIV CLASS="REFSYNOPSISDIV"><A NAME="AEN80816"></A><H2>&#22823;&#32434;</H2><PRE CLASS="SYNOPSIS">SET [ SESSION | LOCAL ] <TT
CLASS="REPLACEABLE"
><I
>configuration_parameter</I
></TT
> { TO | = } { <TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
> | '<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>' | DEFAULT }
SET [ SESSION | LOCAL ] TIME ZONE { <TT
CLASS="REPLACEABLE"
><I
>timezone</I
></TT
> | LOCAL | DEFAULT }</PRE></DIV><DIV CLASS="REFSECT1"><A NAME="AEN80822"></A><H2>描述</H2><P><TT CLASS="COMMAND">SET</TT>命令修改运行时配置参数。许多在<A HREF="http://school.yunwei.edu/manual/PostgreSQL/runtime-config.html">第 18 &#31456;</A>
里面列出的运行时参数可以用<TT CLASS="COMMAND">SET</TT>在运行时设置。但是有些要求使用超级用户权限来修改，
而其它有些则在服务器或者会话开始之后不能修改。请注意<TT CLASS="COMMAND">SET</TT>只影响当前会话使用的数值。</P><P>如果<TT CLASS="COMMAND">SET</TT>（或相等的<TT CLASS="COMMAND">SET SESSION</TT>）是在一个稍后退出的事务里发出的，
那么<TT CLASS="COMMAND">SET</TT>命令的效果将在事务回滚之后消失。一旦包围它的事务提交，
那么其效果将持续到会话结束，除非被另外一个<TT CLASS="COMMAND">SET</TT>覆盖。</P><P>不管是否提交，<TT CLASS="COMMAND">SET LOCAL</TT>的效果只持续到当前事务结束。
一个特例是在一个事务里面的<TT CLASS="COMMAND">SET</TT>后面跟着一个<TT CLASS="COMMAND">SET LOCAL</TT>：
在事务结束之前只能看到<TT CLASS="COMMAND">SET LOCAL</TT>的数值，但是之后(如果事务提交)，
则是<TT CLASS="COMMAND">SET</TT>的值生效。</P><P><TT CLASS="COMMAND">SET</TT>或<TT CLASS="COMMAND">SET LOCAL</TT>的影响也可以通过回滚到一个命令之前的保存点取消。</P><P>如果<TT CLASS="COMMAND">SET LOCAL</TT>在一个对相同变量有<TT CLASS="LITERAL">SET</TT>选项的函数内使用
(请参阅<A HREF="sql-createfunction.html">CREATE FUNCTION</A>)，<TT CLASS="COMMAND">SET LOCAL</TT>
命令的影响在函数退出时消失；也就是说，函数调用时起作用的值不论如何都会还原。
这允许<TT CLASS="COMMAND">SET LOCAL</TT>用来对函数内的一个参数进行动态和反复修改，
尽管仍然方便使用<TT CLASS="LITERAL">SET</TT>选项来保存和存储调用程序的值。然而，
规则的<TT CLASS="LITERAL">SET</TT>命令重写任何函数内的<TT CLASS="LITERAL">SET</TT>选项；其影响将会持续，除非回滚。</P><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>&#27880;&#24847;: </B>在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 8.0到8.2版本中，一个<TT CLASS="COMMAND">SET LOCAL</TT>
的影响将通过释放一个较早的保存点被取消，或者通过从一个<SPAN CLASS="APPLICATION">PL/pgSQL</SPAN>
异常块成功退出。该选项已被更改，因为它被认为是非直观的。</P></BLOCKQUOTE></DIV></DIV><DIV CLASS="REFSECT1"><A NAME="AEN80857"></A><H2>参数</H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="LITERAL">SESSION</TT></DT><DD><P>声明这个命令只对当前会话起作用。如果<TT CLASS="LITERAL">SESSION</TT>或<TT CLASS="LITERAL">LOCAL</TT>都没出现，
那么这个是缺省。 </P></DD><DT><TT CLASS="LITERAL">LOCAL</TT></DT><DD><P>声明该命令只在当前事务中有效。在<TT CLASS="COMMAND">COMMIT</TT>或者<TT CLASS="COMMAND">ROLLBACK</TT>之后，
会话级别的设置将再次生效。请注意如果在<TT CLASS="COMMAND">BEGIN</TT>块之外运行，
那么<TT CLASS="COMMAND">SET LOCAL</TT>将表现出没有作用， 因为事务将立即结束。 </P></DD><DT><TT CLASS="REPLACEABLE"><I>configuration_parameter</I></TT></DT><DD><P>可设置的运行时参数的名字。可用的参数在<A HREF="http://school.yunwei.edu/manual/PostgreSQL/runtime-config.html">第 18 &#31456;</A>和下面有文档。 </P></DD><DT><TT CLASS="REPLACEABLE"><I>value</I></TT></DT><DD><P>参数的新值。值可以声明为字符串常量、标识符、数字，或者逗号分隔的上面这些东西的列表，
视特定变量而定。 对于特定参数是恰当的。可以写出<TT CLASS="LITERAL">DEFAULT</TT>
把这些参数设置为它们的缺省值。（也就是说，如果在当前会话中没有<TT CLASS="COMMAND">SET</TT>执行，
已有的任何数值都会设置。） </P></DD></DL></DIV><P>除了在<A HREF="http://school.yunwei.edu/manual/PostgreSQL/runtime-config.html">第 18 &#31456;</A>里面有文档记载的配置参数之外，
还有几个只能用<TT CLASS="COMMAND">SET</TT>命令设置，或者是有特殊的语法的参数。
<P></P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="LITERAL">SCHEMA</TT></DT><DD><P><TT CLASS="LITERAL">SET SCHEMA '<TT CLASS="REPLACEABLE"><I>value</I></TT>'</TT>是<TT CLASS="LITERAL">SET search_path TO <TT CLASS="REPLACEABLE"><I>value</I></TT></TT>的别名。
使用该语法只可指定一个模式。</P></DD><DT><TT CLASS="LITERAL">NAMES</TT></DT><DD><P><TT CLASS="LITERAL">SET NAMES <TT CLASS="REPLACEABLE"><I>value</I></TT></TT>是<TT CLASS="LITERAL">SET client_encoding TO <TT CLASS="REPLACEABLE"><I>value</I></TT></TT>的别名。</P></DD><DT><TT CLASS="LITERAL">SEED</TT></DT><DD><P>为随机数生成器(函数<CODE CLASS="FUNCTION">random</CODE>)设置内部的种子。
允许的值是介于 -1 和 1 之间的浮点数，然后它会被乘以 2<SUP>31</SUP>-1。</P><P>也可以通过调用<CODE CLASS="FUNCTION">setseed</CODE>函数来设置种子：
</P><PRE CLASS="PROGRAMLISTING">SELECT setseed(<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>);</PRE><P></P></DD><DT><TT CLASS="LITERAL">TIME ZONE</TT></DT><DD><P><TT CLASS="LITERAL">SET TIME ZONE <TT CLASS="REPLACEABLE"><I>value</I></TT></TT>是<TT CLASS="LITERAL">SET timezone TO <TT CLASS="REPLACEABLE"><I>value</I></TT></TT>
的一个别名。语法<TT CLASS="LITERAL">SET TIME ZONE</TT>允许为时区设置特殊的语法。下面是有效值的例子：
<P></P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="LITERAL">'PST8PDT'</TT></DT><DD><P>加州伯克利的时区。</P></DD><DT><TT CLASS="LITERAL">'Europe/Rome'</TT></DT><DD><P>意大利时区。</P></DD><DT><TT CLASS="LITERAL">-7</TT></DT><DD><P>UTC 以西 7 小时的时区(等效于 PDT)。正值为UTC以东。</P></DD><DT><TT CLASS="LITERAL">INTERVAL '-08:00' HOUR TO MINUTE</TT></DT><DD><P>UTC 以西 8 小时的时区(等效于 PST)。</P></DD><DT><TT CLASS="LITERAL">LOCAL</TT><BR><TT CLASS="LITERAL">DEFAULT</TT></DT><DD><P>将时区设置为你的本地时区(也就是，服务器的<TT CLASS="VARNAME">timezone</TT>缺省值)。</P></DD></DL></DIV><P>
参阅<A HREF="datatype-datetime.html#DATATYPE-TIMEZONES">第 8.5.3 &#33410;</A>获取有关时区的更多细节。
</P></DD></DL></DIV><P>
</P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN80962"></A><H2>注意</H2><P>函数<CODE CLASS="FUNCTION">set_config</CODE>提供了等效的功能。参阅<A HREF="functions-admin.html">第 9.26 &#33410;</A>。
同时，可以UPDATE这个<A HREF="view-pg-settings.html"><TT CLASS="STRUCTNAME">pg_settings</TT></A>
系统视图来执行<TT CLASS="COMMAND">SET</TT>的等价操作。 </P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN80970"></A><H2>例子</H2><P>设置模式搜索路径：
</P><PRE CLASS="PROGRAMLISTING">SET search_path TO my_schema, public;</PRE><P></P><P>把日期时间风格设置为传统的<SPAN CLASS="PRODUCTNAME">POSTGRES</SPAN>风格(日在月前)：
</P><PRE CLASS="SCREEN">SET datestyle TO postgres, dmy;</PRE><P></P><P>把时区设置为加州伯克利：
</P><PRE CLASS="SCREEN">SET TIME ZONE 'PST8PDT';</PRE><P></P><P>为意大利设置时区：
</P><PRE CLASS="SCREEN">SET TIME ZONE 'Europe/Rome';</PRE><P></P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN80981"></A><H2>兼容性</H2><P><TT CLASS="LITERAL">SET TIME ZONE</TT>扩展了在 SQL 标准里定义的语法。标准只允许有一个数字时区偏移，
而<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>还允许完整更灵活的时区声明。
所有其它的<TT CLASS="LITERAL">SET</TT>特性都是<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>扩展。</P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN80988"></A><H2>又见</H2><A HREF="sql-reset.html">RESET</A>, <A HREF="sql-show.html">SHOW</A></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="sql-selectinto.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="sql-set-constraints.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">SELECT INTO</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">SET CONSTRAINTS</TD></TR></TABLE></DIV></BODY></HTML>
