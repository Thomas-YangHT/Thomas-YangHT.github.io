<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>范围函数和操作符</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="函数和操作符" HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html"><LINK REL="PREVIOUS" TITLE="数组函数和操作符" HREF="functions-array.html"><LINK REL="NEXT" TITLE="聚集函数" HREF="functions-aggregate.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/func.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="数组函数和操作符" HREF="functions-array.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 9. 函数和操作符</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="聚集函数" HREF="functions-aggregate.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="FUNCTIONS-RANGE">9.19. 范围函数和操作符</A></H1><P>参阅<A HREF="rangetypes.html">第 8.17 &#33410;</A>获取范围类型的概述。</P><P><A HREF="functions-range.html#RANGE-OPERATORS-TABLE">&#34920; 9-44</A>显示了范围类型可用的操作符。</P><DIV CLASS="TABLE"><A NAME="RANGE-OPERATORS-TABLE"></A><P><B>&#34920; 9-44. 范围操作符</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><THEAD><TR><TH>操作符</TH><TH>描述</TH><TH>示例</TH><TH>结果</TH></TR></THEAD><TBODY><TR><TD> <TT CLASS="LITERAL">=</TT> </TD><TD>等于</TD><TD><TT CLASS="LITERAL">int4range(1,5) = '[1,4]'::int4range</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;&gt;</TT> </TD><TD>不等于</TD><TD><TT CLASS="LITERAL">numrange(1.1,2.2) &lt;&gt; numrange(1.1,2.3)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;</TT> </TD><TD>小于</TD><TD><TT CLASS="LITERAL">int4range(1,10) &lt; int4range(2,3)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&gt;</TT> </TD><TD>大于</TD><TD><TT CLASS="LITERAL">int4range(1,10) &gt; int4range(1,5)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;=</TT> </TD><TD>小于或等于</TD><TD><TT CLASS="LITERAL">numrange(1.1,2.2) &lt;= numrange(1.1,2.2)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&gt;=</TT> </TD><TD>大于或等于</TD><TD><TT CLASS="LITERAL">numrange(1.1,2.2) &gt;= numrange(1.1,2.0)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">@&gt;</TT> </TD><TD>包含范围</TD><TD><TT CLASS="LITERAL">int4range(2,4) @&gt; int4range(2,3)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">@&gt;</TT> </TD><TD>包含元素</TD><TD><TT CLASS="LITERAL">'[2011-01-01,2011-03-01)'::tsrange @&gt; '2011-01-10'::timestamp</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;@</TT> </TD><TD>范围包含于</TD><TD><TT CLASS="LITERAL">int4range(2,4) &lt;@ int4range(1,7)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;@</TT> </TD><TD>元素包含于</TD><TD><TT CLASS="LITERAL">42 &lt;@ int4range(1,7)</TT></TD><TD><TT CLASS="LITERAL">f</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&amp;&amp;</TT> </TD><TD>重叠 (有共同点)</TD><TD><TT CLASS="LITERAL">int8range(3,7) &amp;&amp; int8range(4,12)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;&lt;</TT> </TD><TD>严格在左</TD><TD><TT CLASS="LITERAL">int8range(1,10) &lt;&lt; int8range(100,110)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&gt;&gt;</TT> </TD><TD>严格在右</TD><TD><TT CLASS="LITERAL">int8range(50,60) &gt;&gt; int8range(20,30)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&amp;&lt;</TT> </TD><TD>没有延伸到右边</TD><TD><TT CLASS="LITERAL">int8range(1,20) &amp;&lt; int8range(18,20)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">&amp;&gt;</TT> </TD><TD>没有延伸到左边</TD><TD><TT CLASS="LITERAL">int8range(7,20) &amp;&gt; int8range(5,10)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">-|-</TT> </TD><TD>相邻</TD><TD><TT CLASS="LITERAL">numrange(1.1,2.2) -|- numrange(2.2,3.3)</TT></TD><TD><TT CLASS="LITERAL">t</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">+</TT> </TD><TD>并集</TD><TD><TT CLASS="LITERAL">numrange(5,15) + numrange(10,20)</TT></TD><TD><TT CLASS="LITERAL">[5,20)</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">*</TT> </TD><TD>交集</TD><TD><TT CLASS="LITERAL">int8range(5,15) * int8range(10,20)</TT></TD><TD><TT CLASS="LITERAL">[10,15)</TT></TD></TR><TR><TD> <TT CLASS="LITERAL">-</TT> </TD><TD>差集</TD><TD><TT CLASS="LITERAL">int8range(5,15) - int8range(10,20)</TT></TD><TD><TT CLASS="LITERAL">[5,10)</TT></TD></TR></TBODY></TABLE></DIV><P>简单的比较操作符<TT CLASS="LITERAL">&lt;</TT>，<TT CLASS="LITERAL">&gt;</TT>，<TT CLASS="LITERAL">&lt;=</TT>
和<TT CLASS="LITERAL">&gt;=</TT>先比较下界，只有下界相等时才比较上界。
这种比较通常对范围不是很好用，但是为了在范围中允许构建B-tree索引才提供的。</P><P>左于/右于/邻近操作符当包含空范围时也会返回false；也就是，
不认为空范围在其他范围之前或之后。</P><P>并集和差集操作符在结果范围需要包含两个不相交的子范围时失败，因此不能表示这样一个范围。</P><P><A HREF="functions-range.html#RANGE-FUNCTIONS-TABLE">&#34920; 9-45</A>显示了可以和范围一起使用的函数。</P><DIV CLASS="TABLE"><A NAME="RANGE-FUNCTIONS-TABLE"></A><P><B>&#34920; 9-45. 范围函数</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><COL><THEAD><TR><TH>函数</TH><TH>返回类型</TH><TH>描述</TH><TH>示例</TH><TH>结果</TH></TR></THEAD><TBODY><TR><TD> <TT CLASS="LITERAL"> <CODE CLASS="FUNCTION">lower</CODE>(<TT CLASS="TYPE">anyrange</TT>)
</TT>
</TD><TD>范围元素类型</TD><TD>范围的下界</TD><TD><TT CLASS="LITERAL">lower(numrange(1.1,2.2))</TT></TD><TD><TT CLASS="LITERAL">1.1</TT></TD></TR><TR><TD> <TT CLASS="LITERAL"> <CODE CLASS="FUNCTION">upper</CODE>(<TT CLASS="TYPE">anyrange</TT>)
</TT>
</TD><TD>范围元素类型</TD><TD>范围的上界</TD><TD><TT CLASS="LITERAL">upper(numrange(1.1,2.2))</TT></TD><TD><TT CLASS="LITERAL">2.2</TT></TD></TR><TR><TD> <TT CLASS="LITERAL"> <CODE CLASS="FUNCTION">isempty</CODE>(<TT CLASS="TYPE">anyrange</TT>)
</TT>
</TD><TD><TT CLASS="TYPE">boolean</TT></TD><TD>范围是空的?</TD><TD><TT CLASS="LITERAL">isempty(numrange(1.1,2.2))</TT></TD><TD><TT CLASS="LITERAL">false</TT></TD></TR><TR><TD> <TT CLASS="LITERAL"> <CODE CLASS="FUNCTION">lower_inc</CODE>(<TT CLASS="TYPE">anyrange</TT>)
</TT>
</TD><TD><TT CLASS="TYPE">boolean</TT></TD><TD>包涵下界?</TD><TD><TT CLASS="LITERAL">lower_inc(numrange(1.1,2.2))</TT></TD><TD><TT CLASS="LITERAL">true</TT></TD></TR><TR><TD> <TT CLASS="LITERAL"> <CODE CLASS="FUNCTION">upper_inc</CODE>(<TT CLASS="TYPE">anyrange</TT>)
</TT>
</TD><TD><TT CLASS="TYPE">boolean</TT></TD><TD>包含上界?</TD><TD><TT CLASS="LITERAL">upper_inc(numrange(1.1,2.2))</TT></TD><TD><TT CLASS="LITERAL">false</TT></TD></TR><TR><TD> <TT CLASS="LITERAL"> <CODE CLASS="FUNCTION">lower_inf</CODE>(<TT CLASS="TYPE">anyrange</TT>)
</TT>
</TD><TD><TT CLASS="TYPE">boolean</TT></TD><TD>下界无穷?</TD><TD><TT CLASS="LITERAL">lower_inf('(,)'::daterange)</TT></TD><TD><TT CLASS="LITERAL">true</TT></TD></TR><TR><TD> <TT CLASS="LITERAL"> <CODE CLASS="FUNCTION">upper_inf</CODE>(<TT CLASS="TYPE">anyrange</TT>)
</TT>
</TD><TD><TT CLASS="TYPE">boolean</TT></TD><TD>上界无穷?</TD><TD><TT CLASS="LITERAL">upper_inf('(,)'::daterange)</TT></TD><TD><TT CLASS="LITERAL">true</TT></TD></TR></TBODY></TABLE></DIV><P>如果范围是空或者需要的界限是无穷的，<CODE CLASS="FUNCTION">lower</CODE>和<CODE CLASS="FUNCTION">upper</CODE>
函数返回null。<CODE CLASS="FUNCTION">lower_inc</CODE>, <CODE CLASS="FUNCTION">upper_inc</CODE>,
<CODE CLASS="FUNCTION">lower_inf</CODE>和<CODE CLASS="FUNCTION">upper_inf</CODE>函数均对空范围返回false。</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="functions-array.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="functions-aggregate.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">数组函数和操作符</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">聚集函数</TD></TR></TABLE></DIV></BODY></HTML>
