<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>CREATE FOREIGN DATA WRAPPER</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="SQL 命令" HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html"><LINK REL="PREVIOUS" TITLE="CREATE EVENT TRIGGER" HREF="sql-createeventtrigger.html"><LINK REL="NEXT" TITLE="CREATE FOREIGN TABLE" HREF="sql-createforeigntable.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="REFENTRY">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/ref/create_foreign_data_wrapper.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="CREATE EVENT TRIGGER" HREF="sql-createeventtrigger.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="CREATE FOREIGN TABLE" HREF="sql-createforeigntable.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><H1><A NAME="SQL-CREATEFOREIGNDATAWRAPPER"></A>CREATE FOREIGN DATA WRAPPER</H1><DIV CLASS="REFNAMEDIV"><A NAME="AEN69953"></A><H2>&#21517;&#31216;</H2>CREATE FOREIGN DATA WRAPPER&nbsp;--&nbsp;定义一个外部数据封装器</DIV><DIV CLASS="REFSYNOPSISDIV"><A NAME="AEN69958"></A><H2>&#22823;&#32434;</H2><PRE CLASS="SYNOPSIS">CREATE FOREIGN DATA WRAPPER <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>
    [ HANDLER <TT
CLASS="REPLACEABLE"
><I
>handler_function</I
></TT
> | NO HANDLER ]
    [ VALIDATOR <TT
CLASS="REPLACEABLE"
><I
>validator_function</I
></TT
> | NO VALIDATOR ]
    [ OPTIONS ( <TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
> '<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>' [, ... ] ) ]</PRE></DIV><DIV CLASS="REFSECT1"><A NAME="AEN69965"></A><H2>描述</H2><P><TT CLASS="COMMAND">CREATE FOREIGN DATA WRAPPER</TT>创建一个新的外部数据封装器。
创建外部数据封装器的用户成为其所有者。</P><P>外部数据封装器的名字必需在数据库中唯一。</P><P>只有超级用户可以创建外部数据封装器。</P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN69971"></A><H2>参数</H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="REPLACEABLE"><I>name</I></TT></DT><DD><P>要创建的外部数据封装器的名字。</P></DD><DT><TT CLASS="LITERAL">HANDLER <TT CLASS="REPLACEABLE"><I>handler_function</I></TT></TT></DT><DD><P><TT CLASS="REPLACEABLE"><I>handler_function</I></TT>
是先前已经注册了的函数的名字，用来为外部表检索执行函数。
处理器函数必须没有参数，并且它的返回类型必须为<TT CLASS="TYPE">fdw_handler</TT>。</P><P>不用处理器函数创建外部数据封装器是可能的，但是使用这种封装器的外部表只能被声明，不能被访问。</P></DD><DT><TT CLASS="LITERAL">VALIDATOR <TT CLASS="REPLACEABLE"><I>validator_function</I></TT></TT></DT><DD><P><TT CLASS="REPLACEABLE"><I>validator_function</I></TT>
是先前已经注册了的函数的名字，用来检查提供给外部数据封装器的通用选项，
还有使用该外部数据封装器的外部服务器和用户映射的选项。
如果没有验证器函数或声明了<TT CLASS="LITERAL">NO VALIDATOR</TT>，
那么在创建时将不检查选项。（外部数据封装器可能在运行时忽略或拒绝无效的选项说明，
取决于实现。）验证器函数必须接受两个参数：一个类型为<TT CLASS="TYPE">text[]</TT>，
将包含存储在系统目录中的选项的数组，一个类型为<TT CLASS="TYPE">oid</TT>，
是包含这些选项的系统目录的OID。忽略返回类型；该函数应该使用
<CODE CLASS="FUNCTION">ereport(ERROR)</CODE>函数报告无效选项。</P></DD><DT><TT CLASS="LITERAL">OPTIONS ( <TT CLASS="REPLACEABLE"><I>option</I></TT> '<TT CLASS="REPLACEABLE"><I>value</I></TT>' [, ... ] )</TT></DT><DD><P>这个子句为新的外部数据封装器声明选项。允许的选项名和值是特定于每个外部数据封装器的，
并且是经过外部数据封装器的验证器函数验证了的。选项名必须是唯一的。</P></DD></DL></DIV></DIV><DIV CLASS="REFSECT1"><A NAME="AEN70006"></A><H2>注意</H2><P><SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>的外部数据功能一直在积极开发。
查询的优化是原始的（并且主要是封装器）。因此，未来的性能提升有很大的空间。</P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN70010"></A><H2>例子</H2><P>创建一个无用的外部数据封装器<TT CLASS="LITERAL">dummy</TT>：
</P><PRE CLASS="PROGRAMLISTING">CREATE FOREIGN DATA WRAPPER dummy;</PRE><P>
</P><P>创建一个带有处理器函数<TT CLASS="LITERAL">file_fdw_handler</TT>
的外部数据封装器<TT CLASS="LITERAL">file</TT>：
</P><PRE CLASS="PROGRAMLISTING">CREATE FOREIGN DATA WRAPPER file HANDLER file_fdw_handler;</PRE><P>
</P><P>创建一个带有一些选项的外部数据封装器<TT CLASS="LITERAL">mywrapper</TT>：
</P><PRE CLASS="PROGRAMLISTING">CREATE FOREIGN DATA WRAPPER mywrapper
    OPTIONS (debug 'true');</PRE><P></P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN70022"></A><H2>兼容性</H2><P><TT CLASS="COMMAND">CREATE FOREIGN DATA WRAPPER</TT>遵从ISO/IEC 9075-9 (SQL/MED)，
除了<TT CLASS="LITERAL">HANDLER</TT>和<TT CLASS="LITERAL">VALIDATOR</TT>子句是扩展，
并且标准的子句<TT CLASS="LITERAL">LIBRARY</TT>和<TT CLASS="LITERAL">LANGUAGE</TT>
没有在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>中实现。</P><P>请注意，然而，SQL/MED功能作为一个整体目前是不符合的。</P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN70032"></A><H2>又见</H2><A HREF="sql-alterforeigndatawrapper.html">ALTER FOREIGN DATA WRAPPER</A>, <A HREF="sql-dropforeigndatawrapper.html">DROP FOREIGN DATA WRAPPER</A>, <A HREF="sql-createserver.html">CREATE SERVER</A>, <A HREF="sql-createusermapping.html">CREATE USER MAPPING</A>, <A HREF="sql-createforeigntable.html">CREATE FOREIGN TABLE</A></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="sql-createeventtrigger.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="sql-createforeigntable.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">CREATE EVENT TRIGGER</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">CREATE FOREIGN TABLE</TD></TR></TABLE></DIV></BODY></HTML>
