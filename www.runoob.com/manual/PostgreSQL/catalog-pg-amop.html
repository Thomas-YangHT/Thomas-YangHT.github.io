<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>pg_amop</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="系统表" HREF="http://school.yunwei.edu/manual/PostgreSQL/catalogs.html"><LINK REL="PREVIOUS" TITLE="pg_am" HREF="catalog-pg-am.html"><LINK REL="NEXT" TITLE="pg_amproc" HREF="catalog-pg-amproc.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/catalogs.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="pg_am" HREF="catalog-pg-am.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/catalogs.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 47. 系统表</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="pg_amproc" HREF="catalog-pg-amproc.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="CATALOG-PG-AMOP">47.4. <TT CLASS="STRUCTNAME">pg_amop</TT></A></H1><P><TT CLASS="STRUCTNAME">pg_amop</TT>表存储有关和访问方法操作符族关联的信息。
如果一个操作符是一个操作符族中的成员，那么在这个表中会占据一行。
一个族成员是一个<I CLASS="FIRSTTERM">search</I>操作符或一个<I CLASS="FIRSTTERM">ordering</I>操作符。
一个操作符可以在多个族中出现，但是不能在一个族中的多个搜索位置或多个排序位置中出现。
（尽管不太可能，但这是允许的，一个操作符可以被搜索和排序目的使用。）</P><DIV CLASS="TABLE"><A NAME="AEN91358"></A><P><B>&#34920; 47-4. <TT CLASS="STRUCTNAME">pg_amop</TT> 字段</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><THEAD><TR><TH>名字</TH><TH>类型</TH><TH>引用</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="STRUCTFIELD">oid</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD>&nbsp;</TD><TD>行标识符(隐藏属性；必须明确选择)</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amopfamily</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-opfamily.html"><TT CLASS="STRUCTNAME">pg_opfamily</TT></A>.oid</TT></TD><TD>这个项的操作符族</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amoplefttype</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-type.html"><TT CLASS="STRUCTNAME">pg_type</TT></A>.oid</TT></TD><TD>操作符的左输入类型</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amoprighttype</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-type.html"><TT CLASS="STRUCTNAME">pg_type</TT></A>.oid</TT></TD><TD>操作符的右输入类型</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amopstrategy</TT></TD><TD><TT CLASS="TYPE">int2</TT></TD><TD>&nbsp;</TD><TD>操作符策略数</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amoppurpose</TT></TD><TD><TT CLASS="TYPE">char</TT></TD><TD>&nbsp;</TD><TD>操作符目的, <TT CLASS="LITERAL">s</TT>为搜索或<TT CLASS="LITERAL">o</TT>为排序</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amopopr</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-operator.html"><TT CLASS="STRUCTNAME">pg_operator</TT></A>.oid</TT></TD><TD>该操作符的OID</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amopmethod</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-am.html"><TT CLASS="STRUCTNAME">pg_am</TT></A>.oid</TT></TD><TD>索引访问方式操作符族</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">amopsortfamily</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-opfamily.html"><TT CLASS="STRUCTNAME">pg_opfamily</TT></A>.oid</TT></TD><TD>如果是一个排序操作符，则为这个项排序所依据的btree操作符族；
如果是一个搜索操作符，则为0</TD></TR></TBODY></TABLE></DIV><P><SPAN CLASS="QUOTE">"搜索"</SPAN>操作符表明这个操作符族的一个索引可以被搜索，找到所有满足
<TT CLASS="LITERAL">WHERE</TT> <TT CLASS="REPLACEABLE"><I>indexed_column</I></TT> <TT CLASS="REPLACEABLE"><I>operator</I></TT> <TT CLASS="REPLACEABLE"><I>constant</I></TT>的行。
显然，这样的操作符必须返回布尔值，并且它的左输入类型必须匹配索引的字段数据类型。</P><P><SPAN CLASS="QUOTE">"排序"</SPAN>操作符表明这个操作符族的一个索引可以被扫描，返回以
<TT CLASS="LITERAL">ORDER BY</TT> <TT CLASS="REPLACEABLE"><I>indexed_column</I></TT> <TT CLASS="REPLACEABLE"><I>operator</I></TT> <TT CLASS="REPLACEABLE"><I>constant</I></TT>
顺序表示的行。这样的操作符可以返回任意可排序的数据类型，它的左输入类型也必须匹配索引的字段数据类型。
<TT CLASS="LITERAL">ORDER BY</TT>的确切的语义是由<TT CLASS="STRUCTFIELD">amopsortfamily</TT>字段指定的，
该字段必须为操作符的返回类型引用一个btree操作符族。</P><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>&#27880;&#24847;: </B>目前，假设排序操作符的排序顺序是被族缺省引用的，也就是<TT CLASS="LITERAL">ASC NULLS LAST</TT>。
这可以通过添加附加的行来明确声明排序选项来释放。</P></BLOCKQUOTE></DIV><P>一个项的<TT CLASS="STRUCTFIELD">amopmethod</TT>必须匹配它包含的操作符族的<TT CLASS="STRUCTNAME">opfmethod</TT>
（包括<TT CLASS="STRUCTFIELD">amopmethod</TT>是故意违反性能原因的表结构的规范化）。同样，
<TT CLASS="STRUCTFIELD">amoplefttype</TT>和<TT CLASS="STRUCTFIELD">amoprighttype</TT>必须匹配引用的
<TT CLASS="STRUCTNAME">pg_operator</TT>的<TT CLASS="STRUCTFIELD">oprleft</TT>和<TT CLASS="STRUCTFIELD">oprright</TT>。</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="catalog-pg-am.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="catalog-pg-amproc.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><TT CLASS="STRUCTNAME">pg_am</TT></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/catalogs.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><TT CLASS="STRUCTNAME">pg_amproc</TT></TD></TR></TABLE></DIV></BODY></HTML>
