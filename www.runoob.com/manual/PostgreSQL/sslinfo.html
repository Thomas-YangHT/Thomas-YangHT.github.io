<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>sslinfo</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="额外提供的模块" HREF="http://school.yunwei.edu/manual/PostgreSQL/contrib.html"><LINK REL="PREVIOUS" TITLE="spi" HREF="contrib-spi.html"><LINK REL="NEXT" TITLE="tablefunc" HREF="tablefunc.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/sslinfo.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="spi" HREF="contrib-spi.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/contrib.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#38468;&#24405; F. 额外提供的模块</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="tablefunc" HREF="tablefunc.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="SSLINFO">F.35. sslinfo</A></H1><P><TT CLASS="FILENAME">sslinfo</TT>模块提供关于连接到<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>
时当前客户端提供的SSL认证的信息。如果当前连接没有使用SSL，
那么该模块是无用的（大部分函数将返回NULL）。</P><P>这个扩展不会建立，除非安装时配置带有<TT CLASS="LITERAL">--with-openssl</TT>。</P><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN150375">F.35.1. 提供的函数</A></H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><CODE CLASS="FUNCTION">ssl_is_used() returns boolean</CODE></DT><DD><P>如果当前到服务器的连接使用了SSL则返回TRUE，否则返回FALSE。</P></DD><DT><CODE CLASS="FUNCTION">ssl_version() returns text</CODE></DT><DD><P>返回SSL连接使用的协议名（如SSLv2，SSLv3，或TLSv1）</P></DD><DT><CODE CLASS="FUNCTION">ssl_cipher() returns text</CODE></DT><DD><P>返回SSL连接使用的密码名称（如DHE-RSA-AES256-SHA）。</P></DD><DT><CODE CLASS="FUNCTION">ssl_client_cert_present() returns boolean</CODE></DT><DD><P>如果当前客户端提供了一个有效的SSL客户端证书到服务器则返回TRUE，否则返回FALSE。
（服务器可能或可能没有被配置为需要一个客户端证书。）</P></DD><DT><CODE CLASS="FUNCTION">ssl_client_serial() returns numeric</CODE></DT><DD><P>返回当前客户端证书的序列号。证书序列号和证书发行者的组合保证为唯一的标识一个证书
（但不是它的所有者&mdash;所有者应该定期的改变它的秘钥，并从发行者处获得新的证书。）</P><P>所以，如果你运行自己的CA并且只允许来自这个CA的证书被服务器接受，
那么序列编号是识别一个用户最可靠（虽然不是很帮助记忆）的手段。</P></DD><DT><CODE CLASS="FUNCTION">ssl_client_dn() returns text</CODE></DT><DD><P>返回当前客户端认证的全部科目，转换字符数据为当前数据库编码。
假设如果在证书名里使用非ASCII字符，那么数据库也可以表示这些字符。
如果数据库使用SQL_ASCII编码，那么名字中的非ASCII字符将用UTF-8序列表示。</P><P>结果看起来像<TT CLASS="LITERAL">/CN=Somebody /C=Some country/O=Some organization</TT>。</P></DD><DT><CODE CLASS="FUNCTION">ssl_issuer_dn() returns text</CODE></DT><DD><P>返回当前客户端认证的全部发行者名字，转换字符数据为当前数据库编码。
编码转换的处理和<CODE CLASS="FUNCTION">ssl_client_dn</CODE>相同。</P><P>这个函数的返回值的组合和证书序列编号唯一的标识该证书。</P><P>只有你有多于一个信任的CA证书在服务器的<TT CLASS="FILENAME">root.crt</TT>文件时，
或者如果这个CA已经发布了一些中级证书授权证书，这个函数才真正的有用。</P></DD><DT><CODE CLASS="FUNCTION">ssl_client_dn_field(fieldname text) returns text</CODE></DT><DD><P>这个函数返回证书主题中的指定字段值，或者如果该字段不存在则为NULL。
为字符串常量的字段名转换为使用OpenSSL对象数据库的ASN1对象标识符。
下列的值是可接受的：</P><PRE CLASS="LITERALLAYOUT">commonName (alias CN)
surname (alias SN)
name
givenName (alias GN)
countryName (alias C)
localityName (alias L)
stateOrProvinceName (alias ST)
organizationName (alias O)
organizationUnitName (alias OU)
title
description
initials
postalCode
streetAddress
generationQualifier
description
dnQualifier
x500UniqueIdentifier
pseudonym
role
emailAddress</PRE><P>所有这些字段都是可选的，除了<TT CLASS="STRUCTFIELD">commonName</TT>。
它完全取决于你的证书的政策将包括或不包括。不过，
这些字段的含义严格的由X.500和X.509标准定义，所以不能任意分配它们的含义。</P></DD><DT><CODE CLASS="FUNCTION">ssl_issuer_field(fieldname text) returns text</CODE></DT><DD><P>和<CODE CLASS="FUNCTION">ssl_client_dn_field</CODE>相同，除了是证书发行者而不是证书主题。</P></DD></DL></DIV></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN150452">F.35.2. 作者</A></H2><P> Victor Wagner <CODE CLASS="EMAIL">&#60;<A HREF="mailto:vitus@cryptocom.ru">vitus@cryptocom.ru</A>&#62;</CODE>, Cryptocom LTD
</P><P>Cryptocom OpenSSL开发团队的E-Mail：<CODE CLASS="EMAIL">&#60;<A HREF="mailto:openssl@cryptocom.ru">openssl@cryptocom.ru</A>&#62;</CODE></P></DIV></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="contrib-spi.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="tablefunc.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">spi</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/contrib.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">tablefunc</TD></TR></TABLE></DIV></BODY></HTML>
