<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>数据类型格式化函数</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="函数和操作符" HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html"><LINK REL="PREVIOUS" TITLE="模式匹配" HREF="functions-matching.html"><LINK REL="NEXT" TITLE="时间/日期函数和操作符" HREF="functions-datetime.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/func.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="模式匹配" HREF="functions-matching.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 9. 函数和操作符</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="时间/日期函数和操作符" HREF="functions-datetime.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="FUNCTIONS-FORMATTING">9.8. 数据类型格式化函数</A></H1><P><SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>格式化函数提供一套有效的工具用于把各
种数据类型转换成格式化的字符串以及反过来从格式化的字符串转换成指定的数据类型。
<A HREF="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE">&#34920; 9-20</A>列出了这些函数。
这些函数都遵循一个公共的调用习惯：第一个参数是待格式化的值，
而第二个是定义输出或输入格式的模板。</P><P>单参数<CODE CLASS="FUNCTION">to_timestamp</CODE>函数也可以使用；它接受一个<TT CLASS="TYPE">double precision</TT>
参数，并且从Unix纪元（秒自1970-01-01 00:00:00+00）转换为<TT CLASS="TYPE">timestamp with time zone</TT>
类型。（<TT CLASS="TYPE">Integer</TT>类型的Unix纪元隐含的转换为<TT CLASS="TYPE">double precision</TT>类型。）</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-FORMATTING-TABLE"></A><P><B>&#34920; 9-20. 格式化函数</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><THEAD><TR><TH>函数</TH><TH>返回类型</TH><TH>描述</TH><TH>例子</TH></TR></THEAD><TBODY><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_char(<TT CLASS="TYPE">timestamp</TT>, <TT CLASS="TYPE">text</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">text</TT></TD><TD>把时间戳转换成字符串</TD><TD><TT CLASS="LITERAL">to_char(current_timestamp, 'HH12:MI:SS')</TT></TD></TR><TR><TD><TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_char(<TT CLASS="TYPE">interval</TT>, <TT CLASS="TYPE">text</TT>)</CODE></TT></TD><TD><TT CLASS="TYPE">text</TT></TD><TD>把时间间隔转为字符串</TD><TD><TT CLASS="LITERAL">to_char(interval '15h&nbsp;2m&nbsp;12s', 'HH24:MI:SS')</TT></TD></TR><TR><TD><TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_char(<TT CLASS="TYPE">int</TT>, <TT CLASS="TYPE">text</TT>)</CODE></TT></TD><TD><TT CLASS="TYPE">text</TT></TD><TD>把整数转换成字符串</TD><TD><TT CLASS="LITERAL">to_char(125, '999')</TT></TD></TR><TR><TD><TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_char</CODE>(<TT CLASS="TYPE">double precision</TT>,
<TT CLASS="TYPE">text</TT>)</TT></TD><TD><TT CLASS="TYPE">text</TT></TD><TD>把实数/双精度数转换成字符串</TD><TD><TT CLASS="LITERAL">to_char(125.8::real, '999D9')</TT></TD></TR><TR><TD><TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_char(<TT CLASS="TYPE">numeric</TT>, <TT CLASS="TYPE">text</TT>)</CODE></TT></TD><TD><TT CLASS="TYPE">text</TT></TD><TD>把数字转换成字符串</TD><TD><TT CLASS="LITERAL">to_char(-125.8, '999D99S')</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_date(<TT CLASS="TYPE">text</TT>, <TT CLASS="TYPE">text</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">date</TT></TD><TD>把字符串转换成日期</TD><TD><TT CLASS="LITERAL">to_date('05&nbsp;Dec&nbsp;2000', 'DD&nbsp;Mon&nbsp;YYYY')</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_number(<TT CLASS="TYPE">text</TT>, <TT CLASS="TYPE">text</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">numeric</TT></TD><TD>把字符串转换成数字</TD><TD><TT CLASS="LITERAL">to_number('12,454.8-', '99G999D9S')</TT></TD></TR><TR><TD>
<TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_timestamp(<TT CLASS="TYPE">text</TT>, <TT CLASS="TYPE">text</TT>)</CODE></TT>
</TD><TD><TT CLASS="TYPE">timestamp with time zone</TT></TD><TD>把字符串转换成时间戳</TD><TD><TT CLASS="LITERAL">to_timestamp('05&nbsp;Dec&nbsp;2000', 'DD&nbsp;Mon&nbsp;YYYY')</TT></TD></TR><TR><TD><TT CLASS="LITERAL"><CODE CLASS="FUNCTION">to_timestamp(<TT CLASS="TYPE">double precision</TT>)</CODE></TT></TD><TD><TT CLASS="TYPE">timestamp with time zone</TT></TD><TD>把 Unix 纪元转换成时间戳</TD><TD><TT CLASS="LITERAL">to_timestamp(1284352323)</TT></TD></TR></TBODY></TABLE></DIV><P>在<CODE CLASS="FUNCTION">to_char</CODE>输出模板字符串里，该函数族可以识别一些特定的模式，
并且把给定的数值正确地格式化成相应的数据。任何不属于模板模式的文本都简单地逐字拷贝。
同样，在一个输入模板字符串里(对其他函数)，模板模式标识数值由输入数据字符串提供。</P><P><A HREF="functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE">&#34920; 9-21</A>显示了可以用于格式化日期和时间值的模版。</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-FORMATTING-DATETIME-TABLE"></A><P><B>&#34920; 9-21. 用于日期/时间格式化的模式</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>模式</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL">HH</TT></TD><TD>一天的小时数(01-12)</TD></TR><TR><TD><TT CLASS="LITERAL">HH12</TT></TD><TD>一天的小时数(01-12)</TD></TR><TR><TD><TT CLASS="LITERAL">HH24</TT></TD><TD>一天的小时数(00-23)</TD></TR><TR><TD><TT CLASS="LITERAL">MI</TT></TD><TD>分钟(00-59)</TD></TR><TR><TD><TT CLASS="LITERAL">SS</TT></TD><TD>秒(00-59)</TD></TR><TR><TD><TT CLASS="LITERAL">MS</TT></TD><TD>毫秒(000-999)</TD></TR><TR><TD><TT CLASS="LITERAL">US</TT></TD><TD>微秒(000000-999999)</TD></TR><TR><TD><TT CLASS="LITERAL">SSSS</TT></TD><TD>午夜后的秒(0-86399)</TD></TR><TR><TD><TT CLASS="LITERAL">AM</TT>, <TT CLASS="LITERAL">am</TT>,
<TT CLASS="LITERAL">PM</TT> 或 <TT CLASS="LITERAL">pm</TT></TD><TD>正午指示器(没有周期)</TD></TR><TR><TD><TT CLASS="LITERAL">A.M.</TT>, <TT CLASS="LITERAL">a.m.</TT>,
<TT CLASS="LITERAL">P.M.</TT> 或 <TT CLASS="LITERAL">p.m.</TT></TD><TD>正午指示器(有周期)</TD></TR><TR><TD><TT CLASS="LITERAL">Y,YYY</TT></TD><TD>带逗号的年(4 和更多位)</TD></TR><TR><TD><TT CLASS="LITERAL">YYYY</TT></TD><TD>年(4 和更多位)</TD></TR><TR><TD><TT CLASS="LITERAL">YYY</TT></TD><TD>年的后三位</TD></TR><TR><TD><TT CLASS="LITERAL">YY</TT></TD><TD>年的后两位</TD></TR><TR><TD><TT CLASS="LITERAL">Y</TT></TD><TD>年的最后一位</TD></TR><TR><TD><TT CLASS="LITERAL">IYYY</TT></TD><TD>ISO年(4 位或更多位)</TD></TR><TR><TD><TT CLASS="LITERAL">IYY</TT></TD><TD>ISO年的最后三位</TD></TR><TR><TD><TT CLASS="LITERAL">IY</TT></TD><TD>ISO年的最后两位</TD></TR><TR><TD><TT CLASS="LITERAL">I</TT></TD><TD>ISO年的最后一位</TD></TR><TR><TD><TT CLASS="LITERAL">BC</TT>, <TT CLASS="LITERAL">bc</TT>,
<TT CLASS="LITERAL">AD</TT> 或 <TT CLASS="LITERAL">ad</TT></TD><TD>纪元标识(没有周期)</TD></TR><TR><TD><TT CLASS="LITERAL">B.C.</TT>, <TT CLASS="LITERAL">b.c.</TT>,
<TT CLASS="LITERAL">A.D.</TT> 或 <TT CLASS="LITERAL">a.d.</TT></TD><TD>纪元标识(有周期)</TD></TR><TR><TD><TT CLASS="LITERAL">MONTH</TT></TD><TD>全长大写月份名(空白填充为 9 字符)</TD></TR><TR><TD><TT CLASS="LITERAL">Month</TT></TD><TD>全长首字母大写月份名(空白填充为 9 字符)</TD></TR><TR><TD><TT CLASS="LITERAL">month</TT></TD><TD>全长小写月份名(空白填充为 9 字符)</TD></TR><TR><TD><TT CLASS="LITERAL">MON</TT></TD><TD>大写缩写月份名(英文3 字符，本地化的长度不同)</TD></TR><TR><TD><TT CLASS="LITERAL">Mon</TT></TD><TD>首字母大写缩写月份名(英文3 字符，本地化的长度不同)</TD></TR><TR><TD><TT CLASS="LITERAL">mon</TT></TD><TD>小写缩写月份名(英文3 字符，本地化的长度不同)</TD></TR><TR><TD><TT CLASS="LITERAL">MM</TT></TD><TD>月份数(01-12)</TD></TR><TR><TD><TT CLASS="LITERAL">DAY</TT></TD><TD>全长大写日期名(空白填充为 9 字符)</TD></TR><TR><TD><TT CLASS="LITERAL">Day</TT></TD><TD>全长首字母大写日期名(空白填充为 9 字符)</TD></TR><TR><TD><TT CLASS="LITERAL">day</TT></TD><TD>全长小写日期名(空白填充为 9 字符)</TD></TR><TR><TD><TT CLASS="LITERAL">DY</TT></TD><TD>缩写大写日期名(英文3 字符，本地化长度不同)</TD></TR><TR><TD><TT CLASS="LITERAL">Dy</TT></TD><TD>缩写首字母大写日期名(英文3 字符，本地化长度不同)</TD></TR><TR><TD><TT CLASS="LITERAL">dy</TT></TD><TD>缩写小写日期名(英文3 字符，本地化长度不同)</TD></TR><TR><TD><TT CLASS="LITERAL">DDD</TT></TD><TD>一年里的日(001-366)</TD></TR><TR><TD><TT CLASS="LITERAL">IDDD</TT></TD><TD>ISO一年里的日（001-371；年的第一天是第一个ISO周的星期一）</TD></TR><TR><TD><TT CLASS="LITERAL">DD</TT></TD><TD>一个月里的日(01-31)</TD></TR><TR><TD><TT CLASS="LITERAL">D</TT></TD><TD>一周里的日，星期日（<TT CLASS="LITERAL">1</TT>）到星期六（<TT CLASS="LITERAL">7</TT>）</TD></TR><TR><TD><TT CLASS="LITERAL">ID</TT></TD><TD>ISO一周里的日，星期一（<TT CLASS="LITERAL">1</TT>）到星期日（<TT CLASS="LITERAL">7</TT>）</TD></TR><TR><TD><TT CLASS="LITERAL">W</TT></TD><TD>一个月里的周数(1-5)(第一周从该月第一天开始)</TD></TR><TR><TD><TT CLASS="LITERAL">WW</TT></TD><TD>一年里的周数(1-53)(第一周从该年的第一天开始)</TD></TR><TR><TD><TT CLASS="LITERAL">IW</TT></TD><TD>ISO一年里的周数(01-53；第一个星期四在第一周里)</TD></TR><TR><TD><TT CLASS="LITERAL">CC</TT></TD><TD>世纪(2 位)(20 世纪从 2001-01-01 开始)</TD></TR><TR><TD><TT CLASS="LITERAL">J</TT></TD><TD>儒略日(自公元前 4714 年 11 月 24日午夜来的天数)</TD></TR><TR><TD><TT CLASS="LITERAL">Q</TT></TD><TD>季度（<CODE CLASS="FUNCTION">to_date</CODE>和<CODE CLASS="FUNCTION">to_timestamp</CODE>忽略此项）</TD></TR><TR><TD><TT CLASS="LITERAL">RM</TT></TD><TD>罗马数字的月份(I-XII ；I=January)(大写)</TD></TR><TR><TD><TT CLASS="LITERAL">rm</TT></TD><TD>罗马数字的月份(i-xii ；i=January)(小写)</TD></TR><TR><TD><TT CLASS="LITERAL">TZ</TT></TD><TD>时区名(大写)</TD></TR><TR><TD><TT CLASS="LITERAL">tz</TT></TD><TD>时区名(小写)</TD></TR></TBODY></TABLE></DIV><P>有一些修饰词可以应用于模板来修改它们的行为。比如，<TT CLASS="LITERAL">FMMonth</TT>
就是带着<TT CLASS="LITERAL">FM</TT>前缀的<TT CLASS="LITERAL">Month</TT>模式。
<A HREF="functions-formatting.html#FUNCTIONS-FORMATTING-DATETIMEMOD-TABLE">&#34920; 9-22</A>
显示了用于日期/时间格式化的修饰词模式。</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-FORMATTING-DATETIMEMOD-TABLE"></A><P><B>&#34920; 9-22. 日期/时间格式化的模板模式修饰词</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><THEAD><TR><TH>修饰词</TH><TH>描述</TH><TH>例子</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL">FM</TT> 前缀</TD><TD>填充模式(抑制填充空白和尾随零)</TD><TD><TT CLASS="LITERAL">FMMonth</TT></TD></TR><TR><TD><TT CLASS="LITERAL">TH</TT> 后缀</TD><TD>大写顺序数后缀</TD><TD><TT CLASS="LITERAL">DDTH</TT>, 例如, <TT CLASS="LITERAL">12TH</TT></TD></TR><TR><TD><TT CLASS="LITERAL">th</TT> 后缀</TD><TD>小写顺序数后缀</TD><TD><TT CLASS="LITERAL">DDth</TT>, 例如, <TT CLASS="LITERAL">12th</TT></TD></TR><TR><TD><TT CLASS="LITERAL">FX</TT> 前缀</TD><TD>固定格式全局选项(见用法须知)</TD><TD><TT CLASS="LITERAL">FX&nbsp;Month&nbsp;DD&nbsp;Day</TT></TD></TR><TR><TD><TT CLASS="LITERAL">TM</TT> 前缀</TD><TD>翻译模式(基于<A HREF="runtime-config-client.html#GUC-LC-TIME">lc_time</A>显示本地化的日期和月份名)</TD><TD><TT CLASS="LITERAL">TMMonth</TT></TD></TR><TR><TD><TT CLASS="LITERAL">SP</TT> 后缀</TD><TD>拼写模式(未实现)</TD><TD><TT CLASS="LITERAL">DDSP</TT></TD></TR></TBODY></TABLE></DIV><P>
日期/时间格式化的用法须知：
<P></P></P><UL><LI><P><TT CLASS="LITERAL">FM</TT>抑制前导的零或尾随的空白。如果没有使用它的话，
会在输出中增加这些填充最终把输出变成固定宽度的模式。
在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>中，<TT CLASS="LITERAL">FM</TT>只修改下一个规范；
而在Oracle中<TT CLASS="LITERAL">FM</TT>影响所有随后的规范，
并且重复的<TT CLASS="LITERAL">FM</TT>修饰符切换填充模式的打开和关闭。</P></LI><LI><P><TT CLASS="LITERAL">TM</TT>不包含结尾空白。</P></LI><LI><P>如果没有使用<TT CLASS="LITERAL">FX</TT>，<CODE CLASS="FUNCTION">to_timestamp</CODE>和<CODE CLASS="FUNCTION">to_date</CODE>
在转换字符串的时候忽略多个空白。比如<TT CLASS="LITERAL">to_timestamp('2000&nbsp;&nbsp;&nbsp;&nbsp;JUN', 'YYYY MON')</TT>
是正确的，但是<TT CLASS="LITERAL">to_timestamp('2000&nbsp;&nbsp;&nbsp;&nbsp;JUN', 'FXYYYY MON')</TT>
会返回一个错误，因为<CODE CLASS="FUNCTION">to_timestamp</CODE>只预料会有一个空白。
<TT CLASS="LITERAL">FX</TT>必须做为模板里的第一个项声明。</P></LI><LI><P>在<CODE CLASS="FUNCTION">to_char</CODE>模板里可以有普通文本，并且它们会被逐字输出。
你可以把一个字符串放到双引号里强迫它解释成一个文本，即使它里面包含模式关键字也如此。
比如<TT CLASS="LITERAL">'"Hello Year "YYYY'</TT>中的<TT CLASS="LITERAL">YYYY</TT>将被年份数据代替，
但是<TT CLASS="LITERAL">Year</TT>里单独的<TT CLASS="LITERAL">Y</TT>会。在<CODE CLASS="FUNCTION">to_date</CODE>，
<CODE CLASS="FUNCTION">to_number</CODE>和<CODE CLASS="FUNCTION">to_timestamp</CODE>里，加双引号的字符串忽略包含在字符串中的输入字符的数量，
例如，<TT CLASS="LITERAL">"XX"</TT>忽略两个输入字符。</P></LI><LI><P>如果你想在输出里有双引号，那么你必须在它们前面放反斜杠，比如<TT CLASS="LITERAL">'\"YYYY Month\"'</TT>。</P></LI><LI><P>如果年份的格式规范少于四个字节，例如<TT CLASS="LITERAL">YYY</TT>，并且提供的年份少于四个字节，
那么年份将调整为接近于2020，例如<TT CLASS="LITERAL">95</TT>成为1995。</P></LI><LI><P>如果你使用的年份长于4位字符，那么用<TT CLASS="LITERAL">YYYY</TT>从字符串向<TT CLASS="TYPE">timestamp</TT>
或<TT CLASS="TYPE">date</TT>做转换时要受到限制。你必须在<TT CLASS="LITERAL">YYYY</TT>
后面使用一些非数字字符或者模板，否则年份总是解释为 4 位数字。比如对于 20000 年：
<TT CLASS="LITERAL">to_date('200001131', 'YYYYMMDD')</TT>将会被解释成一个 4 位数字的年份，
最好在年后面使用一个非数字的分隔符，像<TT CLASS="LITERAL">to_date('20000-1131', 'YYYY-MMDD')</TT>
或<TT CLASS="LITERAL">to_date('20000Nov31', 'YYYYMonDD')</TT>。</P></LI><LI><P>在从字符串向<TT CLASS="TYPE">timestamp</TT>或<TT CLASS="TYPE">date</TT>转换的时候，如果有<TT CLASS="LITERAL">YYY</TT>,
<TT CLASS="LITERAL">YYYY</TT>或<TT CLASS="LITERAL">Y,YYY</TT>字段，那么<TT CLASS="LITERAL">CC</TT>字段会被忽略。
如果<TT CLASS="LITERAL">CC</TT>与<TT CLASS="LITERAL">YY</TT>或<TT CLASS="LITERAL">Y</TT>一起使用，
那么年份用指定的世纪计算。如果指定了世纪而没有指定年，那么假设使用这个世纪的第一年。</P></LI><LI><P>ISO周时间（有别于公历日期）可以用下面的两种方法之一声明为
<CODE CLASS="FUNCTION">to_timestamp</CODE>和<CODE CLASS="FUNCTION">to_date</CODE>：
<P></P></P><UL><LI><P>年，周和工作日：例如<TT CLASS="LITERAL">to_date('2006-42-4', 'IYYY-IW-ID')</TT>
返回日期<TT CLASS="LITERAL">2006-10-19</TT>。如果你省略工作日，那么它假设为1（星期一）。</P></LI><LI><P>年和一年中的日：例如<TT CLASS="LITERAL">to_date('2006-291', 'IYYY-IDDD')</TT>返回
<TT CLASS="LITERAL">2006-10-19</TT>。</P></LI></UL><P>
</P><P>试图用ISO周和公历日期字段混合构造日期是没有意义的，并且将导致一个错误。
在ISO年的范围，<SPAN CLASS="QUOTE">"月"</SPAN>和<SPAN CLASS="QUOTE">"月中的天"</SPAN>的概念没有意义。
在公历年的范围，ISO周没有意义。用户应该避免混合公历和ISO日期规范。</P></LI><LI><P>将字符串转化为<TT CLASS="TYPE">timestamp</TT>时，毫秒(<TT CLASS="LITERAL">MS</TT>)和微秒(<TT CLASS="LITERAL">US</TT>)
都是用小数点后面的位数转换的。比如<TT CLASS="LITERAL">to_timestamp('12:3', 'SS:MS')</TT>
不是 3 毫秒, 而是 300 毫秒，因为转换把它看做 12+0.3 秒。这意味着对于格式<TT CLASS="LITERAL">SS:MS</TT>
而言，输入值<TT CLASS="LITERAL">12:3</TT>,<TT CLASS="LITERAL">12:30</TT>,<TT CLASS="LITERAL">12:300</TT>
声明了相同的毫秒数。对于 3 毫秒，你必须使用<TT CLASS="LITERAL">12:003</TT>，
那么转换会把它看做 12+0.003 = 12.003 秒。</P><P>这个更复杂的例子<TT CLASS="LITERAL">to_timestamp('15:12:02.020.001230', 'HH:MI:SS.MS.US')</TT>
是 15小时、12分钟、2秒+20毫秒+1230微秒 = 2.021230秒。</P></LI><LI><P><CODE CLASS="FUNCTION">to_char(..., 'ID')</CODE>的星期编号匹配<CODE CLASS="FUNCTION">extract(isodow from ...)</CODE>
函数，但是<CODE CLASS="FUNCTION">to_char(..., 'D')</CODE>的星期编号不匹配<CODE CLASS="FUNCTION">extract(dow from ...)</CODE>
的天编号。</P></LI><LI><P><CODE CLASS="FUNCTION">to_char(interval)</CODE>将<TT CLASS="LITERAL">HH</TT>和<TT CLASS="LITERAL">HH12</TT>格式化为12小时，
也就是零时和36时输出是<TT CLASS="LITERAL">12</TT>，而<TT CLASS="LITERAL">HH24</TT>可以输出完整的小时数，
时间间隔可以超过23。</P></LI></UL><P>
</P><P><A HREF="functions-formatting.html#FUNCTIONS-FORMATTING-NUMERIC-TABLE">&#34920; 9-23</A>显示了用于数值格式化的模板模式。</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-FORMATTING-NUMERIC-TABLE"></A><P><B>&#34920; 9-23. 数值格式化的模版模式</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>模式</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL">9</TT></TD><TD>带有指定数值位数的值</TD></TR><TR><TD><TT CLASS="LITERAL">0</TT></TD><TD>带前导零的值</TD></TR><TR><TD><TT CLASS="LITERAL">.</TT> (句点)</TD><TD>小数点</TD></TR><TR><TD><TT CLASS="LITERAL">,</TT> (逗号)</TD><TD>分组(千) 分隔符</TD></TR><TR><TD><TT CLASS="LITERAL">PR</TT></TD><TD>尖括号内负值</TD></TR><TR><TD><TT CLASS="LITERAL">S</TT></TD><TD>带符号的数值(使用区域设置)</TD></TR><TR><TD><TT CLASS="LITERAL">L</TT></TD><TD>货币符号(使用区域设置)</TD></TR><TR><TD><TT CLASS="LITERAL">D</TT></TD><TD>小数点(使用区域设置)</TD></TR><TR><TD><TT CLASS="LITERAL">G</TT></TD><TD>分组分隔符(使用区域设置)</TD></TR><TR><TD><TT CLASS="LITERAL">MI</TT></TD><TD>在指明的位置的负号(如果数字 &lt; 0)</TD></TR><TR><TD><TT CLASS="LITERAL">PL</TT></TD><TD>在指明的位置的正号(如果数字 &gt; 0)</TD></TR><TR><TD><TT CLASS="LITERAL">SG</TT></TD><TD>在指明的位置的正/负号</TD></TR><TR><TD><TT CLASS="LITERAL">RN</TT></TD><TD>罗马数字(输入在 1 和 3999 之间)</TD></TR><TR><TD><TT CLASS="LITERAL">TH</TT> or <TT CLASS="LITERAL">th</TT></TD><TD>序数后缀</TD></TR><TR><TD><TT CLASS="LITERAL">V</TT></TD><TD>移动指定位(小数)(参阅注解)</TD></TR><TR><TD><TT CLASS="LITERAL">EEEE</TT></TD><TD>指数为科学记数法</TD></TR></TBODY></TABLE></DIV><P>数字格式化的用法须知：
<P></P></P><UL><LI><P>使用<TT CLASS="LITERAL">SG</TT>, <TT CLASS="LITERAL">PL</TT>, <TT CLASS="LITERAL">MI</TT>
生成的符号并不挂在数字上面；比如，<TT CLASS="LITERAL">to_char(-12, 'MI9999')</TT>
生成<TT CLASS="LITERAL">'-&nbsp;&nbsp;12'</TT>；但是<TT CLASS="LITERAL">to_char(-12, 'S9999')</TT>
<TT CLASS="LITERAL">'&nbsp;&nbsp;-12'</TT>。Oracle里的实现不允许在<TT CLASS="LITERAL">9</TT>
前面使用<TT CLASS="LITERAL">MI</TT>，而是要求<TT CLASS="LITERAL">9</TT>在<TT CLASS="LITERAL">MI</TT>前面。</P></LI><LI><P><TT CLASS="LITERAL">9</TT>声明和<TT CLASS="LITERAL">9</TT>的个数相同的数字位数的数值。
如果某个数值位没有数字，则输出一个空白。</P></LI><LI><P><TT CLASS="LITERAL">TH</TT>不会转换小于零的数值，也不会转换小数。</P></LI><LI><P><TT CLASS="LITERAL">PL</TT>, <TT CLASS="LITERAL">SG</TT>, <TT CLASS="LITERAL">TH</TT>
是<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>扩展。</P></LI><LI><P><TT CLASS="LITERAL">V</TT>方便地把输入值乘以 <TT CLASS="LITERAL">10^<TT CLASS="REPLACEABLE"><I>n</I></TT></TT>，
这里<TT CLASS="REPLACEABLE"><I>n</I></TT>是跟在<TT CLASS="LITERAL">V</TT>后面的数字。
<CODE CLASS="FUNCTION">to_char</CODE>不支持把<TT CLASS="LITERAL">V</TT>
与一个小数点组合在一起使用(也就是说<TT CLASS="LITERAL">99.9V99</TT>是不允许的)。</P></LI><LI><P><TT CLASS="LITERAL">EEEE</TT>（科学记数法）不能和任何其他格式化的模式或修饰符以外的数字和小数点模式混合使用，
并且必须在格式化字符串的后面（例如，<TT CLASS="LITERAL">9.99EEEE</TT>是合法的模式）。</P></LI></UL><P>
</P><P>一定的修饰符可以应用于任何模板模式来改变其行为。例如，<TT CLASS="LITERAL">FM9999</TT>
是<TT CLASS="LITERAL">9999</TT>模式和<TT CLASS="LITERAL">FM</TT>修饰符。
<A HREF="functions-formatting.html#FUNCTIONS-FORMATTING-NUMERICMOD-TABLE">&#34920; 9-24</A>显示了数字格式的修饰符模式。</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-FORMATTING-NUMERICMOD-TABLE"></A><P><B>&#34920; 9-24. 数字格式的模板模式修饰符</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><THEAD><TR><TH>修饰符</TH><TH>描述</TH><TH>示例</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL">FM</TT> 前缀</TD><TD>填充模式 (抑制填充空白和尾随零)</TD><TD><TT CLASS="LITERAL">FM9999</TT></TD></TR><TR><TD><TT CLASS="LITERAL">TH</TT> 后缀</TD><TD>大写顺序数后缀</TD><TD><TT CLASS="LITERAL">999TH</TT></TD></TR><TR><TD><TT CLASS="LITERAL">th</TT> 后缀</TD><TD>小写顺序数后缀</TD><TD><TT CLASS="LITERAL">999th</TT></TD></TR></TBODY></TABLE></DIV><P><A HREF="functions-formatting.html#FUNCTIONS-FORMATTING-EXAMPLES-TABLE">&#34920; 9-25</A>显示了一些
<CODE CLASS="FUNCTION">to_char</CODE>函数的用法。</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-FORMATTING-EXAMPLES-TABLE"></A><P><B>&#34920; 9-25. <CODE CLASS="FUNCTION">to_char</CODE> 示例</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>表达式</TH><TH>结果</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL">to_char(current_timestamp, 'Day,&nbsp;DD&nbsp;&nbsp;HH12:MI:SS')</TT></TD><TD><TT CLASS="LITERAL">'Tuesday&nbsp;&nbsp;,&nbsp;06&nbsp;&nbsp;05:39:18'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(current_timestamp, 'FMDay,&nbsp;FMDD&nbsp;&nbsp;HH12:MI:SS')</TT></TD><TD><TT CLASS="LITERAL">'Tuesday,&nbsp;6&nbsp;&nbsp;05:39:18'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-0.1, '99.99')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;&nbsp;-.10'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-0.1, 'FM9.99')</TT></TD><TD><TT CLASS="LITERAL">'-.1'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(0.1, '0.9')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;0.1'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(12, '9990999.9')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;&nbsp;&nbsp;&nbsp;0012.0'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(12, 'FM9990999.9')</TT></TD><TD><TT CLASS="LITERAL">'0012.'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, '999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-485, '999')</TT></TD><TD><TT CLASS="LITERAL">'-485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, '9&nbsp;9&nbsp;9')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;4&nbsp;8&nbsp;5'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(1485, '9,999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;1,485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(1485, '9G999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;1&nbsp;485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(148.5, '999.999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;148.500'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(148.5, 'FM999.999')</TT></TD><TD><TT CLASS="LITERAL">'148.5'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(148.5, 'FM999.990')</TT></TD><TD><TT CLASS="LITERAL">'148.500'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(148.5, '999D999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;148.500'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(3148.5, '9G999D999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;3,148.500'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-485, '999S')</TT></TD><TD><TT CLASS="LITERAL">'485-'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-485, '999MI')</TT></TD><TD><TT CLASS="LITERAL">'485-'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, '999MI')</TT></TD><TD><TT CLASS="LITERAL">'485&nbsp;'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, 'FM999MI')</TT></TD><TD><TT CLASS="LITERAL">'485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, 'PL999')</TT></TD><TD><TT CLASS="LITERAL">'+485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, 'SG999')</TT></TD><TD><TT CLASS="LITERAL">'+&nbsp;485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-485, 'SG999')</TT></TD><TD><TT CLASS="LITERAL">'-485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-485, '9SG99')</TT></TD><TD><TT CLASS="LITERAL">'4-85'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(-485, '999PR')</TT></TD><TD><TT CLASS="LITERAL">'&lt;485&gt;'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, 'L999')</TT></TD><TD><TT CLASS="LITERAL">'DM&nbsp;485</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, 'RN')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDLXXXV'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, 'FMRN')</TT></TD><TD><TT CLASS="LITERAL">'CDLXXXV'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(5.2, 'FMRN')</TT></TD><TD><TT CLASS="LITERAL">'V'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(482, '999th')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;482nd'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485, '"Good&nbsp;number:"999')</TT></TD><TD><TT CLASS="LITERAL">'Good&nbsp;number:&nbsp;485'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(485.8, '"Pre:"999"&nbsp;Post:"&nbsp;.999')</TT></TD><TD><TT CLASS="LITERAL">'Pre:&nbsp;485&nbsp;Post:&nbsp;.800'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(12, '99V999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;12000'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(12.4, '99V999')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;12400'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(12.45, '99V9')</TT></TD><TD><TT CLASS="LITERAL">'&nbsp;125'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">to_char(0.0004859, '9.99EEEE')</TT></TD><TD><TT CLASS="LITERAL">' 4.86e-04'</TT></TD></TR></TBODY></TABLE></DIV></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="functions-matching.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="functions-datetime.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">模式匹配</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">时间/日期函数和操作符</TD></TR></TABLE></DIV></BODY></HTML>
