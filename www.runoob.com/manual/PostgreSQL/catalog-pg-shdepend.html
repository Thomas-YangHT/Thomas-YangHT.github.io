<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>pg_shdepend</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="系统表" HREF="http://school.yunwei.edu/manual/PostgreSQL/catalogs.html"><LINK REL="PREVIOUS" TITLE="pg_seclabel" HREF="catalog-pg-seclabel.html"><LINK REL="NEXT" TITLE="pg_shdescription" HREF="catalog-pg-shdescription.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/catalogs.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="pg_seclabel" HREF="catalog-pg-seclabel.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/catalogs.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 47. 系统表</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="pg_shdescription" HREF="catalog-pg-shdescription.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="CATALOG-PG-SHDEPEND">47.40. <TT CLASS="STRUCTNAME">pg_shdepend</TT></A></H1><P><TT CLASS="STRUCTNAME">pg_shdepend</TT>记录数据库对象和共享对象(比如角色)之间的依赖性关系。
这些信息允许<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>保证在企图删除这些对象之前，
这些对象是没有被引用的。</P><P><A HREF="catalog-pg-depend.html"><TT CLASS="STRUCTNAME">pg_depend</TT></A>表的作用类似，
只是它是用于在一个数据库内部的对象的依赖性关系的。</P><P>和其它大多数系统表不同，<TT CLASS="STRUCTNAME">pg_shdepend</TT>是在集群里面所有的数据库之间共享的：
每个数据库集群只有一个<TT CLASS="STRUCTNAME">pg_shdepend</TT>，而不是每个数据库一个。</P><DIV CLASS="TABLE"><A NAME="AEN95174"></A><P><B>&#34920; 47-40. <TT CLASS="STRUCTNAME">pg_shdepend</TT> 字段</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><THEAD><TR><TH>名字</TH><TH>类型</TH><TH>引用</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="STRUCTFIELD">dbid</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-database.html"><TT CLASS="STRUCTNAME">pg_database</TT></A>.oid</TT></TD><TD>依赖对象所在的数据库的 OID ，如果是共享对象，则为零</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">classid</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-class.html"><TT CLASS="STRUCTNAME">pg_class</TT></A>.oid</TT></TD><TD>依赖对象所在的系统表的 OID</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">objid</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD>任意 oid 属性</TD><TD>指定的依赖对象的 OID</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">objsubid</TT></TD><TD><TT CLASS="TYPE">int4</TT></TD><TD>&nbsp;</TD><TD>
对于一个表字段，这是字段号（<TT CLASS="STRUCTFIELD">objid</TT>和<TT CLASS="STRUCTFIELD">classid</TT>
参考表本身）。对于所有其他对象类型，这个字段为零。
</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">refclassid</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD><TT CLASS="LITERAL"><A HREF="catalog-pg-class.html"><TT CLASS="STRUCTNAME">pg_class</TT></A>.oid</TT></TD><TD>被引用对象所在的系统表的 OID(必须是一个共享表)</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">refobjid</TT></TD><TD><TT CLASS="TYPE">oid</TT></TD><TD>任意 oid 属性</TD><TD>指定的被引用对象的 OID</TD></TR><TR><TD><TT CLASS="STRUCTFIELD">deptype</TT></TD><TD><TT CLASS="TYPE">char</TT></TD><TD>&nbsp;</TD><TD>
一段代码，定义了这个依赖性关系的特定语义；参阅下文。
</TD></TR></TBODY></TABLE></DIV><P>在任何情况下，一条<TT CLASS="STRUCTNAME">pg_shdepend</TT>
记录就表明这个被引用的对象不能在未删除依赖对象的前提下删除。
不过，<TT CLASS="STRUCTFIELD">deptype</TT>同时还标出了几种不同的子风格：
<P></P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="SYMBOL">SHARED_DEPENDENCY_OWNER</TT> (<TT CLASS="LITERAL">o</TT>)</DT><DD><P>被引用的对象(必须是一个角色)是依赖对象的所有者。</P></DD><DT><TT CLASS="SYMBOL">SHARED_DEPENDENCY_ACL</TT> (<TT CLASS="LITERAL">a</TT>)</DT><DD><P>被引用的对象(必须是一个角色)在依赖对象的 ACL(访问控制列表，也就是权限列表)里提到。
<TT CLASS="SYMBOL">SHARED_DEPENDENCY_ACL</TT>不会在对象的所有者头上添加的，因为所有者会有一个
<TT CLASS="SYMBOL">SHARED_DEPENDENCY_OWNER</TT>记录。</P></DD><DT><TT CLASS="SYMBOL">SHARED_DEPENDENCY_PIN</TT> (<TT CLASS="LITERAL">p</TT>)</DT><DD><P>没有依赖对象；这类记录标识系统自身依赖于该被依赖对象，因此这样的对象绝对不能被删除。
这种类型的记录只是由<TT CLASS="COMMAND">initdb</TT>创建。这样的依赖对象的字段都是零。</P></DD></DL></DIV><P>
其它依赖性的风格可能在将来会出现。请注意，目前的定义只是支持把角色当作被引用对象。
</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="catalog-pg-seclabel.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="catalog-pg-shdescription.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><TT CLASS="STRUCTNAME">pg_seclabel</TT></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/catalogs.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><TT CLASS="STRUCTNAME">pg_shdescription</TT></TD></TR></TABLE></DIV></BODY></HTML>
