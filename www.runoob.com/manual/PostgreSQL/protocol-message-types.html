<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>消息数据类型</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="前/后端协议" HREF="http://school.yunwei.edu/manual/PostgreSQL/protocol.html"><LINK REL="PREVIOUS" TITLE="流复制协议" HREF="protocol-replication.html"><LINK REL="NEXT" TITLE="消息格式" HREF="protocol-message-formats.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/protocol.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="流复制协议" HREF="protocol-replication.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/protocol.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 48. 前/后端协议</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="消息格式" HREF="protocol-message-formats.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="PROTOCOL-MESSAGE-TYPES">48.4. 消息数据类型</A></H1><P>本节描述消息里用到的基本数据类型。
<P></P></P><DIV CLASS="VARIABLELIST"><DL><DT>Int<TT CLASS="REPLACEABLE"><I>n</I></TT>(<TT CLASS="REPLACEABLE"><I>i</I></TT>)</DT><DD><P>一个网络字节顺序的<TT CLASS="REPLACEABLE"><I>n</I></TT>位整数。
如果声明了<TT CLASS="REPLACEABLE"><I>i</I></TT>，它就是将出现的确切值，否则这个数值就是一个变量。
比如 Int16 ，Int32(42)。</P></DD><DT>Int<TT CLASS="REPLACEABLE"><I>n</I></TT>[<TT CLASS="REPLACEABLE"><I>k</I></TT>]</DT><DD><P>一个<TT CLASS="REPLACEABLE"><I>k</I></TT>个<TT CLASS="REPLACEABLE"><I>n</I></TT>位整数元素的数组，每个都是以网络字节顺序存储的。
数组长度<TT CLASS="REPLACEABLE"><I>k</I></TT>总是由消息前面的字段来判断的。比如 Int16[M]</P></DD><DT>String(<TT CLASS="REPLACEABLE"><I>s</I></TT>)</DT><DD><P>一个(C 风格的)空结尾的字符串。对字符串没有特别的长度限制。
如果声明了<TT CLASS="REPLACEABLE"><I>s</I></TT>，那么它是将出现的确切的数值，否则这个数值就是一个变量。
比如 String, String("user")。</P><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>&#27880;&#24847;: </B>后端返回的字符串的可能长度<SPAN CLASS="emphasis"><I CLASS="EMPHASIS">没有预定义的限制</I></SPAN>。
所以前端必须使用良好的编码策略，使用某种可扩展的缓冲区以便能接受任何能放进内存里的东西。
如果那样做不可行，则读取全长的字符串然后抛弃不能放进你的定长缓冲区的尾部字符。</P></BLOCKQUOTE></DIV></DD><DT>Byte<TT CLASS="REPLACEABLE"><I>n</I></TT>(<TT CLASS="REPLACEABLE"><I>c</I></TT>)</DT><DD><P>精确的<TT CLASS="REPLACEABLE"><I>n</I></TT>字节。
如果字段宽度<TT CLASS="REPLACEABLE"><I>n</I></TT>不是一个常量，那么总是可以从消息中更早的字段中判断它。
如果声明了<TT CLASS="REPLACEABLE"><I>c</I></TT>那么它是确切数值。例如 Byte2, Byte1('\n')</P></DD></DL></DIV><P></P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="protocol-replication.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="protocol-message-formats.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">流复制协议</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/protocol.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">消息格式</TD></TR></TABLE></DIV></BODY></HTML>
