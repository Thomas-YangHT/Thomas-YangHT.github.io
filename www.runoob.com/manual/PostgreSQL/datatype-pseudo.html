<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>伪类型</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="数据类型" HREF="http://school.yunwei.edu/manual/PostgreSQL/datatype.html"><LINK REL="PREVIOUS" TITLE="对象标识符类型" HREF="datatype-oid.html"><LINK REL="NEXT" TITLE="函数和操作符" HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/datatype.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="对象标识符类型" HREF="datatype-oid.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/datatype.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 8. 数据类型</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="函数和操作符" HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="DATATYPE-PSEUDO">8.19. 伪类型</A></H1><P><SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>类型系统包含一系列特殊用途的条目，
它们按照类别来说叫做<I CLASS="FIRSTTERM">伪类型</I>。伪类型不能作为字段的数据类型，
但是它可以用于声明一个函数的参数或者结果类型。
伪类型在一个函数不只是简单地接受并返回某种<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>
数据类型的情况下很有用。<A HREF="datatype-pseudo.html#DATATYPE-PSEUDOTYPES-TABLE">&#34920; 8-24</A>列出了所有的伪类型。</P><DIV CLASS="TABLE"><A NAME="DATATYPE-PSEUDOTYPES-TABLE"></A><P><B>&#34920; 8-24. 伪类型</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>名字</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="TYPE">any</TT></TD><TD>表示一个函数接受任何输入数据类型。</TD></TR><TR><TD><TT CLASS="TYPE">anyelement</TT></TD><TD>表示一个函数接受任何数据类型
(参阅<A HREF="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC">第 35.2.5 &#33410;</A>)。</TD></TR><TR><TD><TT CLASS="TYPE">anyarray</TT></TD><TD>表示一个函数接受任意数组数据类型
(参阅<A HREF="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC">第 35.2.5 &#33410;</A>)。</TD></TR><TR><TD><TT CLASS="TYPE">anynonarray</TT></TD><TD>表示一个函数接受任意非数组数据类型
(参阅<A HREF="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC">第 35.2.5 &#33410;</A>)。</TD></TR><TR><TD><TT CLASS="TYPE">anyenum</TT></TD><TD>表示一个函数接受任意枚举数据类型
(参阅<A HREF="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC">第 35.2.5 &#33410;</A> 和
<A HREF="datatype-enum.html">第 8.7 &#33410;</A>)。</TD></TR><TR><TD><TT CLASS="TYPE">anyrange</TT></TD><TD>表示一个函数接受任意范围数据类型
(参阅 <A HREF="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC">第 35.2.5 &#33410;</A> 和
<A HREF="rangetypes.html">第 8.17 &#33410;</A>)。</TD></TR><TR><TD><TT CLASS="TYPE">cstring</TT></TD><TD>表示一个函数接受或者返回一个空结尾的 C 字符串。</TD></TR><TR><TD><TT CLASS="TYPE">internal</TT></TD><TD>表示一个函数接受或者返回一种服务器内部的数据类型。</TD></TR><TR><TD><TT CLASS="TYPE">language_handler</TT></TD><TD>一个过程语言调用处理器声明为返回<TT CLASS="TYPE">language_handler</TT>。</TD></TR><TR><TD><TT CLASS="TYPE">fdw_handler</TT></TD><TD>一个外部数据封装器声明为返回<TT CLASS="TYPE">fdw_handler</TT>。</TD></TR><TR><TD><TT CLASS="TYPE">record</TT></TD><TD>标识一个函数返回一个未声明的行类型。</TD></TR><TR><TD><TT CLASS="TYPE">trigger</TT></TD><TD>一个触发器函数声明为返回<TT CLASS="TYPE">trigger</TT>。</TD></TR><TR><TD><TT CLASS="TYPE">void</TT></TD><TD>表示一个函数不返回数值。</TD></TR><TR><TD><TT CLASS="TYPE">opaque</TT></TD><TD>一个已经过时的类型，以前用于所有上面这些用途。</TD></TR></TBODY></TABLE></DIV><P>用 C 编写的函数(不管是内置的还是动态装载的)都可以声明为接受或者返回这样的伪数据类型。
在把伪类型用做函数参数类型的时候，保证函数行为正常就是函数作者的任务了。</P><P>用过程语言编写的函数只能根据它们的实现语言是否可以使用伪类型而使用它。
目前，过程语言都不允许使用伪类型作为参数类型，并且只允许使用<TT CLASS="TYPE">void</TT>
和<TT CLASS="TYPE">record</TT>作为结果类型(如果函数用做触发器，那么加上<TT CLASS="TYPE">trigger</TT>)。
一些多态的函数还支持使用<TT CLASS="TYPE">anyelement</TT>，<TT CLASS="TYPE">anyarray</TT>，<TT CLASS="TYPE">anynonarray</TT>
<TT CLASS="TYPE">anyenum</TT>和<TT CLASS="TYPE">anyrange</TT>类型。</P><P>伪类型<TT CLASS="TYPE">internal</TT>用于声明那种只能在数据库系统内部调用的函数，
它们不能直接在<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>查询里调用。如果函数至少有一个
<TT CLASS="TYPE">internal</TT>类型的参数，那么我们就不能从<ACRONYM CLASS="ACRONYM">SQL</ACRONYM>
里调用它。为了保留这个限制的类型安全，我们一定要遵循这样的编码规则：
不要创建任何声明为返回<TT CLASS="TYPE">internal</TT>的函数，
除非它至少有一个<TT CLASS="TYPE">internal</TT>参数。</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="datatype-oid.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">对象标识符类型</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/datatype.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">函数和操作符</TD></TR></TABLE></DIV></BODY></HTML>
