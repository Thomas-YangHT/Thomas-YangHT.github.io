<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>pg_ctl</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="PostgreSQL 服务器应用程序" HREF="http://school.yunwei.edu/manual/PostgreSQL/reference-server.html"><LINK REL="PREVIOUS" TITLE="pg_controldata" HREF="app-pgcontroldata.html"><LINK REL="NEXT" TITLE="pg_resetxlog" HREF="app-pgresetxlog.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="REFENTRY">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/ref/pg_ctl-ref.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="pg_controldata" HREF="app-pgcontroldata.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/reference-server.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="pg_resetxlog" HREF="app-pgresetxlog.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><H1><A NAME="APP-PG-CTL"></A><SPAN CLASS="APPLICATION">pg_ctl</SPAN></H1><DIV CLASS="REFNAMEDIV"><A NAME="AEN89363"></A><H2>&#21517;&#31216;</H2>pg_ctl&nbsp;--&nbsp;初始化，启动，停止，或者控制<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>服务器</DIV><DIV CLASS="REFSYNOPSISDIV"><A NAME="AEN89369"></A><H2>&#22823;&#32434;</H2><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">init[db]</TT> [<TT CLASS="OPTION">-s</TT>] [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>] [<TT CLASS="OPTION">-o</TT> <TT CLASS="REPLACEABLE"><I>initdb-options</I></TT>]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">start</TT> [<TT CLASS="OPTION">-w</TT>] [<TT CLASS="OPTION">-t</TT> <TT CLASS="REPLACEABLE"><I>seconds</I></TT>] [<TT CLASS="OPTION">-s</TT>] [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>] [<TT CLASS="OPTION">-l</TT> <TT CLASS="REPLACEABLE"><I>filename</I></TT>] [<TT CLASS="OPTION">-o</TT> <TT CLASS="REPLACEABLE"><I>options</I></TT>] [<TT CLASS="OPTION">-p</TT> <TT CLASS="REPLACEABLE"><I>path</I></TT>] [<TT CLASS="OPTION">-c</TT>]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">stop</TT> [<TT CLASS="OPTION">-W</TT>] [<TT CLASS="OPTION">-t</TT> <TT CLASS="REPLACEABLE"><I>seconds</I></TT>] [<TT CLASS="OPTION">-s</TT>] [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>] [<TT CLASS="OPTION">-m</TT>
<TT CLASS="OPTION">s[mart]</TT> | <TT CLASS="OPTION">f[ast]</TT> | <TT CLASS="OPTION">i[mmediate]</TT>
]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">restart</TT> [<TT CLASS="OPTION">-w</TT>] [<TT CLASS="OPTION">-t</TT> <TT CLASS="REPLACEABLE"><I>seconds</I></TT>] [<TT CLASS="OPTION">-s</TT>] [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>] [<TT CLASS="OPTION">-c</TT>] [<TT CLASS="OPTION">-m</TT>
<TT CLASS="OPTION">s[mart]</TT> | <TT CLASS="OPTION">f[ast]</TT> | <TT CLASS="OPTION">i[mmediate]</TT>
] [<TT CLASS="OPTION">-o</TT> <TT CLASS="REPLACEABLE"><I>options</I></TT>]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">reload</TT> [<TT CLASS="OPTION">-s</TT>] [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">status</TT> [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">promote</TT> [<TT CLASS="OPTION">-s</TT>] [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">kill</TT> <TT CLASS="REPLACEABLE"><I>signal_name</I></TT> <TT CLASS="REPLACEABLE"><I>process_id</I></TT> </P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">register</TT> [<TT CLASS="OPTION">-N</TT> <TT CLASS="REPLACEABLE"><I>servicename</I></TT>] [<TT CLASS="OPTION">-U</TT> <TT CLASS="REPLACEABLE"><I>username</I></TT>] [<TT CLASS="OPTION">-P</TT> <TT CLASS="REPLACEABLE"><I>password</I></TT>] [<TT CLASS="OPTION">-D</TT> <TT CLASS="REPLACEABLE"><I>datadir</I></TT>] [<TT CLASS="OPTION">-S</TT>
<TT CLASS="OPTION">a[uto]</TT> | <TT CLASS="OPTION">d[emand]</TT>
] [<TT CLASS="OPTION">-w</TT>] [<TT CLASS="OPTION">-t</TT> <TT CLASS="REPLACEABLE"><I>seconds</I></TT>] [<TT CLASS="OPTION">-s</TT>] [<TT CLASS="OPTION">-o</TT> <TT CLASS="REPLACEABLE"><I>options</I></TT>]</P><P><TT CLASS="COMMAND">pg_ctl</TT> <TT CLASS="OPTION">unregister</TT> [<TT CLASS="OPTION">-N</TT> <TT CLASS="REPLACEABLE"><I>servicename</I></TT>]</P></DIV><DIV CLASS="REFSECT1"><A NAME="APP-PG-CTL-DESCRIPTION"></A><H2>描述</H2><P> <SPAN CLASS="APPLICATION">pg_ctl</SPAN>用于初始化<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>数据库集群，
启动、停止、或者重启<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>后端服务器(<A HREF="app-postgres.html"><SPAN CLASS="APPLICATION">postgres</SPAN></A>)，
或者显示一个运行着的服务器的状态。
尽管可以手动启动服务器，
但是<SPAN CLASS="APPLICATION">pg_ctl</SPAN>封装了重新定向日志输出，
与终端和进程组合理分离，
以及另外提供了一个便捷选项用于有控制的关闭。</P><P> <TT CLASS="OPTION">init</TT>或者<TT CLASS="OPTION">initdb</TT>模式创建了一个新的
<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>数据库集群。一个数据库集群是通过
单一服务器实例管理的数据库集合。这个模式调用<TT CLASS="COMMAND">initdb</TT>命令。
参阅<A HREF="app-initdb.html">initdb</A>获取详情。</P><P> 在<TT CLASS="OPTION">start</TT>模式里会启动一个新的服务器。服务器是在后台启动的，
标准输入被附着到了<TT CLASS="FILENAME">/dev/null</TT>上(或者Windows上的<TT CLASS="LITERAL">nul</TT>上)。
缺省在类Unix系统上，服务器的标准输出和标准错误将被定向到
<SPAN CLASS="APPLICATION">pg_ctl</SPAN>的标准输出(而不是标准错误)。
<SPAN CLASS="APPLICATION">pg_ctl</SPAN>的标准输出应该重定向到一个
文件或者用管道输出到类似<SPAN CLASS="APPLICATION">rotatelogs</SPAN>这样的日志滚动程序，
否则，<TT CLASS="COMMAND">postgres</TT>将把它的输出写到控制终端(在后台)
并且将不会脱离shell的进程组。
在Windows上，缺省服务器的标准输出和标准错误被发送到终端。
通过使用<TT CLASS="OPTION">-l</TT>添加到服务器的输出到日志文件来
改变缺省操作。推荐使用<TT CLASS="OPTION">-l</TT>或者输出重定向。</P><P> 在<TT CLASS="OPTION">stop</TT>模式下，那个正在特定数据目录中运行的服务器将被关闭。
你可以用<TT CLASS="OPTION">-m</TT>选项选择三种不同的关闭模式：
<SPAN CLASS="QUOTE">"Smart"</SPAN>模式等待所有活跃客户端中断连接并且结束任何在线备份。
如果终止服务器热备份，恢复和流复制，则切断了所有客户端。
<SPAN CLASS="QUOTE">"Fast"</SPAN>模式并不等待客户端中断连接并且终止正在进行的在线备份。
所有活跃事务都被回滚并且客户端都被强制断开。然后关闭服务器。
<SPAN CLASS="QUOTE">"Immediate"</SPAN>模式将在没有干净关闭的情况下立即中断所有服务器进程。
这么做将导致在重新启动的时候的恢复。</P><P> <TT CLASS="OPTION">restart</TT>模式实际上是先执行一个停止，
然后紧跟一个启动。它允许变换<TT CLASS="COMMAND">postgres</TT>的命令行选项。
如果服务器启动期间在命令行上指定相对路径，那么<TT CLASS="OPTION">restart</TT>
可能会失败。</P><P>
<TT CLASS="OPTION">reload</TT>模式简单地给<TT CLASS="COMMAND">postgres</TT>
发送一个<SPAN CLASS="SYSTEMITEM">SIGHUP</SPAN>信号，
导致它重新读取配置文件
(<TT CLASS="FILENAME">postgresql.conf</TT>，<TT CLASS="FILENAME">pg_hba.conf</TT>等)，
这样就允许修改配置文件选项而不用重启系统即可生效。
&#13;</P><P>
<TT CLASS="OPTION">status</TT>模式检查一个服务器是否在指定的数据目录上运行，
如果是，那么显示其<ACRONYM CLASS="ACRONYM">PID</ACRONYM>和调用它的命令行选项。
如果服务器不运行，那么进程返回退出状态3。</P><P> 在<TT CLASS="OPTION">promote</TT>模式中，在指定数据目录中运行的备份服务器被执行以退出
恢复并且开始读写操作。
</P><P> <TT CLASS="OPTION">kill</TT>模式允许你给一个指定的进程发送信号。
这个功能对<SPAN CLASS="PRODUCTNAME">Microsoft Windows</SPAN>特别有用，
因为它没有<SPAN CLASS="APPLICATION">kill</SPAN>命令。
使用<TT CLASS="LITERAL">--help</TT>查看支持的信号名字列表。</P><P> <TT CLASS="OPTION">register</TT>模式允许你在<SPAN CLASS="PRODUCTNAME">Microsoft Windows</SPAN>上注册一个系统服务。
<TT CLASS="OPTION">-S</TT>选项允许选择服务启动类型，
<SPAN CLASS="QUOTE">"auto"</SPAN> (系统启动时自动启动服务)或者<SPAN CLASS="QUOTE">"demand"</SPAN> (命令中启动服务)。</P><P> <TT CLASS="OPTION">unregister</TT>模式允许你在<SPAN CLASS="PRODUCTNAME">Microsoft Windows</SPAN>
上注销系统服务。这个撤销了<TT CLASS="OPTION">register</TT>命令的影响。</P></DIV><DIV CLASS="REFSECT1"><A NAME="APP-PG-CTL-OPTIONS"></A><H2>选项</H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="OPTION">-c</TT><BR><TT CLASS="OPTION">--core-file</TT></DT><DD><P> 尝试允许服务器崩溃产生核心文件，在平台上这是可能的，通过提高核心文件上的
任何软件资源限制。
这对于调试或者诊断通过允许堆栈跟踪从失败服务器进程中获得的问题是非常有用的。</P></DD><DT><TT CLASS="OPTION">-D <TT CLASS="REPLACEABLE"><I>datadir</I></TT></TT><BR><TT CLASS="OPTION">--pgdata <TT CLASS="REPLACEABLE"><I>datadir</I></TT></TT></DT><DD><P> 声明该数据库配置文件的文件系统位置。如果忽略则使用<TT CLASS="ENVAR">PGDATA</TT>环境变量。</P></DD><DT><TT CLASS="OPTION">-l <TT CLASS="REPLACEABLE"><I>filename</I></TT></TT><BR><TT CLASS="OPTION">--log <TT CLASS="REPLACEABLE"><I>filename</I></TT></TT></DT><DD><P> 把服务器日志输出附加在<TT CLASS="REPLACEABLE"><I>filename</I></TT>文件上。
如果该文件不存在则创建它。<SPAN CLASS="SYSTEMITEM">umask</SPAN>设置为077，
因此缺省时不允许从其它用户向日志文件访问的。</P></DD><DT><TT CLASS="OPTION">-m <TT CLASS="REPLACEABLE"><I>mode</I></TT></TT><BR><TT CLASS="OPTION">--mode <TT CLASS="REPLACEABLE"><I>mode</I></TT></TT></DT><DD><P> 声明关闭模式。<TT CLASS="REPLACEABLE"><I>mode</I></TT>可以是
<TT CLASS="LITERAL">smart</TT>，<TT CLASS="LITERAL">fast</TT>或者
<TT CLASS="LITERAL">immediate</TT>之一，或者是这三个的首字母之一。
如果忽略则使用<TT CLASS="LITERAL">smart</TT>。</P></DD><DT><TT CLASS="OPTION">-o <TT CLASS="REPLACEABLE"><I>options</I></TT></TT></DT><DD><P> 声明要直接传递给<TT CLASS="COMMAND">postgres</TT>命令的选项。</P><P> 通常被单引号或者双引号包围的选项确保它们作为一个整体传递。</P></DD><DT><TT CLASS="OPTION">-o <TT CLASS="REPLACEABLE"><I>initdb-options</I></TT></TT></DT><DD><P> 指定直接被传递给<TT CLASS="COMMAND">initdb</TT>命令的选项。</P><P> 参数通常都用单或者双引号包围以保证它们作为一个整体传递。</P></DD><DT><TT CLASS="OPTION">-p <TT CLASS="REPLACEABLE"><I>path</I></TT></TT></DT><DD><P> 声明<TT CLASS="FILENAME">postgres</TT>可执行文件的位置。
缺省<TT CLASS="FILENAME">postgres</TT>可执行文件位于<TT CLASS="COMMAND">pg_ctl</TT>自身所在目录，
如果没找到则使用硬编码的安装目录。
除非你想干点什么特别的事情，
并且想得到类似没有找到<TT CLASS="FILENAME">postgres</TT>这样的错误，
否则必须使用这个选项。&#13;</P><P> 在<TT CLASS="LITERAL">init</TT>模式中，这个选项类似地指定
<TT CLASS="FILENAME">initdb</TT>可执行文件的位置。</P></DD><DT><TT CLASS="OPTION">-s</TT><BR><TT CLASS="OPTION">--silent</TT></DT><DD><P> 只打印错误，而不打印提示性信息。</P></DD><DT><TT CLASS="OPTION">-t</TT><BR><TT CLASS="OPTION">--timeout</TT></DT><DD><P> 当等待启动或者关闭完成的时候，等待的最大秒数，缺省是60秒。</P></DD><DT><TT CLASS="OPTION">-V</TT><BR><TT CLASS="OPTION">--version</TT></DT><DD><P> 打印<SPAN CLASS="APPLICATION">pg_ctl</SPAN>版本并且退出。 </P></DD><DT><TT CLASS="OPTION">-w</TT></DT><DD><P> 等待启动或者停止的完成。这是停止的缺省选项，而不是启动的。
当等待启动的时候，<TT CLASS="COMMAND">pg_ctl</TT>反复尝试连接到服务器。
当等待停止的时候，<TT CLASS="COMMAND">pg_ctl</TT>等待服务器删除<ACRONYM CLASS="ACRONYM">PID</ACRONYM>文件。
该选项允许启动时<ACRONYM CLASS="ACRONYM">SSL</ACRONYM>缩写项。
<TT CLASS="COMMAND">pg_ctl</TT>返回基于成功启动或者停止的退出码。</P></DD><DT><TT CLASS="OPTION">-W</TT></DT><DD><P> 不等待启动或者停止的完成。这是启动和重启的缺省。</P></DD><DT><TT CLASS="OPTION">-?</TT><BR><TT CLASS="OPTION">--help</TT></DT><DD><P> 显示关于<SPAN CLASS="APPLICATION">pg_ctl</SPAN>命令行参数的帮助，并且退出。</P></DD></DL></DIV><DIV CLASS="REFSECT2"><A NAME="APP-PG-CTL-WINDOWS-OPTIONS"></A><H3>Windows选项</H3><P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="OPTION">-N <TT CLASS="REPLACEABLE"><I>servicename</I></TT></TT></DT><DD><P> 要注册的系统服务的名字。这个名字将用于服务名和显示名。</P></DD><DT><TT CLASS="OPTION">-P <TT CLASS="REPLACEABLE"><I>password</I></TT></TT></DT><DD><P> 用户启动服务的口令。</P></DD><DT><TT CLASS="OPTION">-S <TT CLASS="REPLACEABLE"><I>start-type</I></TT></TT></DT><DD><P> 启动系统服务注册的类型。启动类型是<TT CLASS="LITERAL">auto</TT>或者<TT CLASS="LITERAL">demand</TT>，
或者这两者之一的首字母。如果忽略，则使用<TT CLASS="LITERAL">auto</TT>。</P></DD><DT><TT CLASS="OPTION">-U <TT CLASS="REPLACEABLE"><I>username</I></TT></TT></DT><DD><P> 用于启动服务的用户的用户名。对于域用户，
使用<TT CLASS="LITERAL">DOMAIN\username</TT>格式。</P></DD></DL></DIV></DIV></DIV><DIV CLASS="REFSECT1"><A NAME="AEN89741"></A><H2>环境变量</H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="ENVAR">PGDATA</TT></DT><DD><P> 缺省数据目录位置。</P></DD></DL></DIV><P> <TT CLASS="COMMAND">pg_ctl</TT>，
类似于大多数其它的<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>功能，
也可以使用通过<SPAN CLASS="APPLICATION">libpq</SPAN>支持的环境变量（参阅<A HREF="libpq-envars.html">第 31.14 &#33410;</A>）。
其它的服务器变量，参阅<A HREF="app-postgres.html"><SPAN CLASS="APPLICATION">postgres</SPAN></A>。</P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN89755"></A><H2>文件</H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="FILENAME">postmaster.pid</TT></DT><DD><P> 这个文件存在于数据目录中是为了帮助<SPAN CLASS="APPLICATION">pg_ctl</SPAN>
判断服务器当前是否在运行。</P></DD><DT><TT CLASS="FILENAME">postmaster.opts</TT></DT><DD><P> 如果这个文件存在于数据目录中，那么
<SPAN CLASS="APPLICATION">pg_ctl</SPAN>(在<TT CLASS="OPTION">restart</TT>模式下)
将把文件的内容当作传递给<SPAN CLASS="APPLICATION">postgres</SPAN>命令的选项传递过去，
除非被<TT CLASS="OPTION">-o</TT>选项覆盖。
在<TT CLASS="OPTION">status</TT>模式中显示这个文件的内容。</P></DD></DL></DIV></DIV><DIV CLASS="REFSECT1"><A NAME="R1-APP-PGCTL-2"></A><H2>例子</H2><DIV CLASS="REFSECT2"><A NAME="R2-APP-PGCTL-3"></A><H3>启动服务器</H3><P> 启动服务器:
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl start</KBD
></PRE><P>&#13;</P><P> 启动服务器，等待直到服务器接受连接：
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -w start</KBD
></PRE><P>
</P><P>
使用端口5433启动服务器，而且不带<CODE CLASS="FUNCTION">fsync</CODE>运行，使用：
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -o "-F -p 5433" start</KBD
></PRE><P>
</P></DIV><DIV CLASS="REFSECT2"><A NAME="R2-APP-PGCTL-4"></A><H3>停止服务器</H3><P>
停止服务器，使用：
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl stop</KBD
></PRE><P>
使用<TT CLASS="OPTION">-m</TT>选项允许控制服务器<SPAN CLASS="emphasis"><I CLASS="EMPHASIS">如何</I></SPAN>关闭。
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl stop -m fast</KBD
></PRE><P></P></DIV><DIV CLASS="REFSECT2"><A NAME="R2-APP-PGCTL-5"></A><H3>重启服务器</H3><P>
重启服务器这个命令几乎等于先停止服务器然后再启动它，
只不过<TT CLASS="COMMAND">pg_ctl</TT>保存并重新使用上一次运行服务器的命令行参数。
重启服务器的最简单的方法是：
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl restart</KBD
></PRE><P>
</P><P>
重启服务器，等待其停止和重启：
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -w restart</KBD
></PRE><P>
</P><P>
使用5433端口重启并且重启后关闭<CODE CLASS="FUNCTION">fsync</CODE>：
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl -o "-F -p 5433" restart</KBD
></PRE><P></P></DIV><DIV CLASS="REFSECT2"><A NAME="R2-APP-PGCTL-6"></A><H3>显示服务器状态</H3><P>
下面是来自<SPAN CLASS="APPLICATION">pg_ctl</SPAN>的状态输出的例子：
</P><PRE CLASS="SCREEN"><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>pg_ctl status</KBD
>
<SAMP
CLASS="COMPUTEROUTPUT"
>pg_ctl: server is running (PID: 13718)
/usr/local/pgsql/bin/postgres "-D" "/usr/local/pgsql/data" "-p" "5433" "-B" "128"</SAMP
></PRE><P>
这就是在restart模式中被调用的命令行。
</P></DIV></DIV><DIV CLASS="REFSECT1"><A NAME="AEN89826"></A><H2>又见</H2><A HREF="app-initdb.html">initdb</A>, <A HREF="app-postgres.html"><SPAN CLASS="APPLICATION">postgres</SPAN></A></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="app-pgcontroldata.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="app-pgresetxlog.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><SPAN CLASS="APPLICATION">pg_controldata</SPAN></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/reference-server.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><SPAN CLASS="APPLICATION">pg_resetxlog</SPAN></TD></TR></TABLE></DIV></BODY></HTML>
