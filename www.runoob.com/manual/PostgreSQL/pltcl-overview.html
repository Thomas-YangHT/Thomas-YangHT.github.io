<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>概述</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="PL/Tcl - Tcl 过程语言" HREF="http://school.yunwei.edu/manual/PostgreSQL/pltcl.html"><LINK REL="PREVIOUS" TITLE="PL/Tcl - Tcl 过程语言" HREF="http://school.yunwei.edu/manual/PostgreSQL/pltcl.html"><LINK REL="NEXT" TITLE="PL/Tcl 函数和参数" HREF="pltcl-functions.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/pltcl.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="PL/Tcl - Tcl 过程语言" HREF="http://school.yunwei.edu/manual/PostgreSQL/pltcl.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/pltcl.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 41. PL/Tcl - Tcl 过程语言</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="PL/Tcl 函数和参数" HREF="pltcl-functions.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="PLTCL-OVERVIEW">41.1. 概述</A></H1><P>PL/Tcl 提供 C 语言里面函数开发者所拥有的大多数功能，只有一点点限制除外，
另外Tcl还可以使用强大的字符串处理库。</P><P><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">好</I></SPAN>的限制是，所有东西都是在一个安全的 Tcl 解释器里面运行的。
除了一个有限的 Tcl 安全命令集外，只有很少的几个命令可以通过 SPI 访问数据库以及通过
<CODE CLASS="FUNCTION">elog()</CODE>生成错误信息。不像 C 函数那样，
Tcl 没有办法访问数据库后端内部或者获得 OS 级的<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>
服务器进程的权限。因此，任何非特权的数据库用户都可以被允许使用这种语言。</P><P>另外的实现级限制是 Tcl 过程不能用于创建新数据库类型的输入/输出函数。</P><P>有时候需要写一些不受安全 Tcl 限制的 Tcl 函数，比如，可能需要一个可以发送邮件的 Tcl 函数。
要处理这样的问题，有一个<SPAN CLASS="APPLICATION">PL/Tcl</SPAN>的变种，叫<TT CLASS="LITERAL">PL/TclU</TT>(不可信的 Tcl)。
这个语言和 PL/Tcl 是完全一样的，只不过使用了一个完整的 Tcl 解释器。<SPAN CLASS="emphasis"><I CLASS="EMPHASIS">如果你使用了
<SPAN CLASS="APPLICATION">PL/TclU</SPAN>，那么你必须把它安装成一种不可信的过程语言</I></SPAN>，
这样只有数据库超级用户可以用它创建函数。<SPAN CLASS="APPLICATION">PL/TclU</SPAN>函数的作者必须注意：
你写的函数一定不要做任何预算外的事情，因为它能干所有数据库管理员能干的事情。</P><P>如果在安装过程的配置步骤中声明了 Tcl 支持，那么<SPAN CLASS="APPLICATION">PL/Tcl</SPAN>和<SPAN CLASS="APPLICATION">PL/TclU</SPAN>
的调用处理器是在制作时自动制作并安装到<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>库目录中去的。
要在某个特定的数据库中安装<SPAN CLASS="APPLICATION">PL/Tcl</SPAN>和/或<SPAN CLASS="APPLICATION">PL/TclU</SPAN>，
那么你可以使用<TT CLASS="COMMAND">CREATE EXTENSION</TT>命令或<TT CLASS="COMMAND">createlang</TT>程序。
比如<TT CLASS="LITERAL">createlang pltcl <TT CLASS="REPLACEABLE"><I>dbname</I></TT></TT>或
<TT CLASS="LITERAL">createlang pltclu <TT CLASS="REPLACEABLE"><I>dbname</I></TT></TT>。</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/pltcl.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="pltcl-functions.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">PL/Tcl - Tcl 过程语言</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/pltcl.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">PL/Tcl 函数和参数</TD></TR></TABLE></DIV></BODY></HTML>
