<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>ALTER FUNCTION</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="SQL 命令" HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html"><LINK REL="PREVIOUS" TITLE="ALTER FOREIGN TABLE" HREF="sql-alterforeigntable.html"><LINK REL="NEXT" TITLE="ALTER GROUP" HREF="sql-altergroup.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="REFENTRY">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/ref/alter_function.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="ALTER FOREIGN TABLE" HREF="sql-alterforeigntable.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom"></TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="ALTER GROUP" HREF="sql-altergroup.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><H1><A NAME="SQL-ALTERFUNCTION"></A>ALTER FUNCTION</H1><DIV CLASS="REFNAMEDIV"><A NAME="AEN64982"></A><H2>&#21517;&#31216;</H2>ALTER FUNCTION&nbsp;--&nbsp;修改一个函数的定义</DIV><DIV CLASS="REFSYNOPSISDIV"><A NAME="AEN64987"></A><H2>&#22823;&#32434;</H2><PRE CLASS="SYNOPSIS">ALTER FUNCTION <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> ( [ [ <TT
CLASS="REPLACEABLE"
><I
>argmode</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>argname</I
></TT
> ] <TT
CLASS="REPLACEABLE"
><I
>argtype</I
></TT
> [, ...] ] )
<TT
CLASS="REPLACEABLE"
><I
>action</I
></TT
> [ ... ] [ RESTRICT ]
ALTER FUNCTION <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> ( [ [ <TT
CLASS="REPLACEABLE"
><I
>argmode</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>argname</I
></TT
> ] <TT
CLASS="REPLACEABLE"
><I
>argtype</I
></TT
> [, ...] ] )
RENAME TO <TT
CLASS="REPLACEABLE"
><I
>new_name</I
></TT
>
ALTER FUNCTION <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> ( [ [ <TT
CLASS="REPLACEABLE"
><I
>argmode</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>argname</I
></TT
> ] <TT
CLASS="REPLACEABLE"
><I
>argtype</I
></TT
> [, ...] ] )
OWNER TO <TT
CLASS="REPLACEABLE"
><I
>new_owner</I
></TT
>
ALTER FUNCTION <TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
> ( [ [ <TT
CLASS="REPLACEABLE"
><I
>argmode</I
></TT
> ] [ <TT
CLASS="REPLACEABLE"
><I
>argname</I
></TT
> ] <TT
CLASS="REPLACEABLE"
><I
>argtype</I
></TT
> [, ...] ] )
SET SCHEMA <TT
CLASS="REPLACEABLE"
><I
>new_schema</I
></TT
>
<SPAN
CLASS="phrase"
><SPAN
CLASS="PHRASE"
>where <TT
CLASS="REPLACEABLE"
><I
>action</I
></TT
> is one of:</SPAN
></SPAN
>
CALLED ON NULL INPUT | RETURNS NULL ON NULL INPUT | STRICT
IMMUTABLE | STABLE | VOLATILE | [ NOT ] LEAKPROOF
[ EXTERNAL ] SECURITY INVOKER | [ EXTERNAL ] SECURITY DEFINER
COST <TT
CLASS="REPLACEABLE"
><I
>execution_cost</I
></TT
>
ROWS <TT
CLASS="REPLACEABLE"
><I
>result_rows</I
></TT
>
SET <TT
CLASS="REPLACEABLE"
><I
>configuration_parameter</I
></TT
> { TO | = } { <TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
> | DEFAULT }
SET <TT
CLASS="REPLACEABLE"
><I
>configuration_parameter</I
></TT
> FROM CURRENT
RESET <TT
CLASS="REPLACEABLE"
><I
>configuration_parameter</I
></TT
>
RESET ALL</PRE></DIV><DIV CLASS="REFSECT1"><A NAME="AEN65017"></A><H2>描述</H2><P><TT CLASS="COMMAND">ALTER FUNCTION</TT> 修改一个函数的定义。</P><P>要使用<TT CLASS="COMMAND">ALTER FUNCTION</TT> ，你必须是该函数的所有者。
要修改一个函数的模式，你还必须在新模式上拥有 <TT CLASS="LITERAL">CREATE</TT> 权限。
要修改所有者，你必须还是新的所有角色的直接或者间接的成员，并且该成员必须在此函数的模式上有 <TT CLASS="LITERAL">CREATE</TT> 权限。
（这些限制强制了修改该所有者不会做任何通过删除和重建函数不能做的事情。 不过，超级用户可以以任何方式修改任意函数的所有权。） </P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN65025"></A><H2>参数</H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><TT CLASS="REPLACEABLE"><I>name</I></TT></DT><DD><P>一个现有的函数名字(可以有模式修饰) 。</P></DD><DT><TT CLASS="REPLACEABLE"><I>argmode</I></TT></DT><DD><P>参数的模式：<TT CLASS="LITERAL">IN</TT>、<TT CLASS="LITERAL">OUT</TT>、<TT CLASS="LITERAL">INOUT</TT>或是<TT CLASS="LITERAL">VARIADIC</TT>。
如省略的话，缺省是<TT CLASS="LITERAL">IN</TT>。
注意<TT CLASS="COMMAND">ALTER FUNCTION</TT> 实际不会关注任何<TT CLASS="LITERAL">OUT</TT> 参数， 因为判断函数的身份只需要输入参数。
因此列出<TT CLASS="LITERAL">IN</TT>、<TT CLASS="LITERAL">INOUT</TT>和<TT CLASS="LITERAL">VARIADIC</TT>参数就足够了。 </P></DD><DT><TT CLASS="REPLACEABLE"><I>argname</I></TT></DT><DD><P>参数的名字。
请注意<TT CLASS="COMMAND">ALTER FUNCTION</TT>实际上不会关注参数的名字，因为只有参数的数据类型用于判断函数的身份。</P></DD><DT><TT CLASS="REPLACEABLE"><I>argtype</I></TT></DT><DD><P>如果有的话，是该函数参数的数据类型(可以用模式修饰)。 </P></DD><DT><TT CLASS="REPLACEABLE"><I>new_name</I></TT></DT><DD><P>函数的新名字。</P></DD><DT><TT CLASS="REPLACEABLE"><I>new_owner</I></TT></DT><DD><P>函数的新所有者。请注意如果函数标记为<TT CLASS="LITERAL">SECURITY DEFINER</TT>，那么它随后将以新的所有者执行。</P></DD><DT><TT CLASS="REPLACEABLE"><I>new_schema</I></TT></DT><DD><P>函数的新模式名称。</P></DD><DT><TT CLASS="LITERAL">CALLED ON NULL INPUT</TT><BR><TT CLASS="LITERAL">RETURNS NULL ON NULL INPUT</TT><BR><TT CLASS="LITERAL">STRICT</TT></DT><DD><P><TT CLASS="LITERAL">CALLED ON NULL INPUT</TT>把函数改成在所有参数都是 NULL 的时候也会调用它。
<TT CLASS="LITERAL">RETURNS NULL ON NULL INPUT</TT>或<TT CLASS="LITERAL">STRICT</TT>
把函数改成如果任何一个参数是 NULL 就根本不执行并且自动返回 NULL。
参阅<A HREF="sql-createfunction.html">CREATE FUNCTION</A>获取更多信息。</P></DD><DT><TT CLASS="LITERAL">IMMUTABLE</TT><BR><TT CLASS="LITERAL">STABLE</TT><BR><TT CLASS="LITERAL">VOLATILE</TT></DT><DD><P>把函数的易失属性修改为指定类型。参阅<A HREF="sql-createfunction.html">CREATE FUNCTION</A>了解更多细节。</P></DD><DT><TT CLASS="LITERAL">[<SPAN CLASS="OPTIONAL"> EXTERNAL </SPAN>] SECURITY INVOKER</TT><BR><TT CLASS="LITERAL">[<SPAN CLASS="OPTIONAL"> EXTERNAL </SPAN>] SECURITY DEFINER</TT></DT><DD><P>修改函数的安全性定义，标识它是否是安全定义器。出于兼容 SQL 标准，
关键字<TT CLASS="LITERAL">EXTERNAL</TT>将被忽略。参阅<A HREF="sql-createfunction.html">CREATE FUNCTION</A>获取更多有关这个功能的信息。</P></DD><DT><TT CLASS="LITERAL">LEAKPROOF</TT></DT><DD><P>更改函数的密封性，标识它是否是密封的。
参阅 <A HREF="sql-createfunction.html">CREATE FUNCTION</A> 了解更多细节。</P></DD><DT><TT CLASS="LITERAL">COST</TT> <TT CLASS="REPLACEABLE"><I>execution_cost</I></TT></DT><DD><P>更改函数的估计执行成本。 参阅<A HREF="sql-createfunction.html">CREATE FUNCTION</A>了解更多细节。</P></DD><DT><TT CLASS="LITERAL">ROWS</TT> <TT CLASS="REPLACEABLE"><I>result_rows</I></TT></DT><DD><P>更改设置返回函数的估计的返回行数。参阅<A HREF="sql-createfunction.html">CREATE FUNCTION</A>了解更多细节。</P></DD><DT><TT CLASS="REPLACEABLE"><I>configuration_parameter</I></TT><BR><TT CLASS="REPLACEABLE"><I>value</I></TT></DT><DD><P>当函数被调用时，添加或者更改对配置参数值的配置。如果 <TT CLASS="REPLACEABLE"><I>value</I></TT>是<TT CLASS="LITERAL">DEFAULT</TT>，
或者使用了等效的<TT CLASS="LITERAL">RESET</TT>，则函数的局部设置参数会被清除，这样函数会使用当前环境中的参数值来执行。
使用<TT CLASS="LITERAL">RESET ALL</TT>来清理所有的函数局部设置参数。
<TT CLASS="LITERAL">SET FROM CURRENT</TT>保存会话的参数当前值为函数调用时会应用的参数值。</P><P>参阅<A HREF="sql-set.html">SET</A>和<A HREF="http://school.yunwei.edu/manual/PostgreSQL/runtime-config.html">第 18 &#31456;</A> 了解更多关于允许的参数名称和数值的信息。 </P></DD><DT><TT CLASS="LITERAL">RESTRICT</TT></DT><DD><P>因兼容 SQL 标准而忽略。</P></DD></DL></DIV></DIV><DIV CLASS="REFSECT1"><A NAME="AEN65149"></A><H2>例子</H2><P> 把参数类型为<TT CLASS="TYPE">integer</TT>的函数<TT CLASS="LITERAL">sqrt</TT>重命名为<TT CLASS="LITERAL">square_root</TT> ：
</P><PRE CLASS="PROGRAMLISTING">ALTER FUNCTION sqrt(integer) RENAME TO square_root;</PRE><P></P><P> 把参数类型为<TT CLASS="TYPE">integer</TT>的函数<TT CLASS="LITERAL">sqrt</TT>的所有者修改为<TT CLASS="LITERAL">joe</TT> ：
</P><PRE CLASS="PROGRAMLISTING">ALTER FUNCTION sqrt(integer) OWNER TO joe;</PRE><P></P><P> 把参数类型为<TT CLASS="TYPE">integer</TT>的函数<TT CLASS="LITERAL">sqrt</TT>的模式修改为<TT CLASS="LITERAL">maths</TT>：
</P><PRE CLASS="PROGRAMLISTING">ALTER FUNCTION sqrt(integer) SET SCHEMA maths;</PRE><P></P><P>调整自动为函数设定的搜索路径：
</P><PRE CLASS="PROGRAMLISTING">ALTER FUNCTION check_password(text) SET search_path = admin, pg_temp;</PRE><P></P><P> 禁用针对一个函数的<TT CLASS="VARNAME">search_path</TT>自动设置：
</P><PRE CLASS="PROGRAMLISTING">ALTER FUNCTION check_password(text) RESET search_path;</PRE><P>
这个函数在执行时所用的搜索路径将是调用者所用的搜索路径。</P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN65171"></A><H2>兼容性</H2><P>这个语句部分兼容SQL标准里面的<TT CLASS="COMMAND">ALTER FUNCTION</TT>语句。
标准允许修改函数的更多属性，但是没有提供修改函数名字、把一个函数定义为安全定义器、
给函数附加配置参数值的功能，也没有提供修改函数所有者、模式、易失性的功能。
标准还要求<TT CLASS="LITERAL">RESTRICT</TT>关键字，这在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>里是可选的。 </P></DIV><DIV CLASS="REFSECT1"><A NAME="AEN65177"></A><H2>又见</H2><A HREF="sql-createfunction.html">CREATE FUNCTION</A>, <A HREF="sql-dropfunction.html">DROP FUNCTION</A></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="sql-alterforeigntable.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="sql-altergroup.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">ALTER FOREIGN TABLE</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/sql-commands.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">ALTER GROUP</TD></TR></TABLE></DIV></BODY></HTML>
