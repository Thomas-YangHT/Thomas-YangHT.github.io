<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>比较操作符</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="函数和操作符" HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html"><LINK REL="PREVIOUS" TITLE="逻辑操作符" HREF="functions-logical.html"><LINK REL="NEXT" TITLE="数学函数和操作符" HREF="functions-math.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/func.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="逻辑操作符" HREF="functions-logical.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 9. 函数和操作符</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="数学函数和操作符" HREF="functions-math.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="FUNCTIONS-COMPARISON">9.2. 比较操作符</A></H1><P>可用的比较操作符在<A HREF="functions-comparison.html#FUNCTIONS-COMPARISON-TABLE">&#34920; 9-1</A>显示。</P><DIV CLASS="TABLE"><A NAME="FUNCTIONS-COMPARISON-TABLE"></A><P><B>&#34920; 9-1. 比较操作符</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>操作符</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD> <TT CLASS="LITERAL">&lt;</TT> </TD><TD>小于</TD></TR><TR><TD> <TT CLASS="LITERAL">&gt;</TT> </TD><TD>大于</TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;=</TT> </TD><TD>小于或等于</TD></TR><TR><TD> <TT CLASS="LITERAL">&gt;=</TT> </TD><TD>大于或等于</TD></TR><TR><TD> <TT CLASS="LITERAL">=</TT> </TD><TD>等于</TD></TR><TR><TD> <TT CLASS="LITERAL">&lt;&gt;</TT>或<TT CLASS="LITERAL">!=</TT> </TD><TD>不等于</TD></TR></TBODY></TABLE></DIV><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>&#27880;&#24847;: </B><TT CLASS="LITERAL">!=</TT>操作符在分析器阶段被转换成<TT CLASS="LITERAL">&lt;&gt;</TT>。
<TT CLASS="LITERAL">!=</TT>和<TT CLASS="LITERAL">&lt;&gt;</TT>操作符是完全等价的。</P></BLOCKQUOTE></DIV><P>比较操作符可以用于所有相关的数据类型。所有比较操作符都是双目操作符，
返回<TT CLASS="TYPE">boolean</TT>类型数值；像<TT CLASS="LITERAL">1 &lt; 2 &lt; 3</TT>
这样的表达式是非法的(因为布尔值和<TT CLASS="LITERAL">3</TT>之间不能做比较)。</P><P>
除了比较操作符以外，我们还可以使用<TT CLASS="TOKEN">BETWEEN</TT>构造。
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> BETWEEN <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> AND <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE><P>
等效于
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &gt;= <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> AND <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &lt;= <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE><P>
注意<TT CLASS="TOKEN">BETWEEN</TT>认为端点值是包含在范围内的。<TT CLASS="LITERAL">NOT BETWEEN</TT>
做相反的比较：
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> NOT BETWEEN <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> AND <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE><P>
等效于
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &lt; <TT
CLASS="REPLACEABLE"
><I
>x</I
></TT
> OR <TT
CLASS="REPLACEABLE"
><I
>a</I
></TT
> &gt; <TT
CLASS="REPLACEABLE"
><I
>y</I
></TT
></PRE><P>
<TT CLASS="LITERAL">BETWEEN SYMMETRIC</TT>和<TT CLASS="LITERAL">BETWEEN</TT>一样，只是没有要求
<TT CLASS="LITERAL">AND</TT>左边的参数小于或等于右边的参数。如果左面的参数不小于或等于右面的参数，
那么两个参数是自动交换的，所以非空范围总是适用。
</P><P>
要检查一个值是否为 NULL ，使用下面的构造：
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NULL
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NOT NULL</PRE><P>
或者等效，但并不标准的构造：
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> ISNULL
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> NOTNULL</PRE><P>
</P><P><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">不要</I></SPAN>写<TT CLASS="LITERAL"><TT CLASS="REPLACEABLE"><I>expression</I></TT> = NULL</TT>
因为<TT CLASS="LITERAL">NULL</TT>是不<SPAN CLASS="QUOTE">"等于"</SPAN><TT CLASS="LITERAL">NULL</TT>的。
NULL 代表一个未知的数值，因此我们无法知道两个未知的数值是否相等。这个行为遵循 SQL 标准。</P><DIV CLASS="TIP"><BLOCKQUOTE CLASS="TIP"><P><B>&#25552;&#31034;: </B>有些应用可能要求表达式<TT CLASS="LITERAL"><TT CLASS="REPLACEABLE"><I>expression</I></TT> = NULL</TT>
在<TT CLASS="REPLACEABLE"><I>expression</I></TT>为 NULL 时候返回真。
我们强烈建议这样的应用修改成遵循 SQL 标准。但是，如果这样修改是不可能的，
那么我们可以打开<A HREF="runtime-config-compatible.html#GUC-TRANSFORM-NULL-EQUALS">transform_null_equals</A>配置参数，
让<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>将<TT CLASS="LITERAL">x = NULL</TT>
自动转换成<TT CLASS="LITERAL">x IS NULL</TT>。</P></BLOCKQUOTE></DIV><DIV CLASS="NOTE"><BLOCKQUOTE CLASS="NOTE"><P><B>&#27880;&#24847;: </B>如果<TT CLASS="REPLACEABLE"><I>expression</I></TT>是行值，
那么当行表达式本身为 NULL 或该行的所有字段都为 NULL 时，<TT CLASS="LITERAL">IS NULL</TT>将为真；
当行表达式本身不为 NULL 并且该行的所有字段都不为 NULL 时，<TT CLASS="LITERAL">IS NOT NULL</TT>
也将为真。因为这个行为，<TT CLASS="LITERAL">IS NULL</TT>和<TT CLASS="LITERAL">IS NOT NULL</TT>
并不总是为行值表达式返回相反的值，也就是，
一个同时包含NULL和non-null值的行值表达式将在两种情况下都返回false。
这个规定符合 SQL 标准，但是与<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>之前的版本不兼容。</P></BLOCKQUOTE></DIV><P>
如果有任何一个输入是 NULL ，那么普通的比较操作符生成 NULL(表示<SPAN CLASS="QUOTE">"未知"</SPAN>)，
而不是true或false。例如，<TT CLASS="LITERAL">7 = NULL</TT>生成null，<TT CLASS="LITERAL">7 &lt;&gt; NULL</TT>
也生成null。当这种行为不适用时，使用<TT CLASS="LITERAL">IS [<SPAN CLASS="OPTIONAL"> NOT </SPAN>] DISTINCT FROM</TT>构造：
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS DISTINCT FROM <TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
>
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NOT DISTINCT FROM <TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
></PRE><P>
对于非 NULL 的输入<TT CLASS="LITERAL">IS DISTINCT FROM</TT>与<TT CLASS="LITERAL">&lt;&gt;</TT>
操作符相同。但是，如果两个输入都是 NULL ，那么它将返回假；如果只有一个输入是 NULL ，
那么它将返回真。类似的，对于非 NULL 的输入<TT CLASS="LITERAL">IS NOT DISTINCT FROM</TT>
与<TT CLASS="LITERAL">=</TT>操作符相同。但是，如果两个输入都是 NULL ，那么它将返回真；
如果只有一个输入是 NULL ，那么它将返回假。这样就很有效地把 NULL 当作一个普通数据值看待，
而不是<SPAN CLASS="QUOTE">"未知"</SPAN>。
</P><P>
布尔数值可以用下面的构造进行测试
</P><PRE CLASS="SYNOPSIS"><TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS TRUE
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NOT TRUE
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS FALSE
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NOT FALSE
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS UNKNOWN
<TT
CLASS="REPLACEABLE"
><I
>expression</I
></TT
> IS NOT UNKNOWN</PRE><P>
这些构造将总是返回真或假，从来不返回 NULL ，即使操作数是 NULL 也如此。
NULL 输入被当做逻辑数值<SPAN CLASS="QUOTE">"未知"</SPAN>。请注意实际上<TT CLASS="LITERAL">IS UNKNOWN</TT>
和<TT CLASS="LITERAL">IS NOT UNKNOWN</TT>分别与<TT CLASS="LITERAL">IS NULL</TT>和<TT CLASS="LITERAL">IS NOT NULL</TT>
相同，只是输入表达式必须是布尔类型。
</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="functions-logical.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="functions-math.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">逻辑操作符</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/functions.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">数学函数和操作符</TD></TR></TABLE></DIV></BODY></HTML>
