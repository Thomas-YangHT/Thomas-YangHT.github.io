<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>版本和平台兼容性</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="服务器配置" HREF="http://school.yunwei.edu/manual/PostgreSQL/runtime-config.html"><LINK REL="PREVIOUS" TITLE="锁管理" HREF="runtime-config-locks.html"><LINK REL="NEXT" TITLE="Error Handling" HREF="runtime-config-error-handling.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/config.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="锁管理" HREF="runtime-config-locks.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/runtime-config.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 18. 服务器配置</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="Error Handling" HREF="runtime-config-error-handling.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="RUNTIME-CONFIG-COMPATIBLE">18.13. 版本和平台兼容性</A></H1><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="RUNTIME-CONFIG-COMPATIBLE-VERSION">18.13.1. 以前的PostgreSQL版本</A></H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><A NAME="GUC-ARRAY-NULLS"></A><TT CLASS="VARNAME">array_nulls</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 控制数组输入解析器是否将未用引号界定的<TT CLASS="LITERAL">NULL</TT>作为数组的一个NULL元素。
默认为<TT CLASS="LITERAL">on</TT>表示允许向数组中输入NULL值。但8.2之前的<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>版本不支持这么做，
因此将把<TT CLASS="LITERAL">NULL</TT>当作字符串<SPAN CLASS="QUOTE">"NULL"</SPAN>。如果希望向后兼容这种旧式行为，
那么可以设为<TT CLASS="LITERAL">off</TT>。</P><P> 即使该值被设为<TT CLASS="LITERAL">off</TT>也仍然能够创建包含NULL值的数组。</P></DD><DT><A NAME="GUC-BACKSLASH-QUOTE"></A><TT CLASS="VARNAME">backslash_quote</TT> (<TT CLASS="TYPE">enum</TT>)</DT><DD><P> 控制字符串文本中的单引号是否能够用<TT CLASS="LITERAL">\'</TT>来表示。
首选的符合SQL标准的方法是将其双写(<TT CLASS="LITERAL">''</TT>)，但是<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>
在历史上也可以用<TT CLASS="LITERAL">\'</TT>来表示。
不过使用<TT CLASS="LITERAL">\'</TT>容易导致安全漏洞，
因为在某些多字节字符集中存在最后一个字节等于<TT CLASS="LITERAL">\</TT>的 ASCII 值的字符。
如果客户端代码没有做到正确转义，那么将会导致SQL注入攻击。
如果服务器拒绝使用反斜杠转义来表示单引号的查询，那么就可以避免这种风险。
<TT CLASS="VARNAME">backslash_quote</TT>的可用值是<TT CLASS="LITERAL">on</TT>(总是允许<TT CLASS="LITERAL">\'</TT>),
<TT CLASS="LITERAL">off</TT>(总是拒绝), <TT CLASS="LITERAL">safe_encoding</TT>
(仅在客户端字符集编码不会在多字节字符末尾包含<TT CLASS="LITERAL">\</TT>的ASCII值时允许)。
<TT CLASS="LITERAL">safe_encoding</TT>是缺省设置。</P><P> 需要注意的是，在字符串文本符合SQL标准的情况下，<TT CLASS="LITERAL">\</TT>没有任何其它含义。
这个参数影响的只是如何处理不符合标准的字符串文本，
包括明确的字符串转义语法(<TT CLASS="LITERAL">E'...'</TT>)。</P></DD><DT><A NAME="GUC-DEFAULT-WITH-OIDS"></A><TT CLASS="VARNAME">default_with_oids</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 这个选项控制<TT CLASS="COMMAND">CREATE TABLE</TT>和
<TT CLASS="COMMAND">CREATE TABLE AS</TT>在既没有声明<TT CLASS="LITERAL">WITH OIDS</TT>
也没有声明<TT CLASS="LITERAL">WITHOUT OIDS</TT>的情况下，
是否在新创建的表中包含OID字段。它还决定<TT CLASS="COMMAND">SELECT INTO</TT>创建的表里面是否包含OID。
参数缺省是<TT CLASS="LITERAL">off</TT>；在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 8.0之前缺省为on。</P><P> 我们反对在用户表中使用 OID ，因此大多数安装应该关闭这个变量。
需要OID的表应该在创建表的时候声明<TT CLASS="LITERAL">WITH OIDS</TT>。
启用这个变量可以与不遵循这一行为的旧的应用程序兼容。 </P></DD><DT><A NAME="GUC-ESCAPE-STRING-WARNING"></A><TT CLASS="VARNAME">escape_string_warning</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 打开的时候，如果在普通的字符串文本里(<TT CLASS="LITERAL">'...'</TT>语法)出现了一个反斜扛(<TT CLASS="LITERAL">\</TT>)并且
<TT CLASS="VARNAME">standard_conforming_strings</TT>被关闭，那么就会发出一个警告。缺省是<TT CLASS="LITERAL">on</TT>。</P><P> 想要使用反斜杠作为转义的应用程序
应该使用转义字符串语法(<TT CLASS="LITERAL">E'...'</TT>)进行修改，
因为通的字符串缺省行为作为普通字符的反斜扛对待。
启动这个变量帮助找到需要修改的代码。</P></DD><DT><A NAME="GUC-LO-COMPAT-PRIVILEGES"></A><TT CLASS="VARNAME">lo_compat_privileges</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>9.0之前，大对象没有访问权限，因此，总是被所有用户可读可写。
设置这个变量到<TT CLASS="LITERAL">on</TT>禁用新权限检查，为了兼容先前版本。
缺省是<TT CLASS="LITERAL">off</TT>。只要超级用户可以改变此设置。 </P><P> 设置这些变量不会禁用所有与大对象相关的安全检查&mdash;仅仅是在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 9.0
已经改变了的缺省操作。比如，<TT CLASS="LITERAL">lo_import()</TT> 和<TT CLASS="LITERAL">lo_export()</TT>
不管这些设置都需要超级用户权限。</P></DD><DT><A NAME="GUC-QUOTE-ALL-IDENTIFIERS"></A><TT CLASS="VARNAME">quote_all_identifiers</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 当数据库生成SQL，强制引用所有标示符，即使它们（当前）不是关键字。这也将影响
<TT CLASS="COMMAND">EXPLAIN</TT>的输出以及像<CODE CLASS="FUNCTION">pg_get_viewdef</CODE>函数的结果。
参见<A HREF="app-pgdump.html">pg_dump</A>和<A HREF="app-pg-dumpall.html"><SPAN CLASS="APPLICATION">pg_dumpall</SPAN></A>的<TT CLASS="OPTION">--quote-all-identifiers</TT>
选项。</P></DD><DT><A NAME="GUC-SQL-INHERITANCE"></A><TT CLASS="VARNAME">sql_inheritance</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 这个设置控制着未修饰的表引用是否包含继承的子表。缺省是<TT CLASS="LITERAL">on</TT>，
这意味着包含子表（因此，缺省假定<TT CLASS="LITERAL">*</TT>后缀）。如果返回<TT CLASS="LITERAL">off</TT>，
则不包含子表（因此，假定<TT CLASS="LITERAL">ONLY</TT>前缀）。SQL标准需要包含子表。
因此<TT CLASS="LITERAL">off</TT> 设置不符合规范，但是它提供了<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 7.1版本之前的兼容性。
参见<A HREF="ddl-inherit.html">第 5.8 &#33410;</A>获取更多详细信息。</P><P> 不赞成关闭<TT CLASS="VARNAME">sql_inheritance</TT>，因为发现操作有错误而且违反SQL标准。
关于继承操作的讨论在手册中通常假定它是<TT CLASS="LITERAL">on</TT>。</P></DD><DT><A NAME="GUC-STANDARD-CONFORMING-STRINGS"></A><TT CLASS="VARNAME">standard_conforming_strings</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 控制普通字符串文本(<TT CLASS="LITERAL">'...'</TT>)中是否按照SQL标准把反斜扛当普通文本。
<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> 9.1开始，缺省是<TT CLASS="LITERAL">on</TT>（
之前缺省是<TT CLASS="LITERAL">off</TT>）。
应用可以检查这个参数来判断字符串文本如何被处理。
这个参数的出现也建议明确使用转义字符串语法(<TT CLASS="LITERAL">E'...'</TT>)来转义字符。
如果应用希望反斜杠作为转义字符对待，则使用转义字符串语法(<A HREF="sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-ESCAPE">第 4.1.2.2 &#33410;</A>)。&#13;</P></DD><DT><A NAME="GUC-SYNCHRONIZE-SEQSCANS"></A><TT CLASS="VARNAME">synchronize_seqscans</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 这允许大表进行顺序扫描以同步其他的，所以并发扫描读取同一时间的同一批，
从而共享I/O负载。启用此功能后，扫描可能会在表中间开始，
然后<SPAN CLASS="QUOTE">"包装开始环绕"</SPAN>以覆盖所有的行，
从而同步已在进行的扫描活动。
这可能导致没有<TT CLASS="LITERAL">ORDER BY</TT>子句的查询返回排序行的不可预测变化。
设置这个参数为<TT CLASS="LITERAL">off</TT>确保预8.3行为，
其中一个顺序扫描总是从表的开头开始。缺省是<TT CLASS="LITERAL">on</TT>。</P></DD></DL></DIV></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="RUNTIME-CONFIG-COMPATIBLE-CLIENTS">18.13.2. 平台和客户端兼容</A></H2><P></P><DIV CLASS="VARIABLELIST"><DL><DT><A NAME="GUC-TRANSFORM-NULL-EQUALS"></A><TT CLASS="VARNAME">transform_null_equals</TT> (<TT CLASS="TYPE">boolean</TT>)</DT><DD><P> 如果打开，那么表达式<TT CLASS="LITERAL"><TT CLASS="REPLACEABLE"><I>expr</I></TT> = NULL</TT> 或者<TT CLASS="LITERAL">NULL =
<TT CLASS="REPLACEABLE"><I>expr</I></TT></TT>将被当做<TT CLASS="LITERAL"><TT CLASS="REPLACEABLE"><I>expr</I></TT> IS NULL</TT>处理，
也就是说，如果<TT CLASS="REPLACEABLE"><I>expr</I></TT>得出 NULL 值则返回真，否则返回假。
正确的 SQL 标准兼容的<TT CLASS="LITERAL"><TT CLASS="REPLACEABLE"><I>expr</I></TT> = NULL</TT>行为总是返回NULL(未知)。
因此这个选项缺省是<TT CLASS="LITERAL">off</TT>。</P><P> 不过，在<SPAN CLASS="PRODUCTNAME">Microsoft Access</SPAN>里的过滤表单生成的查询好像使用的是
<TT CLASS="LITERAL"><TT CLASS="REPLACEABLE"><I>expr</I></TT> = NULL</TT>测试 NULL ，因此，
如果你使用这个界面访问数据库，你可能想把这个选项打开。
因为形如<TT CLASS="LITERAL"><TT CLASS="REPLACEABLE"><I>expr</I></TT> = NULL</TT>的表达式总是返回NULL（使用SQL标准说明），
它们不是很有用而且在应用中也不常见，
因此这个选项实际上没有什么害处。但是新用户常常在涉及NULL的表达式语义上感到糊涂，
因此缺省时不打开这个选项。</P><P> 请注意这个选项只影响<TT CLASS="LITERAL">= NULL</TT>形式，
不包括其它比较操作符或者其它与一些涉及等号操作符的表达式计算(比如<TT CLASS="LITERAL">IN</TT>)。
因此，这个选项不是垃圾程序的普遍修复。</P><P> 请参考<A HREF="functions-comparison.html">第 9.2 &#33410;</A>获取相关信息。</P></DD></DL></DIV></DIV></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="runtime-config-locks.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="runtime-config-error-handling.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">锁管理</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/runtime-config.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">Error Handling</TD></TR></TABLE></DIV></BODY></HTML>
