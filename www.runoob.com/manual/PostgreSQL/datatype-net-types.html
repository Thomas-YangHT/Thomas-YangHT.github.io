<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>网络地址类型</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="数据类型" HREF="http://school.yunwei.edu/manual/PostgreSQL/datatype.html"><LINK REL="PREVIOUS" TITLE="几何类型" HREF="datatype-geometric.html"><LINK REL="NEXT" TITLE="位串类型" HREF="datatype-bit.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/datatype.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="几何类型" HREF="datatype-geometric.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/datatype.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 8. 数据类型</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="位串类型" HREF="datatype-bit.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="DATATYPE-NET-TYPES">8.9. 网络地址类型</A></H1><P><SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>提供用于存储 IPv4 、IPv6 、MAC 地址的数据类型，
在<A HREF="datatype-net-types.html#DATATYPE-NET-TYPES-TABLE">&#34920; 8-21</A>里显示。
用这些数据类型存储网络地址比用纯文本类型好，
因为这些类型提供输入错误检查和特殊的操作和功能(见<A HREF="functions-net.html">第 9.12 &#33410;</A>)。</P><DIV CLASS="TABLE"><A NAME="DATATYPE-NET-TYPES-TABLE"></A><P><B>&#34920; 8-21. 网络地址类型</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><THEAD><TR><TH>名字</TH><TH>存储空间</TH><TH>描述</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="TYPE">cidr</TT></TD><TD>7 或 19 字节</TD><TD>IPv4 或 IPv6 网络</TD></TR><TR><TD><TT CLASS="TYPE">inet</TT></TD><TD>7 或 19 字节</TD><TD>IPv4 或 IPv6 主机和网络</TD></TR><TR><TD><TT CLASS="TYPE">macaddr</TT></TD><TD>6 字节</TD><TD>MAC 地址</TD></TR></TBODY></TABLE></DIV><P>在对<TT CLASS="TYPE">inet</TT>或<TT CLASS="TYPE">cidr</TT>数据类型进行排序的时候，
IPv4 地址总是排在 IPv6 地址前面，包括那些封装或者是映射在 IPv6 地址里的 IPv4 地址，
比如 ::10.2.3.4 或 ::ffff:10.4.3.2。</P><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="DATATYPE-INET">8.9.1. <TT CLASS="TYPE">inet</TT></A></H2><P><TT CLASS="TYPE">inet</TT>在一个数据域里保存主机的 IPv4 或 IPv6 地址，以及一个可选的等效子网。
子网的等效是通过计算主机地址中有多少位表示网络地址的方法来表示的(<SPAN CLASS="QUOTE">"子网掩码"</SPAN>)。
如果子网掩码是 32 并且地址是 IPv4 ，那么不表示任何子网，只是一台主机。
在 IPv6 里，地址长度是 128 位，因此 128 位表明一个唯一的主机地址。
请注意如果你想只接受网络地址，你应该使用<TT CLASS="TYPE">cidr</TT>类型而不是<TT CLASS="TYPE">inet</TT>类型。</P><P>该类型的输入格式是<TT CLASS="REPLACEABLE"><I>address/y</I></TT>，
这里的<TT CLASS="REPLACEABLE"><I>address</I></TT>
是 IPv4 或者 IPv6 地址，<TT CLASS="REPLACEABLE"><I>y</I></TT>
是子网掩码的二进制位数。如果<TT CLASS="REPLACEABLE"><I>/y</I></TT>
部分未填，则子网掩码对 IPv4 而言是 32 ，对 IPv6 而言是 128 ，
所以该值表示只有一台主机。显示时，如果该值表示只有一台主机，
<TT CLASS="REPLACEABLE"><I>/y</I></TT>将不会显示。</P></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="DATATYPE-CIDR">8.9.2. <TT CLASS="TYPE">cidr</TT></A></H2><P><TT CLASS="TYPE">cidr</TT>保存一个 IPv4 或 IPv6 网络地址。其输入和输出遵循无类别的互联网域路由习惯。
声明一个网络的格式是<TT CLASS="REPLACEABLE"><I>address/y</I></TT>，
这里的<TT CLASS="REPLACEABLE"><I>address</I></TT>是 IPv4 或者 IPv6 地址，
<TT CLASS="REPLACEABLE"><I>y</I></TT>是子网掩码的二进制位数。如果省略<TT CLASS="REPLACEABLE"><I>y</I></TT>，
那么掩码部分用旧的有类别的网络编号系统进行计算，但要求输入的数据已经包括了确定掩码所需的所有字节。
声明一个指定掩码的网络地址是错误的。</P><P><A HREF="datatype-net-types.html#DATATYPE-NET-CIDR-TABLE">&#34920; 8-22</A> 是些例子。</P><DIV CLASS="TABLE"><A NAME="DATATYPE-NET-CIDR-TABLE"></A><P><B>&#34920; 8-22. <TT CLASS="TYPE">cidr</TT> 类型输入举例</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><THEAD><TR><TH><TT CLASS="TYPE">cidr</TT> 输入</TH><TH><TT CLASS="TYPE">cidr</TT> 输出</TH><TH><TT CLASS="LITERAL"><CODE CLASS="FUNCTION">abbrev(<TT CLASS="TYPE">cidr</TT>)</CODE></TT></TH></TR></THEAD><TBODY><TR><TD>192.168.100.128/25</TD><TD>192.168.100.128/25</TD><TD>192.168.100.128/25</TD></TR><TR><TD>192.168/24</TD><TD>192.168.0.0/24</TD><TD>192.168.0/24</TD></TR><TR><TD>192.168/25</TD><TD>192.168.0.0/25</TD><TD>192.168.0.0/25</TD></TR><TR><TD>192.168.1</TD><TD>192.168.1.0/24</TD><TD>192.168.1/24</TD></TR><TR><TD>192.168</TD><TD>192.168.0.0/24</TD><TD>192.168.0/24</TD></TR><TR><TD>128.1</TD><TD>128.1.0.0/16</TD><TD>128.1/16</TD></TR><TR><TD>128</TD><TD>128.0.0.0/16</TD><TD>128.0/16</TD></TR><TR><TD>128.1.2</TD><TD>128.1.2.0/24</TD><TD>128.1.2/24</TD></TR><TR><TD>10.1.2</TD><TD>10.1.2.0/24</TD><TD>10.1.2/24</TD></TR><TR><TD>10.1</TD><TD>10.1.0.0/16</TD><TD>10.1/16</TD></TR><TR><TD>10</TD><TD>10.0.0.0/8</TD><TD>10/8</TD></TR><TR><TD>10.1.2.3/32</TD><TD>10.1.2.3/32</TD><TD>10.1.2.3/32</TD></TR><TR><TD>2001:4f8:3:ba::/64</TD><TD>2001:4f8:3:ba::/64</TD><TD>2001:4f8:3:ba::/64</TD></TR><TR><TD>2001:4f8:3:ba:2e0:81ff:fe22:d1f1/128</TD><TD>2001:4f8:3:ba:2e0:81ff:fe22:d1f1/128</TD><TD>2001:4f8:3:ba:2e0:81ff:fe22:d1f1</TD></TR><TR><TD>::ffff:1.2.3.0/120</TD><TD>::ffff:1.2.3.0/120</TD><TD>::ffff:1.2.3/120</TD></TR><TR><TD>::ffff:1.2.3.0/128</TD><TD>::ffff:1.2.3.0/128</TD><TD>::ffff:1.2.3.0/128</TD></TR></TBODY></TABLE></DIV></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="DATATYPE-INET-VS-CIDR">8.9.3. <TT CLASS="TYPE">inet</TT> 对比 <TT CLASS="TYPE">cidr</TT></A></H2><P><TT CLASS="TYPE">inet</TT>和<TT CLASS="TYPE">cidr</TT>类型之间的基本区别是<TT CLASS="TYPE">inet</TT>
接受子网掩码，而<TT CLASS="TYPE">cidr</TT>不接受。</P><DIV CLASS="TIP"><BLOCKQUOTE CLASS="TIP"><P><B>&#25552;&#31034;: </B>如果你不喜欢<TT CLASS="TYPE">inet</TT>或<TT CLASS="TYPE">cidr</TT>值的输出格式，
请试一下<CODE CLASS="FUNCTION">host</CODE>,<CODE CLASS="FUNCTION">text</CODE>和<CODE CLASS="FUNCTION">abbrev</CODE>函数。</P></BLOCKQUOTE></DIV></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="DATATYPE-MACADDR">8.9.4. <TT CLASS="TYPE">macaddr</TT></A></H2><P><TT CLASS="TYPE">macaddr</TT>类型存储 MAC 地址，也就是以太网卡硬件地址(尽管 MAC 地址还用于其它用途)。
可以接受下列格式：
<P></P><TABLE BORDER="0"><TBODY><TR><TD><TT CLASS="LITERAL">'08:00:2b:01:02:03'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">'08-00-2b-01-02-03'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">'08002b:010203'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">'08002b-010203'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">'0800.2b01.0203'</TT></TD></TR><TR><TD><TT CLASS="LITERAL">'08002b010203'</TT></TD></TR></TBODY></TABLE><P></P>
它们声明的都是同一个地址。对于数据位<TT CLASS="LITERAL">a</TT>到<TT CLASS="LITERAL">f</TT>，
大小写都行。输出总是我们上面给出的第一种形式。
</P><P>IEEE标准802-2001指定第二种形式（带连字符）为MAC地址的标准格式，
并指定的第一种形式（用冒号）为位反转符号，因此08-00-2b-01-02-03=01:00:4D:08:04:0C。
这个条约现在已很少使用，它和过时的网络协议（如令牌环）有关。
PostgreSQL对位反转没有规定，并且所有接受的格式使用LSB协议顺序。</P><P>其余四个输入格式不是任何标准的一部分。</P></DIV></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="datatype-geometric.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="datatype-bit.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">几何类型</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/datatype.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">位串类型</TD></TR></TABLE></DIV></BODY></HTML>
