<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>字符集支持</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="区域" HREF="http://school.yunwei.edu/manual/PostgreSQL/charset.html"><LINK REL="PREVIOUS" TITLE="排序规则支持" HREF="collation.html"><LINK REL="NEXT" TITLE="日常数据库维护工作" HREF="http://school.yunwei.edu/manual/PostgreSQL/maintenance.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/charset.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="排序规则支持" HREF="collation.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/charset.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 22. 区域</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="日常数据库维护工作" HREF="http://school.yunwei.edu/manual/PostgreSQL/maintenance.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="MULTIBYTE">22.3. 字符集支持</A></H1><P> <SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>中的字符集支持可以让你以各种字符集存储文本（也称为编码），
包含单字节字符集，比如ISO-8859系列和多字节字符集比如<ACRONYM CLASS="ACRONYM">EUC</ACRONYM>(扩展Unix编码)、
UTF-8、Mule国际编码。
所有字符集都可以被客户端透明地使用。
但是有一些不支持在服务器上使用（即作为服务器端编码）。
缺省的字符集是在使用<TT CLASS="COMMAND">initdb</TT>初始化数据库集群的时候选择的。
在你创建数据库的时候是可以覆盖这个缺省值的。因此，你可以有多个数据库，
每个都有不同的字符集。</P><P> 但是，有一个重要的限制，每个数据库的字符集必须与该数据库的<TT CLASS="ENVAR">LC_CTYPE</TT>（字符类别）以及
<TT CLASS="ENVAR">LC_COLLATE</TT>（字符串排序顺序）区域设置相兼容。对于<TT CLASS="LITERAL">C</TT>或者
<TT CLASS="LITERAL">POSIX</TT>区域，允许任何字符集，
但对于其他区域只有一个字符集设置能正常工作。（不过在Windows上，UTF-8编码可用于任何区域）。</P><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="MULTIBYTE-CHARSET-SUPPORTED">22.3.1. 支持的字符集</A></H2><P> <A HREF="multibyte.html#CHARSET-TABLE">&#34920; 22-1</A>显示了可以在<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>中使用的
字符集。</P><DIV CLASS="TABLE"><A NAME="CHARSET-TABLE"></A><P><B>&#34920; 22-1. <SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>字符集</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><COL><COL><COL><COL><THEAD><TR><TH>名字</TH><TH>描述</TH><TH>语言</TH><TH>服务端?</TH><TH>字节数/字符</TH><TH>别名</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL">BIG5</TT></TD><TD>大五码</TD><TD>繁体中文</TD><TD>No</TD><TD>1-2</TD><TD><TT CLASS="LITERAL">WIN950</TT>, <TT CLASS="LITERAL">Windows950</TT></TD></TR><TR><TD><TT CLASS="LITERAL">EUC_CN</TT></TD><TD>扩展UNIX代码-CN</TD><TD>简体中文</TD><TD>Yes</TD><TD>1-3</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">EUC_JP</TT></TD><TD>扩展UNIX代码-JP</TD><TD>日文</TD><TD>Yes</TD><TD>1-3</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">EUC_JIS_2004</TT></TD><TD>扩展UNIX代码-JP, JIS X 0213</TD><TD>日文</TD><TD>Yes</TD><TD>1-3</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">EUC_KR</TT></TD><TD>扩展UNIX代码-KR</TD><TD>韩文</TD><TD>Yes</TD><TD>1-3</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">EUC_TW</TT></TD><TD>扩展UNIX代码-TW</TD><TD>繁体中文，台湾</TD><TD>Yes</TD><TD>1-3</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">GB18030</TT></TD><TD>国标码</TD><TD>中文</TD><TD>No</TD><TD>1-2</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">GBK</TT></TD><TD>扩展国标码</TD><TD>简体中文</TD><TD>No</TD><TD>1-2</TD><TD><TT CLASS="LITERAL">WIN936</TT>, <TT CLASS="LITERAL">Windows936</TT></TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_5</TT></TD><TD>ISO 8859-5, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 113</TD><TD>拉丁/西里尔语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_6</TT></TD><TD>ISO 8859-6, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 114</TD><TD>拉丁/阿拉伯语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_7</TT></TD><TD>ISO 8859-7, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 118</TD><TD>拉丁/希腊语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_8</TT></TD><TD>ISO 8859-8, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 121</TD><TD>拉丁/希伯莱语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">JOHAB</TT></TD><TD><ACRONYM CLASS="ACRONYM">JOHAB</ACRONYM></TD><TD>韩语</TD><TD>No</TD><TD>1-3</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">KOI8R</TT></TD><TD><ACRONYM CLASS="ACRONYM">KOI</ACRONYM>8-R</TD><TD>西里尔语(俄国)</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">KOI8</TT></TD></TR><TR><TD><TT CLASS="LITERAL">KOI8U</TT></TD><TD><ACRONYM CLASS="ACRONYM">KOI</ACRONYM>8-U</TD><TD>西里尔语(乌克兰)</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN1</TT></TD><TD>ISO 8859-1, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 94</TD><TD>西欧语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO88591</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN2</TT></TD><TD>ISO 8859-2, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 94</TD><TD>中欧语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO88592</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN3</TT></TD><TD>ISO 8859-3, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 94</TD><TD>南欧语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO88593</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN4</TT></TD><TD>ISO 8859-4, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 94</TD><TD>北欧语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO88594</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN5</TT></TD><TD>ISO 8859-9, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 128</TD><TD>土耳其语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO88599</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN6</TT></TD><TD>ISO 8859-10, <ACRONYM CLASS="ACRONYM">ECMA</ACRONYM> 144</TD><TD>日耳曼语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO885910</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN7</TT></TD><TD>ISO 8859-13</TD><TD>波罗的海语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO885913</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN8</TT></TD><TD>ISO 8859-14</TD><TD>凯尔特语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO885914</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN9</TT></TD><TD>ISO 8859-15</TD><TD>带有欧洲语系和语调的LATIN1</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO885915</TT></TD></TR><TR><TD><TT CLASS="LITERAL">LATIN10</TT></TD><TD>ISO 8859-16, <ACRONYM CLASS="ACRONYM">ASRO</ACRONYM> SR 14111</TD><TD>罗马尼亚语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ISO885916</TT></TD></TR><TR><TD><TT CLASS="LITERAL">MULE_INTERNAL</TT></TD><TD>Mule internal code</TD><TD>多语种Emacs</TD><TD>Yes</TD><TD>1-4</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">SJIS</TT></TD><TD>Shift JIS</TD><TD>日语</TD><TD>No</TD><TD>1-2</TD><TD><TT CLASS="LITERAL">Mskanji</TT>, <TT CLASS="LITERAL">ShiftJIS</TT>, <TT CLASS="LITERAL">WIN932</TT>, <TT CLASS="LITERAL">Windows932</TT></TD></TR><TR><TD><TT CLASS="LITERAL">SHIFT_JIS_2004</TT></TD><TD>Shift JIS, JIS X 0213</TD><TD>日语</TD><TD>No</TD><TD>1-2</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">SQL_ASCII</TT></TD><TD>unspecified (see text)</TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">任意</I></SPAN></TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">UHC</TT></TD><TD>Unified Hangul Code</TD><TD>韩语</TD><TD>No</TD><TD>1-2</TD><TD><TT CLASS="LITERAL">WIN949</TT>, <TT CLASS="LITERAL">Windows949</TT></TD></TR><TR><TD><TT CLASS="LITERAL">UTF8</TT></TD><TD>Unicode, 8-bit</TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">全部</I></SPAN></TD><TD>Yes</TD><TD>1-4</TD><TD><TT CLASS="LITERAL">Unicode</TT></TD></TR><TR><TD><TT CLASS="LITERAL">WIN866</TT></TD><TD>Windows CP866</TD><TD>西里尔语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ALT</TT></TD></TR><TR><TD><TT CLASS="LITERAL">WIN874</TT></TD><TD>Windows CP874</TD><TD>泰国语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1250</TT></TD><TD>Windows CP1250</TD><TD>中欧语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1251</TT></TD><TD>Windows CP1251</TD><TD>西里尔语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">WIN</TT></TD></TR><TR><TD><TT CLASS="LITERAL">WIN1252</TT></TD><TD>Windows CP1252</TD><TD>西欧语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1253</TT></TD><TD>Windows CP1253</TD><TD>希腊语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1254</TT></TD><TD>Windows CP1254</TD><TD>土耳其语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1255</TT></TD><TD>Windows CP1255</TD><TD>希伯来语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1256</TT></TD><TD>Windows CP1256</TD><TD>阿拉伯语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1257</TT></TD><TD>Windows CP1257</TD><TD>波罗的语</TD><TD>Yes</TD><TD>1</TD><TD>&nbsp;</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1258</TT></TD><TD>Windows CP1258</TD><TD>越南语</TD><TD>Yes</TD><TD>1</TD><TD><TT CLASS="LITERAL">ABC</TT>, <TT CLASS="LITERAL">TCVN</TT>, <TT CLASS="LITERAL">TCVN5712</TT>, <TT CLASS="LITERAL">VSCII</TT></TD></TR></TBODY></TABLE></DIV><P> 并非所有<ACRONYM CLASS="ACRONYM">API</ACRONYM>都支持上面列出的编码。比如，
<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN> JDBC驱动就不支持<TT CLASS="LITERAL">MULE_INTERNAL</TT>, <TT CLASS="LITERAL">LATIN6</TT>,
<TT CLASS="LITERAL">LATIN8</TT>和<TT CLASS="LITERAL">LATIN10</TT>。&#13;</P><P> <TT CLASS="LITERAL">SQL_ASCII</TT>设置与其它设置表现得相当不同。如果服务器字符集是<TT CLASS="LITERAL">SQL_ASCII</TT>，
服务器根据ASCII标准解析0-127的字节值，而字节值为128-255的则当作未解析的字符。
如果设置为<TT CLASS="LITERAL">SQL_ASCII</TT>就不会有编码转换。因此，这个设置基本不用来声明所使用的编码，
因为这个声明会忽略编码。在大多数情况下，如果你使用了任何非ASCII数据，
那么使用<TT CLASS="LITERAL">SQL_ASCII</TT>设置都是不明智的，因为<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>
会无法帮助你转换或者校验非ASCII字符。&#13;</P></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN33657">22.3.2. 设置字符集</A></H2><P>
<TT CLASS="COMMAND">initdb</TT>为一个<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>
集群定义缺省的字符集（编码），比如：
</P><PRE CLASS="SCREEN">initdb -E EUC_JP</PRE><P>
把缺省字符集设置为<TT CLASS="LITERAL">EUC_JP</TT>(用于日文的扩展Unix编码)。
如果你喜欢用长选项声明的话，可以用<TT CLASS="OPTION">--encoding</TT>代替<TT CLASS="OPTION">-E</TT>选项。
如果没有给出<TT CLASS="OPTION">-E</TT>或者<TT CLASS="OPTION">--encoding</TT>选项，
<TT CLASS="COMMAND">initdb</TT>将基于指定的或者缺省的区域试图判断合适的编码。
</P><P>
你可以在数据库创建时指定非缺省编码，但是指定的编码必须与所选的区域相兼容：
</P><PRE CLASS="SCREEN">createdb -E EUC_KR -T template0 --lc-collate=ko_KR.euckr --lc-ctype=ko_KR.euckr korean</PRE><P>
将创建一个使用<TT CLASS="LITERAL">EUC_KR</TT>字符集以及<TT CLASS="LITERAL">ko_KR</TT>区域的
名字叫<TT CLASS="LITERAL">korean</TT>的数据库。另外一种实现方法是使用SQL命令：
</P><PRE CLASS="PROGRAMLISTING">CREATE DATABASE korean WITH ENCODING 'EUC_KR' LC_COLLATE='ko_KR.euckr' LC_CTYPE='ko_KR.euckr' TEMPLATE=template0;</PRE><P>
注意上述命令声明拷贝<TT CLASS="LITERAL">template0</TT>数据库。当拷贝任何其他数据库时，
来自源数据库的编码和区域设置不能被改变，因为可能导致数据损坏。参阅<A HREF="manage-ag-templatedbs.html">第 21.3 &#33410;</A>
获取更多信息。
</P><P>
数据库的编码是存储在<TT CLASS="LITERAL">pg_database</TT>系统表中的。
你可以用<TT CLASS="COMMAND">psql</TT>的<TT CLASS="OPTION">-l</TT>选项或<TT CLASS="COMMAND">\l</TT>
命令列出这些编码。
</P><PRE CLASS="SCREEN">$ <KBD
CLASS="USERINPUT"
>psql -l</KBD
>
                                         List of databases
   Name    |  Owner   | Encoding  |  Collation  |    Ctype    |          Access Privileges          
-----------+----------+-----------+-------------+-------------+-------------------------------------
 clocaledb | hlinnaka | SQL_ASCII | C           | C           | 
 englishdb | hlinnaka | UTF8      | en_GB.UTF8  | en_GB.UTF8  | 
 japanese  | hlinnaka | UTF8      | ja_JP.UTF8  | ja_JP.UTF8  | 
 korean    | hlinnaka | EUC_KR    | ko_KR.euckr | ko_KR.euckr | 
 postgres  | hlinnaka | UTF8      | fi_FI.UTF8  | fi_FI.UTF8  | 
 template0 | hlinnaka | UTF8      | fi_FI.UTF8  | fi_FI.UTF8  | {=c/hlinnaka,hlinnaka=CTc/hlinnaka}
 template1 | hlinnaka | UTF8      | fi_FI.UTF8  | fi_FI.UTF8  | {=c/hlinnaka,hlinnaka=CTc/hlinnaka}
(7 rows)</PRE><P>
</P><DIV CLASS="IMPORTANT"><BLOCKQUOTE CLASS="IMPORTANT"><P><B>&#37325;&#35201;: </B>
在大多数现代操作系统中，<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>可以通过
<TT CLASS="ENVAR">LC_CTYPE</TT>的设置决定使用哪种字符集，并且强制只使用匹配的数据库编码。在旧的操作系统上
你有责任确保使用所选区域所期望的编码。
如果这上面犯错误很可能导致与区域相关的操作表现出古怪的行为，比如排序。
</P><P> 即使当<TT CLASS="ENVAR">LC_CTYPE</TT>不是<TT CLASS="LITERAL">C</TT>或者<TT CLASS="LITERAL">POSIX</TT>时，
<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>也允许超级用户创建
使用<TT CLASS="LITERAL">SQL_ASCII</TT>编码的数据库。正如
以上所述，<TT CLASS="LITERAL">SQL_ASCII</TT>不强制存储在数据库中的数据
具有任何特定的编码，所以这个选择带来
区域相关的不当行为的风险。使用这样的设置组合是不推荐的，也许有一天会被完全禁止。</P></BLOCKQUOTE></DIV></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN33695">22.3.3. 服务器和客户端之间的自动字符集转换</A></H2><P> <SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>支持在服务器和前端之间的自动编码转换。
转换信息在系统表<TT CLASS="LITERAL">pg_conversion</TT>中存储。
<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>带着一些预定义的转换。
它们在<A HREF="multibyte.html#MULTIBYTE-TRANSLATION-TABLE">&#34920; 22-2</A>中列出。
你可以使用SQL命令<TT CLASS="COMMAND">CREATE CONVERSION</TT>创建一个新的转换。</P><DIV CLASS="TABLE"><A NAME="MULTIBYTE-TRANSLATION-TABLE"></A><P><B>&#34920; 22-2. 客户/服务器字符集转换</B></P><TABLE BORDER="1" CLASS="CALSTABLE"><COL><COL><THEAD><TR><TH>服务器字符集</TH><TH>可用客户端字符集</TH></TR></THEAD><TBODY><TR><TD><TT CLASS="LITERAL">BIG5</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">不支持做服务器端编码</I></SPAN></TD></TR><TR><TD><TT CLASS="LITERAL">EUC_CN</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">EUC_CN</I></SPAN>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">EUC_JP</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">EUC_JP</I></SPAN>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">SJIS</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">EUC_KR</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">EUC_KR</I></SPAN>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">EUC_TW</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">EUC_TW</I></SPAN>,
<TT CLASS="LITERAL">BIG5</TT>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">GB18030</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">不支持做服务器端编码</I></SPAN>
</TD></TR><TR><TD><TT CLASS="LITERAL">GBK</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">不支持做服务器端编码</I></SPAN>
</TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_5</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">ISO_8859_5</I></SPAN>,
<TT CLASS="LITERAL">KOI8R</TT>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>,
<TT CLASS="LITERAL">WIN866</TT>,
<TT CLASS="LITERAL">WIN1251</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_6</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">ISO_8859_6</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_7</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">ISO_8859_7</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">ISO_8859_8</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">ISO_8859_8</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">JOHAB</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">JOHAB</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">KOI8R</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">KOI8R</I></SPAN>,
<TT CLASS="LITERAL">ISO_8859_5</TT>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>,
<TT CLASS="LITERAL">WIN866</TT>,
<TT CLASS="LITERAL">WIN1251</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">KOI8U</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">KOI8U</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN1</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN1</I></SPAN>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN2</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN2</I></SPAN>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>,
<TT CLASS="LITERAL">WIN1250</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN3</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN3</I></SPAN>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN4</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN4</I></SPAN>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN5</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN5</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN6</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN6</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN7</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN7</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN8</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN8</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN9</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN9</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">LATIN10</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">LATIN10</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">MULE_INTERNAL</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">MULE_INTERNAL</I></SPAN>,
<TT CLASS="LITERAL">BIG5</TT>,
<TT CLASS="LITERAL">EUC_CN</TT>,
<TT CLASS="LITERAL">EUC_JP</TT>,
<TT CLASS="LITERAL">EUC_KR</TT>,
<TT CLASS="LITERAL">EUC_TW</TT>,
<TT CLASS="LITERAL">ISO_8859_5</TT>,
<TT CLASS="LITERAL">KOI8R</TT>,
<TT CLASS="LITERAL">LATIN1</TT> to <TT CLASS="LITERAL">LATIN4</TT>,
<TT CLASS="LITERAL">SJIS</TT>,
<TT CLASS="LITERAL">WIN866</TT>,
<TT CLASS="LITERAL">WIN1250</TT>,
<TT CLASS="LITERAL">WIN1251</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">SJIS</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">不支持做服务器端编码</I></SPAN>
</TD></TR><TR><TD><TT CLASS="LITERAL">SQL_ASCII</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">任意(不会发生编码转换)</I></SPAN>
</TD></TR><TR><TD><TT CLASS="LITERAL">UHC</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">不支持做服务器端编码</I></SPAN>
</TD></TR><TR><TD><TT CLASS="LITERAL">UTF8</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">所有支持的编码</I></SPAN>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN866</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN866</I></SPAN>,
<TT CLASS="LITERAL">ISO_8859_5</TT>,
<TT CLASS="LITERAL">KOI8R</TT>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>,
<TT CLASS="LITERAL">WIN1251</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN874</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN874</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1250</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1250</I></SPAN>,
<TT CLASS="LITERAL">LATIN2</TT>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1251</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1251</I></SPAN>,
<TT CLASS="LITERAL">ISO_8859_5</TT>,
<TT CLASS="LITERAL">KOI8R</TT>,
<TT CLASS="LITERAL">MULE_INTERNAL</TT>,
<TT CLASS="LITERAL">UTF8</TT>,
<TT CLASS="LITERAL">WIN866</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1252</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1252</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1253</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1253</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1254</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1254</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1255</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1255</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1256</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1256</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1257</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1257</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR><TR><TD><TT CLASS="LITERAL">WIN1258</TT></TD><TD><SPAN CLASS="emphasis"><I CLASS="EMPHASIS">WIN1258</I></SPAN>,
<TT CLASS="LITERAL">UTF8</TT>
</TD></TR></TBODY></TABLE></DIV><P>
要想打开自动字符集转换功能，你必须告诉<SPAN CLASS="PRODUCTNAME">PostgreSQL</SPAN>
你想在客户端使用的字符集(编码)。
你可以用好几种方法实现这个目的。
<P></P></P><UL><LI><P>
用<SPAN CLASS="APPLICATION">psql</SPAN>里的<TT CLASS="COMMAND">\encoding</TT>命令。
<TT CLASS="COMMAND">\encoding</TT>允许你动态修改客户端编码。
比如，把编码改变为<TT CLASS="LITERAL">SJIS</TT>，键入：
</P><PRE CLASS="PROGRAMLISTING">\encoding SJIS</PRE><P>
</P></LI><LI><P> 使用<SPAN CLASS="APPLICATION">libpq</SPAN> (<A HREF="libpq-control.html">第 31.10 &#33410;</A>)函数控制客户端编码。</P></LI><LI><P>
使用<TT CLASS="COMMAND">SET client_encoding TO</TT>。使用下面的SQL命令设置客户端编码：
</P><PRE CLASS="PROGRAMLISTING">SET CLIENT_ENCODING TO '<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>';</PRE><P>
你也可以使用标准的SQL语法<TT CLASS="LITERAL">SET NAMES</TT>达到这个目的：
</P><PRE CLASS="PROGRAMLISTING">SET NAMES '<TT
CLASS="REPLACEABLE"
><I
>value</I
></TT
>';</PRE><P>
查询当前客户端编码：
</P><PRE CLASS="PROGRAMLISTING">SHOW client_encoding;</PRE><P>
返回缺省编码：
</P><PRE CLASS="PROGRAMLISTING">RESET client_encoding;</PRE><P>
</P></LI><LI><P> 使用<TT CLASS="ENVAR">PGCLIENTENCODING</TT>。如果在客户端的环境里定义了
<TT CLASS="ENVAR">PGCLIENTENCODING</TT>环境变量，那么在与服务器进行连接时将自动选择这个客户端编码。
这个编码随后可以用上面谈到的任何其它方法覆盖。&#13;</P></LI><LI><P> 使用<A HREF="runtime-config-client.html#GUC-CLIENT-ENCODING">client_encoding</A>配置变量。
如果在<TT CLASS="VARNAME">client_encoding</TT>里设置了该变量，
那么在与服务器建立了连接之后，将自动选定这个客户端编码。
这个设置随后可以被上面提到的其它方法覆盖。</P></LI></UL><P>
</P><P> 假如无法进行特定的字符转换&mdash; 比如，
你选的服务器编码是<TT CLASS="LITERAL">EUC_JP</TT>而客户端是<TT CLASS="LITERAL">LATIN1</TT>，
那么有些返回的日文字符不能转换成<TT CLASS="LITERAL">LATIN1</TT> &mdash;这时将报告错误。</P><P> 如果客户端字符集定义成了<TT CLASS="LITERAL">SQL_ASCII</TT>，
那么编码转换会被关闭，不管服务器的字符集是什么都一样。
和服务器一样，除非你的工作环境全部是ASCII数据，否则使用<TT CLASS="LITERAL">SQL_ASCII</TT>是不明智的。</P></DIV><DIV CLASS="SECT2"><H2 CLASS="SECT2"><A NAME="AEN34024">22.3.4. 进一步阅读</A></H2><P>
下面是学习各种类型的编码系统的好地方。
<P></P></P><DIV CLASS="VARIABLELIST"><DL><DT><I CLASS="CITETITLE">CJKV Information Processing: Chinese, Japanese, Korean &amp; Vietnamese Computing</I></DT><DD><P>
包含<TT CLASS="LITERAL">EUC_JP</TT>,
<TT CLASS="LITERAL">EUC_CN</TT>, <TT CLASS="LITERAL">EUC_KR</TT>,
<TT CLASS="LITERAL">EUC_TW</TT>的详细说明。
</P></DD><DT><A HREF="http://www.unicode.org/" TARGET="_top">http://www.unicode.org/</A></DT><DD><P> Unicode主页。</P></DD><DT>RFC 3629</DT><DD><P> <ACRONYM CLASS="ACRONYM">UTF</ACRONYM>-8 (8-bit UCS/Unicode转换格式)的定义。</P></DD></DL></DIV><P>
</P></DIV></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="collation.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/maintenance.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">排序规则支持</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/charset.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">日常数据库维护工作</TD></TR></TABLE></DIV></BODY></HTML>
