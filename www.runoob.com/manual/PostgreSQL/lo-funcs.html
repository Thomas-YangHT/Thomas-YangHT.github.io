<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML><HEAD><TITLE>服务器端函数</TITLE><META NAME="GENERATOR" CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK REV="MADE" HREF="mailto:pgsql-docs@postgresql.org"><LINK REL="HOME" TITLE="PostgreSQL 9.3.1 中文手册" HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html"><LINK REL="UP" TITLE="大对象" HREF="http://school.yunwei.edu/manual/PostgreSQL/largeobjects.html"><LINK REL="PREVIOUS" TITLE="客户端接口" HREF="lo-interfaces.html"><LINK REL="NEXT" TITLE="例子程序" HREF="lo-examplesect.html"><LINK REL="STYLESHEET" TYPE="text/css" HREF="http://school.yunwei.edu/manual/PostgreSQL/stylesheet.css"><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8"><META NAME="creation" CONTENT="2015-07-11T14:00:17"></HEAD><BODY CLASS="SECT1">
<div style="text-align:right">
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/issues/new" target="_blank" title="在Github上报告问题（请注明问题内容及所在章节）">问题报告</a>
<a style="margin : 0px 0px 0px 10px;" href="https://github.com/postgres-cn/pgdoc-cn/edit/master/postgresql/doc/src/sgml/lobj.sgml" target="_blank" title="直接在Github上纠错本页面">纠错本页面</a>
</div>
<DIV CLASS="NAVHEADER"><TABLE SUMMARY="Header navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TH COLSPAN="5" ALIGN="center" VALIGN="bottom"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html">PostgreSQL 9.3.1 中文手册</A></TH></TR><TR><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A TITLE="客户端接口" HREF="lo-interfaces.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="10%" ALIGN="left" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/largeobjects.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="60%" ALIGN="center" VALIGN="bottom">&#31456; 32. 大对象</TD><TD WIDTH="20%" ALIGN="right" VALIGN="top"><A TITLE="例子程序" HREF="lo-examplesect.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR></TABLE><HR ALIGN="LEFT" WIDTH="100%"></DIV><DIV CLASS="SECT1"><H1 CLASS="SECT1"><A NAME="LO-FUNCS">32.4. 服务器端函数</A></H1><P>
还有一些对应上面那些客户端函数的服务器端函数，
可以在SQL命令里使用；实际上，
大多数客户端函数都只是服务器端函数的等效接口。这些服务器端函数中，
通过SQL命令调用的实际有用的是<CODE CLASS="FUNCTION">lo_creat</CODE>,
<CODE CLASS="FUNCTION">lo_create</CODE>，
<CODE CLASS="FUNCTION">lo_unlink</CODE>，
<CODE CLASS="FUNCTION">lo_import</CODE>和
<CODE CLASS="FUNCTION">lo_export</CODE>。
下面是一些例子：
</P><PRE CLASS="PROGRAMLISTING">CREATE TABLE image (
    name            text,
    raster          oid
);

SELECT lo_creat(-1);       -- returns OID of new, empty large object

SELECT lo_create(43213);   -- attempts to create large object with OID 43213

SELECT lo_unlink(173454);  -- deletes large object with OID 173454

INSERT INTO image (name, raster)
    VALUES ('beautiful image', lo_import('/etc/motd'));

INSERT INTO image (name, raster)  -- same as above, but specify OID to use
    VALUES ('beautiful image', lo_import('/etc/motd', 68583));

SELECT lo_export(image.raster, '/tmp/motd') FROM image
    WHERE name = 'beautiful image';</PRE><P>
</P><P> 服务器端的<CODE CLASS="FUNCTION">lo_import</CODE>和
<CODE CLASS="FUNCTION">lo_export</CODE>函数和客户端的那几个有着显著的不同。
这两个函数在服务器的文件系统里读写文件， 使用数据库所有者的权限进行。
因此，只有超级用户才能使用他们。相比之下，客户端的输入和输出函数在客户端的文件系统里读写文件，
使用客户端程序的权限。客户端函数不需要超级用户权限。</P><P> <CODE CLASS="FUNCTION">lo_read</CODE>和<CODE CLASS="FUNCTION">lo_write</CODE>的功能通过服务器端调用可用，
但是服务器端函数名不同于客户端接口，因为他们不包含下划线。你必须作为<CODE CLASS="FUNCTION">loread</CODE>和<CODE CLASS="FUNCTION">lowrite</CODE>
调用这些函数。</P></DIV><DIV CLASS="NAVFOOTER"><HR ALIGN="LEFT" WIDTH="100%"><TABLE SUMMARY="Footer navigation table" WIDTH="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0"><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top"><A HREF="lo-interfaces.html" ACCESSKEY="P">&#19978;&#19968;&#39029;</A></TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/index.html" ACCESSKEY="H">&#36215;&#22987;&#39029;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top"><A HREF="lo-examplesect.html" ACCESSKEY="N">&#19979;&#19968;&#39029;</A></TD></TR><TR><TD WIDTH="33%" ALIGN="left" VALIGN="top">客户端接口</TD><TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="http://school.yunwei.edu/manual/PostgreSQL/largeobjects.html" ACCESSKEY="U">&#19978;&#19968;&#32423;</A></TD><TD WIDTH="33%" ALIGN="right" VALIGN="top">例子程序</TD></TR></TABLE></DIV></BODY></HTML>
